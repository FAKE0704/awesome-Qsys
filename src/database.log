[2025-08-18 18:03:04,349] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-04-01 to 2025-08-18
[2025-08-18 18:03:04,349] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 18:03:04,350] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-04-01 to 2025-08-18
[2025-08-18 18:03:04,408] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-04-01-2025-08-18 for sh.603900

[2025-08-18 18:03:04,415] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 4, 1)} for sh.603900
[2025-08-18 18:03:04,416] [INFO] [database:270] [conn:N/A] Found 1 missing data ranges for sh.603900
[2025-08-18 18:03:04,434] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 4, 1), datetime.date(2025, 4, 1))]
[2025-08-18 18:03:04,435] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.603900
[2025-08-18 18:03:04,436] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-01 to 2025-04-01
[2025-08-18 18:03:04,912] [INFO] [database:346] [conn:N/A] Successfully loaded 94 rows for sh.603900
[2025-08-18 18:03:04,924] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:04,927] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:04,927] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:04,927] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:04,927] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:04,929] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:04,929] [DEBUG] [backtesting:304] [conn:N/A] 注册策略调度处理器: d741166c-90da-474b-adf1-00371e789a9b
[2025-08-18 18:03:04,929] [INFO] [backtesting:307] [conn:N/A] 策略注册成功 | ID: d741166c-90da-474b-adf1-00371e789a9b | 名称: 自定义规则策略
[2025-08-18 18:03:04,929] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 18:03:04,929] [DEBUG] [backtesting:160] [conn:N/A] 识别数据频率为：日线
[2025-08-18 18:03:04,931] [DEBUG] [backtesting:186] [conn:N/A] 开始回测...
[2025-08-18 18:03:04,931] [INFO] [backtesting:354] [conn:N/A] 回测系统初始化开始
[2025-08-18 18:03:04,931] [INFO] [backtesting:366] [conn:N/A] 策略初始化完成: d741166c-90da-474b-adf1-00371e789a9b
[2025-08-18 18:03:04,931] [INFO] [backtesting:384] [conn:N/A] 回测系统初始化完成
[2025-08-18 18:03:04,931] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-02 00:00:00
[2025-08-18 18:03:04,931] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,931] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-02 00:00:00
[2025-08-18 18:03:04,931] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,931] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,932] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,933] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,933] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,934] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,934] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,934] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,935] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,935] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,935] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-02', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.3900'), 'high': Decimal('6.7200'), 'low': Decimal('6.2400'), 'close': Decimal('6.6200'), 'volume': Decimal('37696110'), 'amount': Decimal('243733294.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:03:04,935] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-03 00:00:00
[2025-08-18 18:03:04,935] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,935] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-03 00:00:00
[2025-08-18 18:03:04,935] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,936] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,936] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,937] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,937] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,937] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.5000'), 'high': Decimal('6.8200'), 'low': Decimal('6.4600'), 'close': Decimal('6.6400'), 'volume': Decimal('36174030'), 'amount': Decimal('240406419.5000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,937] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-07 00:00:00
[2025-08-18 18:03:04,937] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,937] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-07 00:00:00
[2025-08-18 18:03:04,937] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,938] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,939] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,939] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,940] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,941] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,941] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,941] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,941] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,941] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.9800'), 'high': Decimal('6.1100'), 'low': Decimal('5.9800'), 'close': Decimal('5.9800'), 'volume': Decimal('5000100'), 'amount': Decimal('29919755.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,941] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-08 00:00:00
[2025-08-18 18:03:04,941] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,941] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-08 00:00:00
[2025-08-18 18:03:04,941] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,941] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,942] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,943] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,943] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.3800'), 'high': Decimal('5.6600'), 'low': Decimal('5.3800'), 'close': Decimal('5.5600'), 'volume': Decimal('33605537'), 'amount': Decimal('183883781.1600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,943] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-09 00:00:00
[2025-08-18 18:03:04,943] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,943] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-09 00:00:00
[2025-08-18 18:03:04,943] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,943] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,944] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,945] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,945] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.3000'), 'high': Decimal('5.8000'), 'low': Decimal('5.0000'), 'close': Decimal('5.6700'), 'volume': Decimal('27537240'), 'amount': Decimal('148084247.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,945] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-10 00:00:00
[2025-08-18 18:03:04,945] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,945] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-10 00:00:00
[2025-08-18 18:03:04,945] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,945] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,946] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,947] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,947] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.8100'), 'high': Decimal('6.0600'), 'low': Decimal('5.8100'), 'close': Decimal('5.9700'), 'volume': Decimal('25721185'), 'amount': Decimal('152875403.3500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,947] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-11 00:00:00
[2025-08-18 18:03:04,947] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,947] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-11 00:00:00
[2025-08-18 18:03:04,947] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,947] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,948] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,949] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,950] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.1600'), 'high': Decimal('6.4000'), 'low': Decimal('6.0600'), 'close': Decimal('6.0600'), 'volume': Decimal('23225185'), 'amount': Decimal('143631038.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,950] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-14 00:00:00
[2025-08-18 18:03:04,950] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,950] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-14 00:00:00
[2025-08-18 18:03:04,950] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,952] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,953] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,953] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.0700'), 'high': Decimal('6.2900'), 'low': Decimal('5.9600'), 'close': Decimal('6.2200'), 'volume': Decimal('18278040'), 'amount': Decimal('112983018.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,954] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-15 00:00:00
[2025-08-18 18:03:04,954] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,954] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-15 00:00:00
[2025-08-18 18:03:04,954] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,954] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,955] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,956] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,956] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.2000'), 'high': Decimal('6.3200'), 'low': Decimal('6.0900'), 'close': Decimal('6.2300'), 'volume': Decimal('13199080'), 'amount': Decimal('81915118.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,956] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-16 00:00:00
[2025-08-18 18:03:04,956] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,956] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-16 00:00:00
[2025-08-18 18:03:04,956] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,956] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,961] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,961] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,961] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,961] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,972] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,972] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,973] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,974] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,974] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,974] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,974] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,975] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,975] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,975] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.3200'), 'high': Decimal('6.3200'), 'low': Decimal('6.0000'), 'close': Decimal('6.1700'), 'volume': Decimal('13023900'), 'amount': Decimal('80254777.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,975] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-17 00:00:00
[2025-08-18 18:03:04,975] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,976] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-17 00:00:00
[2025-08-18 18:03:04,976] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,976] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,976] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,976] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,976] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,977] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,977] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,978] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,979] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,979] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,979] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,979] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.2000'), 'high': Decimal('6.7900'), 'low': Decimal('6.2000'), 'close': Decimal('6.7900'), 'volume': Decimal('19707740'), 'amount': Decimal('130016807.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,980] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-18 00:00:00
[2025-08-18 18:03:04,980] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,980] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-18 00:00:00
[2025-08-18 18:03:04,980] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,980] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,980] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,981] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,981] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.7000'), 'high': Decimal('6.7000'), 'low': Decimal('6.3000'), 'close': Decimal('6.3400'), 'volume': Decimal('37258560'), 'amount': Decimal('238456034.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,981] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-21 00:00:00
[2025-08-18 18:03:04,981] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,981] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-21 00:00:00
[2025-08-18 18:03:04,981] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,981] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,982] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,982] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,983] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,983] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,984] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.4500'), 'high': Decimal('6.9700'), 'low': Decimal('6.4200'), 'close': Decimal('6.9700'), 'volume': Decimal('37298092'), 'amount': Decimal('248283499.2400'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,984] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-22 00:00:00
[2025-08-18 18:03:04,984] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,984] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-22 00:00:00
[2025-08-18 18:03:04,984] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,985] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,986] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,987] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,987] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.1200'), 'high': Decimal('7.5800'), 'low': Decimal('6.7900'), 'close': Decimal('6.8200'), 'volume': Decimal('66501335'), 'amount': Decimal('469208853.7800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,987] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-23 00:00:00
[2025-08-18 18:03:04,987] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,987] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-23 00:00:00
[2025-08-18 18:03:04,987] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,987] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,988] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,988] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,988] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.8000'), 'high': Decimal('6.9000'), 'low': Decimal('6.1600'), 'close': Decimal('6.1800'), 'volume': Decimal('49283757'), 'amount': Decimal('316766410.0500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,988] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-24 00:00:00
[2025-08-18 18:03:04,988] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,988] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-24 00:00:00
[2025-08-18 18:03:04,988] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,989] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,990] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,990] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.2400'), 'high': Decimal('6.3500'), 'low': Decimal('5.9100'), 'close': Decimal('5.9200'), 'volume': Decimal('29556192'), 'amount': Decimal('178901098.1200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,990] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-25 00:00:00
[2025-08-18 18:03:04,990] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,990] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-25 00:00:00
[2025-08-18 18:03:04,990] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,990] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,991] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,991] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.9800'), 'high': Decimal('6.0600'), 'low': Decimal('5.9300'), 'close': Decimal('5.9400'), 'volume': Decimal('19292540'), 'amount': Decimal('115327727.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,991] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-28 00:00:00
[2025-08-18 18:03:04,991] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,991] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-28 00:00:00
[2025-08-18 18:03:04,991] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,991] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,992] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,992] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,992] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.8300'), 'high': Decimal('6.0900'), 'low': Decimal('5.7100'), 'close': Decimal('6.0900'), 'volume': Decimal('19379720'), 'amount': Decimal('113860814.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,992] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-29 00:00:00
[2025-08-18 18:03:04,993] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,993] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-29 00:00:00
[2025-08-18 18:03:04,993] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,993] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,994] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,994] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('5.9000'), 'high': Decimal('6.1700'), 'low': Decimal('5.9000'), 'close': Decimal('6.1000'), 'volume': Decimal('19705780'), 'amount': Decimal('119863026.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,994] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-30 00:00:00
[2025-08-18 18:03:04,994] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,994] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-30 00:00:00
[2025-08-18 18:03:04,994] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,995] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,995] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,995] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.4000'), 'high': Decimal('6.7100'), 'low': Decimal('6.4000'), 'close': Decimal('6.7100'), 'volume': Decimal('20297510'), 'amount': Decimal('134967069.7000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,995] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-06 00:00:00
[2025-08-18 18:03:04,995] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,995] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-06 00:00:00
[2025-08-18 18:03:04,995] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,996] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,996] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,997] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('6.9600'), 'high': Decimal('7.3800'), 'low': Decimal('6.7600'), 'close': Decimal('7.3800'), 'volume': Decimal('64892580'), 'amount': Decimal('461370231.1000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,997] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-07 00:00:00
[2025-08-18 18:03:04,997] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,997] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-07 00:00:00
[2025-08-18 18:03:04,997] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,997] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,997] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,998] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,998] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:04,998] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.3800'), 'high': Decimal('7.5600'), 'low': Decimal('7.2000'), 'close': Decimal('7.2700'), 'volume': Decimal('46420640'), 'amount': Decimal('341949837.3000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:04,998] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-08 00:00:00
[2025-08-18 18:03:04,998] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:04,998] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-08 00:00:00
[2025-08-18 18:03:04,999] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:04,999] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:04,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,000] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,000] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.3000'), 'high': Decimal('7.5400'), 'low': Decimal('7.2500'), 'close': Decimal('7.3200'), 'volume': Decimal('29938449'), 'amount': Decimal('220466174.4700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,000] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-09 00:00:00
[2025-08-18 18:03:05,000] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,000] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-09 00:00:00
[2025-08-18 18:03:05,000] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,000] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,001] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,002] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,002] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.2500'), 'high': Decimal('7.6800'), 'low': Decimal('7.1900'), 'close': Decimal('7.4700'), 'volume': Decimal('36791120'), 'amount': Decimal('273239455.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,002] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-12 00:00:00
[2025-08-18 18:03:05,002] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,002] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-12 00:00:00
[2025-08-18 18:03:05,002] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,002] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,003] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,003] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,003] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.1700'), 'high': Decimal('7.4200'), 'low': Decimal('7.0000'), 'close': Decimal('7.3300'), 'volume': Decimal('27496340'), 'amount': Decimal('200020821.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,003] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-13 00:00:00
[2025-08-18 18:03:05,003] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,003] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-13 00:00:00
[2025-08-18 18:03:05,003] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,004] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,005] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,005] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.3600'), 'high': Decimal('7.9600'), 'low': Decimal('7.2400'), 'close': Decimal('7.6600'), 'volume': Decimal('38923840'), 'amount': Decimal('295811058.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,005] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-14 00:00:00
[2025-08-18 18:03:05,005] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,005] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-14 00:00:00
[2025-08-18 18:03:05,005] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,005] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,006] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,006] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,006] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.4800'), 'high': Decimal('8.0500'), 'low': Decimal('7.4500'), 'close': Decimal('7.7500'), 'volume': Decimal('34330180'), 'amount': Decimal('264112299.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,006] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-15 00:00:00
[2025-08-18 18:03:05,006] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,006] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-15 00:00:00
[2025-08-18 18:03:05,006] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,007] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,008] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,008] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.6300'), 'high': Decimal('7.8200'), 'low': Decimal('7.5700'), 'close': Decimal('7.6400'), 'volume': Decimal('20077140'), 'amount': Decimal('153934278.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,008] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-16 00:00:00
[2025-08-18 18:03:05,008] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,008] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-16 00:00:00
[2025-08-18 18:03:05,008] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,008] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,009] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,009] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,009] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.6400'), 'high': Decimal('8.1500'), 'low': Decimal('7.6100'), 'close': Decimal('7.9700'), 'volume': Decimal('34418299'), 'amount': Decimal('274058355.6800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,009] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-19 00:00:00
[2025-08-18 18:03:05,009] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,009] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-19 00:00:00
[2025-08-18 18:03:05,009] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,009] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,010] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,011] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,011] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-19', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.9700'), 'high': Decimal('8.3300'), 'low': Decimal('7.8800'), 'close': Decimal('8.0800'), 'volume': Decimal('27262879'), 'amount': Decimal('220113366.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,011] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-20 00:00:00
[2025-08-18 18:03:05,011] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,011] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-20 00:00:00
[2025-08-18 18:03:05,011] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,011] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,012] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,012] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-20', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('7.9400'), 'high': Decimal('8.8900'), 'low': Decimal('7.9400'), 'close': Decimal('8.8900'), 'volume': Decimal('20674641'), 'amount': Decimal('175780771.7200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,012] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-21 00:00:00
[2025-08-18 18:03:05,012] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,012] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-21 00:00:00
[2025-08-18 18:03:05,012] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,013] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,014] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,014] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.5900'), 'high': Decimal('9.7800'), 'low': Decimal('8.4800'), 'close': Decimal('9.7800'), 'volume': Decimal('47419059'), 'amount': Decimal('431827245.4800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,014] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-22 00:00:00
[2025-08-18 18:03:05,014] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,014] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-22 00:00:00
[2025-08-18 18:03:05,014] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,014] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,015] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,015] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,015] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.1700'), 'high': Decimal('10.7600'), 'low': Decimal('10.0500'), 'close': Decimal('10.7600'), 'volume': Decimal('70173984'), 'amount': Decimal('738012968.0300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,016] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-23 00:00:00
[2025-08-18 18:03:05,016] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,016] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-23 00:00:00
[2025-08-18 18:03:05,016] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,016] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,016] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,017] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,017] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3000'), 'high': Decimal('11.8000'), 'low': Decimal('10.0000'), 'close': Decimal('11.4500'), 'volume': Decimal('82679036'), 'amount': Decimal('901098563.9500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,017] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-26 00:00:00
[2025-08-18 18:03:05,017] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,017] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-26 00:00:00
[2025-08-18 18:03:05,017] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,017] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,018] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,019] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,019] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-26', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('12.6000'), 'low': Decimal('10.9500'), 'close': Decimal('12.6000'), 'volume': Decimal('72315924'), 'amount': Decimal('882678243.5700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,019] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-27 00:00:00
[2025-08-18 18:03:05,019] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,019] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-27 00:00:00
[2025-08-18 18:03:05,019] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,019] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,019] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,020] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,020] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-27', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.8300'), 'high': Decimal('13.8600'), 'low': Decimal('12.4000'), 'close': Decimal('13.8600'), 'volume': Decimal('55084693'), 'amount': Decimal('726890304.9700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,020] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-28 00:00:00
[2025-08-18 18:03:05,020] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,020] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-28 00:00:00
[2025-08-18 18:03:05,020] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,020] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,021] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,021] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,021] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('13.2000'), 'high': Decimal('14.9800'), 'low': Decimal('12.4700'), 'close': Decimal('13.5000'), 'volume': Decimal('96004057'), 'amount': Decimal('1274846739.5200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,022] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-29 00:00:00
[2025-08-18 18:03:05,022] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,022] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-29 00:00:00
[2025-08-18 18:03:05,022] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,022] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,023] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,023] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.2000'), 'high': Decimal('12.9800'), 'low': Decimal('12.1500'), 'close': Decimal('12.1500'), 'volume': Decimal('71833219'), 'amount': Decimal('888572238.8200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,023] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-30 00:00:00
[2025-08-18 18:03:05,023] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,023] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-30 00:00:00
[2025-08-18 18:03:05,023] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,024] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,024] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,024] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0000'), 'high': Decimal('12.5600'), 'low': Decimal('11.2500'), 'close': Decimal('11.2600'), 'volume': Decimal('59970450'), 'amount': Decimal('718052178.9900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,024] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 18:03:05,024] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,025] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 18:03:05,025] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,025] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,025] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,026] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,026] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9700'), 'high': Decimal('12.1000'), 'low': Decimal('11.3200'), 'close': Decimal('11.8500'), 'volume': Decimal('59781512'), 'amount': Decimal('704448786.5200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,026] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 18:03:05,026] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,026] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 18:03:05,026] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,027] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,027] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,027] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,027] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5400'), 'high': Decimal('13.0400'), 'low': Decimal('11.4000'), 'close': Decimal('13.0400'), 'volume': Decimal('76582685'), 'amount': Decimal('954797066.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,027] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 18:03:05,027] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,027] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 18:03:05,027] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,028] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,028] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,029] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,029] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.9700'), 'high': Decimal('13.3700'), 'low': Decimal('11.7400'), 'close': Decimal('11.7400'), 'volume': Decimal('79708868'), 'amount': Decimal('990913647.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,029] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 18:03:05,029] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,029] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 18:03:05,029] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,029] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,030] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,030] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,030] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3100'), 'high': Decimal('11.5900'), 'low': Decimal('11.0500'), 'close': Decimal('11.1000'), 'volume': Decimal('52021272'), 'amount': Decimal('584670731.8900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,030] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 18:03:05,030] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,030] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 18:03:05,030] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,030] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,031] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,031] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,032] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,032] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0300'), 'high': Decimal('11.9000'), 'low': Decimal('11.0000'), 'close': Decimal('11.7300'), 'volume': Decimal('43385516'), 'amount': Decimal('498593941.2600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,032] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 18:03:05,032] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,032] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 18:03:05,032] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,032] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,033] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,033] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,034] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,034] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0000'), 'high': Decimal('12.1800'), 'low': Decimal('11.4500'), 'close': Decimal('11.8500'), 'volume': Decimal('49110045'), 'amount': Decimal('583218737.6900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,034] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 18:03:05,034] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,034] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 18:03:05,034] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,034] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,035] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,035] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,035] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,036] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9800'), 'high': Decimal('12.4500'), 'low': Decimal('11.8000'), 'close': Decimal('12.2400'), 'volume': Decimal('49011610'), 'amount': Decimal('594009519.9700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,036] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 18:03:05,036] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,036] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 18:03:05,036] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,036] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,036] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,037] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,037] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.3400'), 'high': Decimal('13.2000'), 'low': Decimal('12.1200'), 'close': Decimal('12.9700'), 'volume': Decimal('53794722'), 'amount': Decimal('679946623.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,037] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 18:03:05,037] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,037] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 18:03:05,037] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,037] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,038] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,038] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,038] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,039] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('13.3600'), 'high': Decimal('13.8800'), 'low': Decimal('12.8000'), 'close': Decimal('12.9700'), 'volume': Decimal('53806995'), 'amount': Decimal('718624248.0800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,039] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 18:03:05,039] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,039] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 18:03:05,039] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,039] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,039] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,040] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,040] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.7000'), 'high': Decimal('13.6100'), 'low': Decimal('12.3600'), 'close': Decimal('12.8700'), 'volume': Decimal('39445490'), 'amount': Decimal('517960693.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,040] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 18:03:05,040] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,040] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 18:03:05,040] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,040] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,041] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,041] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,041] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,041] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.4500'), 'high': Decimal('12.8600'), 'low': Decimal('12.2300'), 'close': Decimal('12.3500'), 'volume': Decimal('33378865'), 'amount': Decimal('414478726.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,042] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 18:03:05,042] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,042] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 18:03:05,042] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,042] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,042] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,043] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,043] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.2500'), 'high': Decimal('12.5400'), 'low': Decimal('11.9000'), 'close': Decimal('12.1800'), 'volume': Decimal('23136160'), 'amount': Decimal('281766986.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,043] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 18:03:05,043] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,043] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 18:03:05,043] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,043] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,044] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,044] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,044] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,044] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0100'), 'high': Decimal('12.4600'), 'low': Decimal('11.5800'), 'close': Decimal('11.6200'), 'volume': Decimal('25982780'), 'amount': Decimal('311245180.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,045] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 18:03:05,045] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,045] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 18:03:05,045] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,045] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,045] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,046] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,046] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.6000'), 'high': Decimal('11.9500'), 'low': Decimal('11.4300'), 'close': Decimal('11.5100'), 'volume': Decimal('18962453'), 'amount': Decimal('220750154.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,046] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 18:03:05,046] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,046] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 18:03:05,046] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,047] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,047] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,047] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5200'), 'high': Decimal('12.0900'), 'low': Decimal('11.3800'), 'close': Decimal('11.8200'), 'volume': Decimal('23825452'), 'amount': Decimal('280686631.8800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,047] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 18:03:05,047] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,047] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 18:03:05,047] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,048] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,048] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,049] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,049] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5800'), 'high': Decimal('12.0600'), 'low': Decimal('11.4400'), 'close': Decimal('11.5300'), 'volume': Decimal('24376800'), 'amount': Decimal('284215937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,049] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 18:03:05,049] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,049] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 18:03:05,049] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,050] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,050] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,051] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,051] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('11.5300'), 'low': Decimal('11.1200'), 'close': Decimal('11.2400'), 'volume': Decimal('17654000'), 'amount': Decimal('199083908.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,051] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 18:03:05,051] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,051] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 18:03:05,051] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,051] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,052] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,052] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,052] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2300'), 'high': Decimal('11.2900'), 'low': Decimal('10.8300'), 'close': Decimal('11.1200'), 'volume': Decimal('16326051'), 'amount': Decimal('181333863.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,052] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 18:03:05,052] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,052] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 18:03:05,053] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,053] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,054] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,054] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0900'), 'high': Decimal('11.2300'), 'low': Decimal('10.8800'), 'close': Decimal('11.1500'), 'volume': Decimal('11665380'), 'amount': Decimal('129719694.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,054] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 18:03:05,054] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,054] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 18:03:05,054] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,055] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,055] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,055] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1800'), 'high': Decimal('11.5600'), 'low': Decimal('11.0700'), 'close': Decimal('11.4000'), 'volume': Decimal('20761600'), 'amount': Decimal('235697621.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,055] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 18:03:05,055] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,055] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 18:03:05,055] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,056] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,057] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,057] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4700'), 'high': Decimal('11.8000'), 'low': Decimal('11.1500'), 'close': Decimal('11.4600'), 'volume': Decimal('24552500'), 'amount': Decimal('281309276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,057] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 18:03:05,057] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,057] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 18:03:05,057] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,058] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,058] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,058] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('12.0000'), 'low': Decimal('11.2500'), 'close': Decimal('11.3000'), 'volume': Decimal('29079220'), 'amount': Decimal('336568278.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,058] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 18:03:05,058] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,058] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 18:03:05,058] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,059] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,060] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,060] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1600'), 'high': Decimal('11.5500'), 'low': Decimal('11.0900'), 'close': Decimal('11.2600'), 'volume': Decimal('16376940'), 'amount': Decimal('184800725.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,060] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 18:03:05,060] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,060] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 18:03:05,060] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,060] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,061] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,061] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.2600'), 'low': Decimal('10.7000'), 'close': Decimal('10.8600'), 'volume': Decimal('18454110'), 'amount': Decimal('200513009.9000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,061] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 18:03:05,061] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,061] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 18:03:05,061] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,062] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,062] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,063] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8300'), 'high': Decimal('11.3600'), 'low': Decimal('10.6300'), 'close': Decimal('11.1900'), 'volume': Decimal('15540620'), 'amount': Decimal('173423981.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,063] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 18:03:05,063] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,063] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 18:03:05,063] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,063] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,063] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,064] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,064] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.7000'), 'low': Decimal('11.1000'), 'close': Decimal('11.3700'), 'volume': Decimal('17187760'), 'amount': Decimal('195723936.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,064] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 18:03:05,064] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,064] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 18:03:05,064] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,064] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,065] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,065] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,066] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,066] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3000'), 'high': Decimal('11.5700'), 'low': Decimal('11.2300'), 'close': Decimal('11.4200'), 'volume': Decimal('11928520'), 'amount': Decimal('135881154.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,066] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 18:03:05,066] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,066] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 18:03:05,066] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,067] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,067] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,067] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.5500'), 'low': Decimal('11.0700'), 'close': Decimal('11.2300'), 'volume': Decimal('10643600'), 'amount': Decimal('119294545.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,068] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 18:03:05,068] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,068] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 18:03:05,068] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,068] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,068] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,069] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,069] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1500'), 'high': Decimal('11.3200'), 'low': Decimal('11.1000'), 'close': Decimal('11.3000'), 'volume': Decimal('8740380'), 'amount': Decimal('98150127.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,069] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 18:03:05,069] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,069] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 18:03:05,069] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,070] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,070] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,070] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.9300'), 'low': Decimal('11.3100'), 'close': Decimal('11.8900'), 'volume': Decimal('23118500'), 'amount': Decimal('269805301.3600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,071] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 18:03:05,071] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,071] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 18:03:05,071] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,071] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,072] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,072] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9900'), 'high': Decimal('11.1900'), 'low': Decimal('10.7000'), 'close': Decimal('10.7000'), 'volume': Decimal('27945200'), 'amount': Decimal('300147468.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,072] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 18:03:05,072] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,072] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 18:03:05,072] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,073] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,073] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,073] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3700'), 'high': Decimal('10.4300'), 'low': Decimal('9.7500'), 'close': Decimal('9.9300'), 'volume': Decimal('33570940'), 'amount': Decimal('334695551.6800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,073] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 18:03:05,074] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,074] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 18:03:05,074] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,074] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,075] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,075] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8800'), 'high': Decimal('10.1500'), 'low': Decimal('9.8500'), 'close': Decimal('9.8900'), 'volume': Decimal('17583985'), 'amount': Decimal('174553922.9500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,075] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 18:03:05,075] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,075] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 18:03:05,075] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,076] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,076] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,076] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8500'), 'high': Decimal('9.8900'), 'low': Decimal('9.6900'), 'close': Decimal('9.7500'), 'volume': Decimal('13242400'), 'amount': Decimal('129118773.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,076] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 18:03:05,076] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,077] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 18:03:05,077] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,077] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,078] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,078] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('9.9400'), 'low': Decimal('9.7100'), 'close': Decimal('9.8500'), 'volume': Decimal('12705234'), 'amount': Decimal('125082445.7000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,078] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 18:03:05,078] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,078] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 18:03:05,078] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,078] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,079] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,079] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,079] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9200'), 'high': Decimal('10.1300'), 'low': Decimal('9.8900'), 'close': Decimal('9.9400'), 'volume': Decimal('17735100'), 'amount': Decimal('177170090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,079] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 18:03:05,079] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,079] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 18:03:05,079] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,080] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,080] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,081] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,081] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9500'), 'high': Decimal('10.2000'), 'low': Decimal('9.8000'), 'close': Decimal('9.9300'), 'volume': Decimal('13795275'), 'amount': Decimal('137802304.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,081] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 18:03:05,081] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,081] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 18:03:05,081] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,081] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,082] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,083] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,083] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,084] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('9.9700'), 'low': Decimal('9.7500'), 'close': Decimal('9.8100'), 'volume': Decimal('12661765'), 'amount': Decimal('124434027.1100'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,084] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 18:03:05,084] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,084] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 18:03:05,084] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,084] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,085] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,085] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8900'), 'low': Decimal('9.7400'), 'close': Decimal('9.7700'), 'volume': Decimal('8516580'), 'amount': Decimal('83461624.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,085] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 18:03:05,085] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,085] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 18:03:05,085] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,085] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,086] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,086] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,086] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,087] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8700'), 'low': Decimal('9.6400'), 'close': Decimal('9.8500'), 'volume': Decimal('12892399'), 'amount': Decimal('125856550.5500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,087] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 18:03:05,087] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,087] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 18:03:05,087] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,087] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,088] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,088] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8700'), 'low': Decimal('9.4800'), 'close': Decimal('9.7200'), 'volume': Decimal('15174100'), 'amount': Decimal('145998673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,088] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 18:03:05,088] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,088] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 18:03:05,088] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,089] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,089] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,089] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6400'), 'high': Decimal('9.7900'), 'low': Decimal('9.6200'), 'close': Decimal('9.7100'), 'volume': Decimal('9069800'), 'amount': Decimal('88084034.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,090] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 18:03:05,090] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,090] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 18:03:05,090] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,090] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,091] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,091] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6700'), 'high': Decimal('9.6800'), 'low': Decimal('9.5700'), 'close': Decimal('9.6000'), 'volume': Decimal('6631455'), 'amount': Decimal('63720844.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,091] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 18:03:05,091] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,091] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 18:03:05,091] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,092] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,092] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,092] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.5900'), 'high': Decimal('9.7000'), 'low': Decimal('9.5300'), 'close': Decimal('9.5900'), 'volume': Decimal('6628475'), 'amount': Decimal('63641406.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,093] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 18:03:05,093] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,093] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 18:03:05,093] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,093] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,094] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,094] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('10.0500'), 'low': Decimal('9.6000'), 'close': Decimal('9.9400'), 'volume': Decimal('22449020'), 'amount': Decimal('221168482.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,094] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 18:03:05,094] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,094] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 18:03:05,094] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,095] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,095] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,095] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9300'), 'high': Decimal('10.0500'), 'low': Decimal('9.7500'), 'close': Decimal('9.8000'), 'volume': Decimal('14326900'), 'amount': Decimal('140652171.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,095] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 18:03:05,095] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,095] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 18:03:05,095] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,095] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,096] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,097] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,097] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8900'), 'low': Decimal('9.6500'), 'close': Decimal('9.8800'), 'volume': Decimal('11917700'), 'amount': Decimal('116643412.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,097] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 18:03:05,097] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,097] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 18:03:05,097] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,097] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,098] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,098] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,099] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('10.8700'), 'low': Decimal('9.7700'), 'close': Decimal('10.8700'), 'volume': Decimal('34331640'), 'amount': Decimal('358998997.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,099] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 18:03:05,099] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,099] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 18:03:05,099] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,100] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,101] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,101] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2100'), 'high': Decimal('11.6500'), 'low': Decimal('10.7600'), 'close': Decimal('11.2400'), 'volume': Decimal('51811380'), 'amount': Decimal('574331218.0600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,101] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 18:03:05,101] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,101] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 18:03:05,101] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,102] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,102] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,102] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8000'), 'high': Decimal('10.9700'), 'low': Decimal('10.4800'), 'close': Decimal('10.8900'), 'volume': Decimal('29621940'), 'amount': Decimal('319078682.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,102] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 18:03:05,102] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,102] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 18:03:05,102] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,103] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,104] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,104] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8100'), 'high': Decimal('11.1800'), 'low': Decimal('10.7500'), 'close': Decimal('10.9600'), 'volume': Decimal('27855000'), 'amount': Decimal('305544408.2400'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,104] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 18:03:05,104] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,104] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 18:03:05,104] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,105] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,105] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,105] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9000'), 'high': Decimal('10.9600'), 'low': Decimal('10.5000'), 'close': Decimal('10.6400'), 'volume': Decimal('25362800'), 'amount': Decimal('269858594.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,105] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 18:03:05,105] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,105] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 18:03:05,105] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,106] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,107] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,107] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.6400'), 'high': Decimal('10.7100'), 'low': Decimal('10.2600'), 'close': Decimal('10.2700'), 'volume': Decimal('21862900'), 'amount': Decimal('228640246.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,107] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 18:03:05,107] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,107] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 18:03:05,107] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,107] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,108] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,108] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.1200'), 'high': Decimal('10.3600'), 'low': Decimal('10.0800'), 'close': Decimal('10.3000'), 'volume': Decimal('15409920'), 'amount': Decimal('157573581.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,108] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 18:03:05,108] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:05,108] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 18:03:05,108] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,109] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:05,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:05,110] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:05,110] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3000'), 'high': Decimal('10.4100'), 'low': Decimal('10.2100'), 'close': Decimal('10.2800'), 'volume': Decimal('14335285'), 'amount': Decimal('147287583.1000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:05,110] [DEBUG] [backtesting:215] [conn:N/A] 回测完成
[2025-08-18 18:03:05,110] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 18:03:19,105] [DEBUG] [database:28] [conn:N/A] DatabaseManager initialized, instance_id: 5285671408
[2025-08-18 18:03:19,322] [DEBUG] [database:87] [conn:N/A] 连接池初始化成功, 循环ID: 4423617600
[2025-08-18 18:03:19,322] [INFO] [database:95] [conn:N/A] 开始数据库表结构初始化...
[2025-08-18 18:03:19,393] [DEBUG] [database:167] [conn:5285671168] 数据库表结构初始化完成
[2025-08-18 18:03:19,393] [DEBUG] [database:171] [conn:N/A] 当前循环活跃状态: True
[2025-08-18 18:03:19,394] [DEBUG] [database:62] [conn:N/A] initialize调用结束，总耗时: 0.29s
[2025-08-18 18:03:21,599] [DEBUG] [database:388] [conn:N/A] 检查数据是否最新
[2025-08-18 18:03:21,600] [DEBUG] [database:416] [conn:N/A] 检查StockInfo表状态(尝试1/3)
[2025-08-18 18:03:21,600] [DEBUG] [database:417] [conn:5289815488] 当前活跃连接数: 1
[2025-08-18 18:03:21,691] [WARNING] [database:443] [conn:N/A] StockInfo表为空
[2025-08-18 18:03:31,772] [DEBUG] [database:511] [conn:N/A] Truncating StockInfo table
[2025-08-18 18:03:31,850] [DEBUG] [database:515] [conn:N/A] Inserting 0 rows into StockInfo
[2025-08-18 18:03:31,887] [INFO] [database:521] [conn:N/A] 成功更新StockInfo表数据，成功插入0行，失败0行
[2025-08-18 18:03:41,544] [INFO] [database:289] [conn:N/A] Loading stock data for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:03:41,545] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 18:03:41,545] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:03:41,590] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-04-01-2025-08-18 for sh.000022

[2025-08-18 18:03:41,594] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 5, 26), datetime.date(2025, 6, 9), datetime.date(2025, 5, 6), datetime.date(2025, 4, 21), datetime.date(2025, 4, 14), datetime.date(2025, 8, 11), datetime.date(2025, 4, 28), datetime.date(2025, 8, 4), datetime.date(2025, 5, 12), datetime.date(2025, 6, 3), datetime.date(2025, 4, 1), datetime.date(2025, 7, 7), datetime.date(2025, 5, 19), datetime.date(2025, 7, 28), datetime.date(2025, 4, 7), datetime.date(2025, 6, 30), datetime.date(2025, 7, 21), datetime.date(2025, 6, 23), datetime.date(2025, 7, 14), datetime.date(2025, 6, 16)} for sh.000022
[2025-08-18 18:03:41,594] [INFO] [database:270] [conn:N/A] Found 20 missing data ranges for sh.000022
[2025-08-18 18:03:41,606] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 4, 1), datetime.date(2025, 4, 1)), (datetime.date(2025, 4, 7), datetime.date(2025, 4, 7)), (datetime.date(2025, 4, 14), datetime.date(2025, 4, 14)), (datetime.date(2025, 4, 21), datetime.date(2025, 4, 21)), (datetime.date(2025, 4, 28), datetime.date(2025, 4, 28)), (datetime.date(2025, 5, 6), datetime.date(2025, 5, 6)), (datetime.date(2025, 5, 12), datetime.date(2025, 5, 12)), (datetime.date(2025, 5, 19), datetime.date(2025, 5, 19)), (datetime.date(2025, 5, 26), datetime.date(2025, 5, 26)), (datetime.date(2025, 6, 3), datetime.date(2025, 6, 3)), (datetime.date(2025, 6, 9), datetime.date(2025, 6, 9)), (datetime.date(2025, 6, 16), datetime.date(2025, 6, 16)), (datetime.date(2025, 6, 23), datetime.date(2025, 6, 23)), (datetime.date(2025, 6, 30), datetime.date(2025, 6, 30)), (datetime.date(2025, 7, 7), datetime.date(2025, 7, 7)), (datetime.date(2025, 7, 14), datetime.date(2025, 7, 14)), (datetime.date(2025, 7, 21), datetime.date(2025, 7, 21)), (datetime.date(2025, 7, 28), datetime.date(2025, 7, 28)), (datetime.date(2025, 8, 4), datetime.date(2025, 8, 4)), (datetime.date(2025, 8, 11), datetime.date(2025, 8, 11))]
[2025-08-18 18:03:41,607] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.000022
[2025-08-18 18:03:41,607] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-01 to 2025-04-01
[2025-08-18 18:03:42,125] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-07 to 2025-04-07
[2025-08-18 18:03:42,478] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-14 to 2025-04-14
[2025-08-18 18:03:43,067] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-21 to 2025-04-21
[2025-08-18 18:03:43,810] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-28 to 2025-04-28
[2025-08-18 18:03:45,042] [INFO] [database:306] [conn:N/A] Fetching data from 2025-05-06 to 2025-05-06
[2025-08-18 18:03:46,005] [INFO] [database:306] [conn:N/A] Fetching data from 2025-05-12 to 2025-05-12
[2025-08-18 18:03:47,224] [INFO] [database:306] [conn:N/A] Fetching data from 2025-05-19 to 2025-05-19
[2025-08-18 18:03:47,452] [INFO] [database:306] [conn:N/A] Fetching data from 2025-05-26 to 2025-05-26
[2025-08-18 18:03:47,699] [INFO] [database:306] [conn:N/A] Fetching data from 2025-06-03 to 2025-06-03
[2025-08-18 18:03:47,946] [INFO] [database:306] [conn:N/A] Fetching data from 2025-06-09 to 2025-06-09
[2025-08-18 18:03:49,150] [INFO] [database:306] [conn:N/A] Fetching data from 2025-06-16 to 2025-06-16
[2025-08-18 18:03:49,670] [INFO] [database:306] [conn:N/A] Fetching data from 2025-06-23 to 2025-06-23
[2025-08-18 18:03:50,015] [INFO] [database:306] [conn:N/A] Fetching data from 2025-06-30 to 2025-06-30
[2025-08-18 18:03:50,521] [INFO] [database:306] [conn:N/A] Fetching data from 2025-07-07 to 2025-07-07
[2025-08-18 18:03:50,758] [INFO] [database:306] [conn:N/A] Fetching data from 2025-07-14 to 2025-07-14
[2025-08-18 18:03:51,001] [INFO] [database:306] [conn:N/A] Fetching data from 2025-07-21 to 2025-07-21
[2025-08-18 18:03:52,713] [INFO] [database:306] [conn:N/A] Fetching data from 2025-07-28 to 2025-07-28
[2025-08-18 18:03:53,668] [INFO] [database:306] [conn:N/A] Fetching data from 2025-08-04 to 2025-08-04
[2025-08-18 18:03:54,169] [INFO] [database:306] [conn:N/A] Fetching data from 2025-08-11 to 2025-08-11
[2025-08-18 18:03:54,440] [INFO] [database:346] [conn:N/A] Successfully loaded 94 rows for sh.000022
[2025-08-18 18:03:54,454] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:54,470] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:54,470] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:54,470] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:54,470] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:03:54,472] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:03:54,472] [DEBUG] [backtesting:304] [conn:N/A] 注册策略调度处理器: 36bf8daa-df85-4b88-b9bc-c4fdf8f2fdf8
[2025-08-18 18:03:54,472] [INFO] [backtesting:307] [conn:N/A] 策略注册成功 | ID: 36bf8daa-df85-4b88-b9bc-c4fdf8f2fdf8 | 名称: 自定义规则策略
[2025-08-18 18:03:54,472] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 18:03:54,472] [DEBUG] [backtesting:160] [conn:N/A] 识别数据频率为：日线
[2025-08-18 18:03:54,474] [DEBUG] [backtesting:186] [conn:N/A] 开始回测...
[2025-08-18 18:03:54,474] [INFO] [backtesting:354] [conn:N/A] 回测系统初始化开始
[2025-08-18 18:03:54,474] [INFO] [backtesting:366] [conn:N/A] 策略初始化完成: 36bf8daa-df85-4b88-b9bc-c4fdf8f2fdf8
[2025-08-18 18:03:54,475] [INFO] [backtesting:384] [conn:N/A] 回测系统初始化完成
[2025-08-18 18:03:54,475] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-02 00:00:00
[2025-08-18 18:03:54,475] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,475] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-02 00:00:00
[2025-08-18 18:03:54,475] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,475] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,475] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,475] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,476] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,476] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,476] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,476] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,476] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,477] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,477] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,478] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,478] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,478] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,479] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,479] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,479] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-02', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.5450'), 'high': Decimal('248.5495'), 'low': Decimal('248.5441'), 'close': Decimal('248.5488'), 'volume': Decimal('96880600'), 'amount': Decimal('974942690.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:03:54,479] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-03 00:00:00
[2025-08-18 18:03:54,479] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,480] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-03 00:00:00
[2025-08-18 18:03:54,480] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,480] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,481] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,481] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,482] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,482] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,482] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.5685'), 'high': Decimal('248.5699'), 'low': Decimal('248.5679'), 'close': Decimal('248.5683'), 'volume': Decimal('53022600'), 'amount': Decimal('529932927.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,483] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-07 00:00:00
[2025-08-18 18:03:54,483] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,483] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-07 00:00:00
[2025-08-18 18:03:54,483] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,483] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,484] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,485] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,485] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,485] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,485] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,486] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,487] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,487] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.6471'), 'high': Decimal('248.6530'), 'low': Decimal('248.6454'), 'close': Decimal('248.6528'), 'volume': Decimal('1.0213E+8'), 'amount': Decimal('1031243508.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,487] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-08 00:00:00
[2025-08-18 18:03:54,487] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,487] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-08 00:00:00
[2025-08-18 18:03:54,487] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,487] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,488] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,488] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,489] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,490] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,490] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,490] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.6725'), 'high': Decimal('248.6900'), 'low': Decimal('248.6725'), 'close': Decimal('248.6896'), 'volume': Decimal('66454000'), 'amount': Decimal('674400820.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,490] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-09 00:00:00
[2025-08-18 18:03:54,490] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,490] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-09 00:00:00
[2025-08-18 18:03:54,490] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,490] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,490] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,492] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,492] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,493] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,493] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,494] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7093'), 'high': Decimal('248.7184'), 'low': Decimal('248.7093'), 'close': Decimal('248.7183'), 'volume': Decimal('41411300'), 'amount': Decimal('416015790.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,494] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-10 00:00:00
[2025-08-18 18:03:54,494] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,494] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-10 00:00:00
[2025-08-18 18:03:54,494] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,494] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,495] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,495] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,496] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7380'), 'high': Decimal('248.7429'), 'low': Decimal('248.7377'), 'close': Decimal('248.7429'), 'volume': Decimal('83312000'), 'amount': Decimal('836976090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,496] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-11 00:00:00
[2025-08-18 18:03:54,496] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,496] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-11 00:00:00
[2025-08-18 18:03:54,496] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,496] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,497] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,498] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,498] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7637'), 'high': Decimal('248.7665'), 'low': Decimal('248.7637'), 'close': Decimal('248.7665'), 'volume': Decimal('7.80E+6'), 'amount': Decimal('77909523.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,498] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-14 00:00:00
[2025-08-18 18:03:54,498] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,498] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-14 00:00:00
[2025-08-18 18:03:54,498] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,498] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,499] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,499] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,500] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,502] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,502] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,503] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,504] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,505] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,505] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8254'), 'high': Decimal('248.8312'), 'low': Decimal('248.8254'), 'close': Decimal('248.8311'), 'volume': Decimal('4.028E+7'), 'amount': Decimal('401537703.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,505] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-15 00:00:00
[2025-08-18 18:03:54,505] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,505] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-15 00:00:00
[2025-08-18 18:03:54,505] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,505] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,506] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,506] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,507] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,507] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8508'), 'high': Decimal('248.8530'), 'low': Decimal('248.8505'), 'close': Decimal('248.8530'), 'volume': Decimal('50854200'), 'amount': Decimal('511257068.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,507] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-16 00:00:00
[2025-08-18 18:03:54,507] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,507] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-16 00:00:00
[2025-08-18 18:03:54,507] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,507] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,508] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,509] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,509] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8727'), 'high': Decimal('248.8767'), 'low': Decimal('248.8727'), 'close': Decimal('248.8766'), 'volume': Decimal('53168800'), 'amount': Decimal('536504671.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,509] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-17 00:00:00
[2025-08-18 18:03:54,509] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,509] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-17 00:00:00
[2025-08-18 18:03:54,509] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,509] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,510] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,511] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,511] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8962'), 'high': Decimal('248.9030'), 'low': Decimal('248.8961'), 'close': Decimal('248.9029'), 'volume': Decimal('6.339E+7'), 'amount': Decimal('643950692.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,511] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-18 00:00:00
[2025-08-18 18:03:54,511] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,511] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-18 00:00:00
[2025-08-18 18:03:54,511] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,511] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,512] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,512] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,512] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.9226'), 'high': Decimal('248.9232'), 'low': Decimal('248.9226'), 'close': Decimal('248.9232'), 'volume': Decimal('8185000'), 'amount': Decimal('81680106.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,512] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-21 00:00:00
[2025-08-18 18:03:54,512] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,512] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-21 00:00:00
[2025-08-18 18:03:54,513] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,513] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,513] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,514] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,514] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.9819'), 'high': Decimal('248.9883'), 'low': Decimal('248.9813'), 'close': Decimal('248.9874'), 'volume': Decimal('9.421E+7'), 'amount': Decimal('946343409.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,514] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-22 00:00:00
[2025-08-18 18:03:54,514] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,514] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-22 00:00:00
[2025-08-18 18:03:54,514] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,514] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,515] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,515] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,516] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,516] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0071'), 'high': Decimal('249.0102'), 'low': Decimal('249.0067'), 'close': Decimal('249.0101'), 'volume': Decimal('5.528E+7'), 'amount': Decimal('557067303.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,517] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-23 00:00:00
[2025-08-18 18:03:54,517] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,517] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-23 00:00:00
[2025-08-18 18:03:54,517] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,517] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,517] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,518] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,518] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,518] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0297'), 'high': Decimal('249.0380'), 'low': Decimal('249.0296'), 'close': Decimal('249.0361'), 'volume': Decimal('116415100'), 'amount': Decimal('1171744149.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,518] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-24 00:00:00
[2025-08-18 18:03:54,518] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,519] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-24 00:00:00
[2025-08-18 18:03:54,519] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,519] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,520] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,520] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0556'), 'high': Decimal('249.0572'), 'low': Decimal('249.0526'), 'close': Decimal('249.0529'), 'volume': Decimal('96381000'), 'amount': Decimal('964558776.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,520] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-25 00:00:00
[2025-08-18 18:03:54,520] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,520] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-25 00:00:00
[2025-08-18 18:03:54,520] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,521] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,521] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,522] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,522] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0724'), 'high': Decimal('249.0726'), 'low': Decimal('249.0689'), 'close': Decimal('249.0689'), 'volume': Decimal('12766400'), 'amount': Decimal('128796292.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,522] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-28 00:00:00
[2025-08-18 18:03:54,522] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,522] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-28 00:00:00
[2025-08-18 18:03:54,522] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,523] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,523] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,523] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1282'), 'high': Decimal('249.1326'), 'low': Decimal('249.1237'), 'close': Decimal('249.1314'), 'volume': Decimal('137607400'), 'amount': Decimal('1385601091.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,523] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-29 00:00:00
[2025-08-18 18:03:54,523] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,523] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-29 00:00:00
[2025-08-18 18:03:54,523] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,523] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,524] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,525] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,525] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1532'), 'high': Decimal('249.1607'), 'low': Decimal('249.1497'), 'close': Decimal('249.1497'), 'volume': Decimal('206646900'), 'amount': Decimal('2080664673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,525] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-30 00:00:00
[2025-08-18 18:03:54,525] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,525] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-30 00:00:00
[2025-08-18 18:03:54,525] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,525] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,526] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,526] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,527] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,527] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-04-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1691'), 'high': Decimal('249.1701'), 'low': Decimal('249.1677'), 'close': Decimal('249.1684'), 'volume': Decimal('4738900'), 'amount': Decimal('46843437.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,527] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-06 00:00:00
[2025-08-18 18:03:54,527] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,527] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-06 00:00:00
[2025-08-18 18:03:54,527] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,527] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,528] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,529] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,529] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.2848'), 'high': Decimal('249.2848'), 'low': Decimal('249.2731'), 'close': Decimal('249.2734'), 'volume': Decimal('3.293E+7'), 'amount': Decimal('328052857.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,529] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-07 00:00:00
[2025-08-18 18:03:54,529] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,529] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-07 00:00:00
[2025-08-18 18:03:54,529] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,530] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,530] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,531] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,531] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,531] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,531] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,531] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,531] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.2927'), 'high': Decimal('249.3023'), 'low': Decimal('249.2924'), 'close': Decimal('249.3023'), 'volume': Decimal('8.199E+7'), 'amount': Decimal('820821650.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,531] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-08 00:00:00
[2025-08-18 18:03:54,531] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,531] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-08 00:00:00
[2025-08-18 18:03:54,531] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,532] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,532] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,532] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,532] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,533] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,533] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,533] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,534] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,534] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,535] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,535] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,536] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3216'), 'high': Decimal('249.3237'), 'low': Decimal('249.3216'), 'close': Decimal('249.3220'), 'volume': Decimal('8.142E+7'), 'amount': Decimal('816843823.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,536] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-09 00:00:00
[2025-08-18 18:03:54,536] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,536] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-09 00:00:00
[2025-08-18 18:03:54,536] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,536] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,537] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,537] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,537] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3414'), 'high': Decimal('249.3414'), 'low': Decimal('249.3397'), 'close': Decimal('249.3397'), 'volume': Decimal('5.036E+7'), 'amount': Decimal('507127571.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,537] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-12 00:00:00
[2025-08-18 18:03:54,537] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,537] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-12 00:00:00
[2025-08-18 18:03:54,537] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,538] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,539] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,539] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3979'), 'high': Decimal('249.4029'), 'low': Decimal('249.3967'), 'close': Decimal('249.4029'), 'volume': Decimal('122544200'), 'amount': Decimal('1233849746.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,539] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-13 00:00:00
[2025-08-18 18:03:54,539] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,539] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-13 00:00:00
[2025-08-18 18:03:54,539] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,540] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,540] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,540] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,541] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4249'), 'high': Decimal('249.4321'), 'low': Decimal('249.4242'), 'close': Decimal('249.4320'), 'volume': Decimal('7.863E+7'), 'amount': Decimal('788207240.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,541] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-14 00:00:00
[2025-08-18 18:03:54,541] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,541] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-14 00:00:00
[2025-08-18 18:03:54,541] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,541] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,545] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,547] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,552] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,552] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,552] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,553] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4514'), 'high': Decimal('249.4555'), 'low': Decimal('249.4513'), 'close': Decimal('249.4552'), 'volume': Decimal('156874000'), 'amount': Decimal('1567541466.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,553] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-15 00:00:00
[2025-08-18 18:03:54,553] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,553] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-15 00:00:00
[2025-08-18 18:03:54,553] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,553] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,554] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,554] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,556] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,557] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,557] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,557] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,557] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,557] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4745'), 'high': Decimal('249.4749'), 'low': Decimal('249.4697'), 'close': Decimal('249.4745'), 'volume': Decimal('1.2200E+8'), 'amount': Decimal('1219434276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,557] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-16 00:00:00
[2025-08-18 18:03:54,558] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,558] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-16 00:00:00
[2025-08-18 18:03:54,558] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,558] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,558] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,559] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,559] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4939'), 'high': Decimal('249.4947'), 'low': Decimal('249.4935'), 'close': Decimal('249.4946'), 'volume': Decimal('19759000'), 'amount': Decimal('196395380.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,559] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-19 00:00:00
[2025-08-18 18:03:54,559] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,559] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-19 00:00:00
[2025-08-18 18:03:54,559] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,559] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,560] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,560] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,561] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,561] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-19', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5537'), 'high': Decimal('249.5570'), 'low': Decimal('249.5493'), 'close': Decimal('249.5570'), 'volume': Decimal('116027200'), 'amount': Decimal('1165047486.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,561] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-20 00:00:00
[2025-08-18 18:03:54,561] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,561] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-20 00:00:00
[2025-08-18 18:03:54,561] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,561] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,562] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,562] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,562] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,562] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-20', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5775'), 'high': Decimal('249.5780'), 'low': Decimal('249.5517'), 'close': Decimal('249.5587'), 'volume': Decimal('1.6864E+8'), 'amount': Decimal('1699835623.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,563] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-21 00:00:00
[2025-08-18 18:03:54,563] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,563] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-21 00:00:00
[2025-08-18 18:03:54,563] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,563] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,563] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,564] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,564] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5779'), 'high': Decimal('249.5851'), 'low': Decimal('249.5744'), 'close': Decimal('249.5850'), 'volume': Decimal('159036000'), 'amount': Decimal('1607915005.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,564] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-22 00:00:00
[2025-08-18 18:03:54,564] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,564] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-22 00:00:00
[2025-08-18 18:03:54,564] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,564] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,565] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,565] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,566] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,566] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,566] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6042'), 'high': Decimal('249.6085'), 'low': Decimal('249.6042'), 'close': Decimal('249.6085'), 'volume': Decimal('1.2915E+8'), 'amount': Decimal('1294436933.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,566] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-23 00:00:00
[2025-08-18 18:03:54,566] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,566] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-23 00:00:00
[2025-08-18 18:03:54,566] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,567] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,567] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,568] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,568] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6278'), 'high': Decimal('249.6288'), 'low': Decimal('249.6271'), 'close': Decimal('249.6277'), 'volume': Decimal('2.677E+7'), 'amount': Decimal('268475231.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,568] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-26 00:00:00
[2025-08-18 18:03:54,568] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,568] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-26 00:00:00
[2025-08-18 18:03:54,568] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,568] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,569] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,569] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,569] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,569] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-26', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6909'), 'high': Decimal('249.7093'), 'low': Decimal('249.6909'), 'close': Decimal('249.7092'), 'volume': Decimal('315892000'), 'amount': Decimal('3170299428.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,569] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-27 00:00:00
[2025-08-18 18:03:54,569] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,570] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-27 00:00:00
[2025-08-18 18:03:54,570] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,570] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,570] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,571] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,571] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-27', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7298'), 'high': Decimal('249.7441'), 'low': Decimal('249.7276'), 'close': Decimal('249.7440'), 'volume': Decimal('2.2565E+8'), 'amount': Decimal('2264220477.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,571] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-28 00:00:00
[2025-08-18 18:03:54,571] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,571] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-28 00:00:00
[2025-08-18 18:03:54,571] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,571] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,572] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,572] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,572] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,572] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7633'), 'high': Decimal('249.7746'), 'low': Decimal('249.7630'), 'close': Decimal('249.7745'), 'volume': Decimal('47424200'), 'amount': Decimal('474490225.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,572] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-29 00:00:00
[2025-08-18 18:03:54,572] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,572] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-29 00:00:00
[2025-08-18 18:03:54,572] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,573] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,573] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,574] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,574] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7938'), 'high': Decimal('249.7954'), 'low': Decimal('249.7919'), 'close': Decimal('249.7953'), 'volume': Decimal('49935600'), 'amount': Decimal('497335635.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,574] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-05-30 00:00:00
[2025-08-18 18:03:54,574] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,574] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-30 00:00:00
[2025-08-18 18:03:54,574] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,574] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,575] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,575] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,575] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,575] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-05-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.8145'), 'high': Decimal('249.8160'), 'low': Decimal('249.8141'), 'close': Decimal('249.8158'), 'volume': Decimal('7.68E+6'), 'amount': Decimal('76138553.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,575] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 18:03:54,575] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,575] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 18:03:54,575] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,576] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,576] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,577] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,577] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.8946'), 'high': Decimal('249.8990'), 'low': Decimal('249.8940'), 'close': Decimal('249.8988'), 'volume': Decimal('46055000'), 'amount': Decimal('462740209.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,577] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 18:03:54,577] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,577] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 18:03:54,577] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,577] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,578] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,578] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,578] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,578] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9179'), 'high': Decimal('249.9244'), 'low': Decimal('249.9174'), 'close': Decimal('249.9244'), 'volume': Decimal('2.219E+7'), 'amount': Decimal('222687917.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,578] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 18:03:54,578] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,578] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 18:03:54,578] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,579] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,579] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,580] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,580] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9436'), 'high': Decimal('249.9491'), 'low': Decimal('249.9436'), 'close': Decimal('249.9491'), 'volume': Decimal('95925000'), 'amount': Decimal('959753281.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,580] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 18:03:54,580] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,580] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 18:03:54,580] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,580] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,581] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,581] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,581] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,581] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9683'), 'high': Decimal('249.9725'), 'low': Decimal('249.9681'), 'close': Decimal('249.9722'), 'volume': Decimal('43013000'), 'amount': Decimal('433856317.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,581] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 18:03:54,581] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,581] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 18:03:54,581] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,582] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,583] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,583] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,583] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0326'), 'high': Decimal('250.0508'), 'low': Decimal('250.0326'), 'close': Decimal('250.0504'), 'volume': Decimal('95035000'), 'amount': Decimal('956973695.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,583] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 18:03:54,583] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,583] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 18:03:54,583] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,583] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,584] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,584] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,585] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,585] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0697'), 'high': Decimal('250.0767'), 'low': Decimal('250.0692'), 'close': Decimal('250.0767'), 'volume': Decimal('108899600'), 'amount': Decimal('1089390586.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,585] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 18:03:54,585] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,585] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 18:03:54,585] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,585] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,585] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,586] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,586] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0958'), 'high': Decimal('250.1046'), 'low': Decimal('250.0958'), 'close': Decimal('250.1020'), 'volume': Decimal('8.207E+7'), 'amount': Decimal('825521213.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,586] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 18:03:54,586] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,586] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 18:03:54,586] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,586] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,587] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,587] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,587] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,587] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1212'), 'high': Decimal('250.1311'), 'low': Decimal('250.1212'), 'close': Decimal('250.1221'), 'volume': Decimal('117790700'), 'amount': Decimal('1179404001.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,587] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 18:03:54,587] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,588] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 18:03:54,588] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,588] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,588] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,589] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,589] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1412'), 'high': Decimal('250.1434'), 'low': Decimal('250.1412'), 'close': Decimal('250.1422'), 'volume': Decimal('1.895E+7'), 'amount': Decimal('188956789.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,589] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 18:03:54,589] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,589] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 18:03:54,589] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,589] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,590] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,590] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,590] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1995'), 'high': Decimal('250.2206'), 'low': Decimal('250.1995'), 'close': Decimal('250.2206'), 'volume': Decimal('1.0754E+8'), 'amount': Decimal('1080372154.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,590] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 18:03:54,590] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,590] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 18:03:54,590] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,590] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,591] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,591] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,592] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,592] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.2403'), 'high': Decimal('250.2497'), 'low': Decimal('250.2403'), 'close': Decimal('250.2493'), 'volume': Decimal('6.730E+7'), 'amount': Decimal('678251568.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,592] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 18:03:54,592] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,592] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 18:03:54,592] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,592] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,592] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,593] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,593] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.2683'), 'high': Decimal('250.2925'), 'low': Decimal('250.2683'), 'close': Decimal('250.2924'), 'volume': Decimal('1.4737E+8'), 'amount': Decimal('1481932503.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,593] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 18:03:54,593] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,593] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 18:03:54,593] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,593] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,594] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,594] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,594] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,594] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.3116'), 'high': Decimal('250.3455'), 'low': Decimal('250.3116'), 'close': Decimal('250.3454'), 'volume': Decimal('122368000'), 'amount': Decimal('1230712926.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,595] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 18:03:54,595] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,595] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 18:03:54,595] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,595] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,595] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,596] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,596] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.3646'), 'high': Decimal('250.3724'), 'low': Decimal('250.3646'), 'close': Decimal('250.3724'), 'volume': Decimal('7.857E+7'), 'amount': Decimal('792389586.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,596] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 18:03:54,596] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,596] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 18:03:54,596] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,596] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,597] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,597] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,597] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,597] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.4317'), 'high': Decimal('250.4477'), 'low': Decimal('250.4317'), 'close': Decimal('250.4474'), 'volume': Decimal('2.1581E+8'), 'amount': Decimal('2179654615.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,597] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 18:03:54,597] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,598] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 18:03:54,598] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,598] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,598] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,599] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,599] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.4665'), 'high': Decimal('250.4906'), 'low': Decimal('250.4665'), 'close': Decimal('250.4887'), 'volume': Decimal('2.1355E+8'), 'amount': Decimal('2158997186.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,599] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 18:03:54,599] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,599] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 18:03:54,599] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,599] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,600] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,600] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,600] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,600] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5078'), 'high': Decimal('250.5239'), 'low': Decimal('250.5078'), 'close': Decimal('250.5239'), 'volume': Decimal('1.2909E+8'), 'amount': Decimal('1321640299.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,600] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 18:03:54,600] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,601] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 18:03:54,601] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,601] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,601] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,602] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,602] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5430'), 'high': Decimal('250.5527'), 'low': Decimal('250.5428'), 'close': Decimal('250.5527'), 'volume': Decimal('1.7117E+8'), 'amount': Decimal('1727060715.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,602] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 18:03:54,602] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,602] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 18:03:54,602] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,602] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,603] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,603] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,603] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5717'), 'high': Decimal('250.5889'), 'low': Decimal('250.5717'), 'close': Decimal('250.5878'), 'volume': Decimal('4.998E+7'), 'amount': Decimal('504387828.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,603] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 18:03:54,603] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,603] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 18:03:54,603] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,603] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,604] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,604] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,605] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,605] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.6466'), 'high': Decimal('250.6709'), 'low': Decimal('250.6461'), 'close': Decimal('250.6707'), 'volume': Decimal('18475000'), 'amount': Decimal('185745182.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,605] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 18:03:54,605] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,605] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 18:03:54,605] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,605] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,605] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,606] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,606] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.6896'), 'high': Decimal('250.6994'), 'low': Decimal('250.6896'), 'close': Decimal('250.6982'), 'volume': Decimal('34589000'), 'amount': Decimal('347106277.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,606] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 18:03:54,606] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,606] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 18:03:54,606] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,606] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,607] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,607] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,607] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,607] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7171'), 'high': Decimal('250.7200'), 'low': Decimal('250.7112'), 'close': Decimal('250.7200'), 'volume': Decimal('9.926E+7'), 'amount': Decimal('996662518.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,608] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 18:03:54,608] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,608] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 18:03:54,608] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,608] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,608] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,609] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,609] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7389'), 'high': Decimal('250.7496'), 'low': Decimal('250.7383'), 'close': Decimal('250.7490'), 'volume': Decimal('148906000'), 'amount': Decimal('1492783625.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,609] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 18:03:54,609] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,609] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 18:03:54,609] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,609] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,610] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,610] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,610] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7679'), 'high': Decimal('250.7802'), 'low': Decimal('250.7679'), 'close': Decimal('250.7800'), 'volume': Decimal('105937100'), 'amount': Decimal('1063192233.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,610] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 18:03:54,610] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,610] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 18:03:54,610] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,610] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,611] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,611] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,612] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,612] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.8427'), 'high': Decimal('250.8706'), 'low': Decimal('250.8420'), 'close': Decimal('250.8706'), 'volume': Decimal('2.8872E+8'), 'amount': Decimal('2898694381.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,612] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 18:03:54,612] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,612] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 18:03:54,612] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,612] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,612] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,626] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,626] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,626] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,627] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,627] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,628] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.8896'), 'high': Decimal('250.9465'), 'low': Decimal('250.8896'), 'close': Decimal('250.9464'), 'volume': Decimal('45913500'), 'amount': Decimal('461597021.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,631] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 18:03:54,631] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,631] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 18:03:54,631] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,632] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,633] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,633] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,634] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,634] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,634] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,638] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,638] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.9653'), 'high': Decimal('250.9808'), 'low': Decimal('250.9653'), 'close': Decimal('250.9807'), 'volume': Decimal('26341400'), 'amount': Decimal('265117552.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,647] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 18:03:54,647] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,647] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 18:03:54,647] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,647] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,648] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,648] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,649] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,649] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.9996'), 'high': Decimal('251.0234'), 'low': Decimal('250.9996'), 'close': Decimal('251.0230'), 'volume': Decimal('1.1314E+8'), 'amount': Decimal('1142073365.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,649] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 18:03:54,649] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,649] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 18:03:54,649] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,650] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,650] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,650] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.0419'), 'high': Decimal('251.0541'), 'low': Decimal('251.0390'), 'close': Decimal('251.0540'), 'volume': Decimal('2.752E+7'), 'amount': Decimal('281001609.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,650] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 18:03:54,650] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,650] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 18:03:54,651] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,651] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,652] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,652] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1108'), 'high': Decimal('251.1208'), 'low': Decimal('251.1108'), 'close': Decimal('251.1208'), 'volume': Decimal('65507500'), 'amount': Decimal('665251411.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,652] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 18:03:54,652] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,652] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 18:03:54,652] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,652] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,653] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,653] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,654] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,654] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,658] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1396'), 'high': Decimal('251.1449'), 'low': Decimal('251.1385'), 'close': Decimal('251.1449'), 'volume': Decimal('50112300'), 'amount': Decimal('502588797.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,658] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 18:03:54,658] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,658] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 18:03:54,658] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,658] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,660] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,660] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,660] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,660] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,660] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,661] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,661] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,662] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1639'), 'high': Decimal('251.1810'), 'low': Decimal('251.1639'), 'close': Decimal('251.1808'), 'volume': Decimal('93941800'), 'amount': Decimal('948066184.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,662] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 18:03:54,662] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,662] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 18:03:54,662] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,662] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,663] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,663] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2005'), 'high': Decimal('251.2096'), 'low': Decimal('251.2005'), 'close': Decimal('251.2095'), 'volume': Decimal('162611500'), 'amount': Decimal('1636201596.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,663] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 18:03:54,663] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,663] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 18:03:54,663] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,664] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,664] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,664] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2283'), 'high': Decimal('251.2355'), 'low': Decimal('251.2283'), 'close': Decimal('251.2355'), 'volume': Decimal('75964300'), 'amount': Decimal('762983810.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,665] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 18:03:54,665] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,665] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 18:03:54,665] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,665] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,666] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,666] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,666] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2919'), 'high': Decimal('251.3088'), 'low': Decimal('251.2919'), 'close': Decimal('251.3088'), 'volume': Decimal('203458100'), 'amount': Decimal('2048993831.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,667] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 18:03:54,667] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,667] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 18:03:54,667] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,667] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,668] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,668] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3299'), 'high': Decimal('251.3349'), 'low': Decimal('251.3299'), 'close': Decimal('251.3348'), 'volume': Decimal('54674600'), 'amount': Decimal('549802386.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,668] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 18:03:54,668] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,668] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 18:03:54,668] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,669] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,669] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,669] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3536'), 'high': Decimal('251.3641'), 'low': Decimal('251.3536'), 'close': Decimal('251.3637'), 'volume': Decimal('5.244E+7'), 'amount': Decimal('528485128.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,669] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 18:03:54,669] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,669] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 18:03:54,669] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,670] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,671] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,671] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3826'), 'high': Decimal('251.3867'), 'low': Decimal('251.3822'), 'close': Decimal('251.3851'), 'volume': Decimal('119349600'), 'amount': Decimal('1196950502.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,671] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 18:03:54,671] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,671] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 18:03:54,671] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,672] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,672] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,672] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4038'), 'high': Decimal('251.4038'), 'low': Decimal('251.3995'), 'close': Decimal('251.4001'), 'volume': Decimal('13522700'), 'amount': Decimal('136298163.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,672] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 18:03:54,672] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,672] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 18:03:54,672] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,672] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,673] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,674] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,674] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4564'), 'high': Decimal('251.4686'), 'low': Decimal('251.4549'), 'close': Decimal('251.4679'), 'volume': Decimal('109953200'), 'amount': Decimal('1102470458.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,674] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 18:03:54,674] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,674] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 18:03:54,674] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,674] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,674] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,675] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,675] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4869'), 'high': Decimal('251.4869'), 'low': Decimal('251.4797'), 'close': Decimal('251.4810'), 'volume': Decimal('33824800'), 'amount': Decimal('341257649.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,675] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 18:03:54,675] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,675] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 18:03:54,675] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,676] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,676] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,677] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,677] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4998'), 'high': Decimal('251.5063'), 'low': Decimal('251.4959'), 'close': Decimal('251.5044'), 'volume': Decimal('30428600'), 'amount': Decimal('307237345.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,677] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 18:03:54,677] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,677] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 18:03:54,677] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,677] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,677] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,678] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,678] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5232'), 'high': Decimal('251.5240'), 'low': Decimal('251.5105'), 'close': Decimal('251.5111'), 'volume': Decimal('91647000'), 'amount': Decimal('917650865.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,678] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 18:03:54,678] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,678] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 18:03:54,678] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,679] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,680] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,680] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5298'), 'high': Decimal('251.5306'), 'low': Decimal('251.5221'), 'close': Decimal('251.5233'), 'volume': Decimal('24873300'), 'amount': Decimal('248624740.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,680] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 18:03:54,680] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,680] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 18:03:54,680] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,680] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,680] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,681] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,681] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,681] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5793'), 'high': Decimal('251.5819'), 'low': Decimal('251.5793'), 'close': Decimal('251.5803'), 'volume': Decimal('188121500'), 'amount': Decimal('1887359325.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,681] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 18:03:54,681] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,681] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 18:03:54,681] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,682] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,682] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,683] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,683] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5998'), 'high': Decimal('251.6000'), 'low': Decimal('251.5954'), 'close': Decimal('251.5973'), 'volume': Decimal('83600100'), 'amount': Decimal('833584696.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,683] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 18:03:54,683] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,683] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 18:03:54,683] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,684] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,684] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,684] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6160'), 'high': Decimal('251.6218'), 'low': Decimal('251.6141'), 'close': Decimal('251.6191'), 'volume': Decimal('107385600'), 'amount': Decimal('1078121754.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,684] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 18:03:54,684] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,684] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 18:03:54,684] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,685] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,685] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,686] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,686] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6398'), 'high': Decimal('251.6398'), 'low': Decimal('251.6354'), 'close': Decimal('251.6371'), 'volume': Decimal('113268100'), 'amount': Decimal('1135733937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,686] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 18:03:54,686] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,686] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 18:03:54,686] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,686] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,686] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,687] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,687] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6558'), 'high': Decimal('251.6558'), 'low': Decimal('251.6521'), 'close': Decimal('251.6521'), 'volume': Decimal('15502500'), 'amount': Decimal('155100399.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,687] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 18:03:54,687] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,687] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 18:03:54,687] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,687] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,688] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,688] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,688] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7109'), 'high': Decimal('251.7173'), 'low': Decimal('251.7068'), 'close': Decimal('251.7170'), 'volume': Decimal('174144700'), 'amount': Decimal('1752238061.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,689] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 18:03:54,689] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,689] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 18:03:54,689] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,689] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,689] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,690] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,690] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7356'), 'high': Decimal('251.7365'), 'low': Decimal('251.7355'), 'close': Decimal('251.7357'), 'volume': Decimal('20334100'), 'amount': Decimal('203059448.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,690] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 18:03:54,690] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,690] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 18:03:54,690] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,691] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,691] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,691] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7544'), 'high': Decimal('251.7555'), 'low': Decimal('251.7544'), 'close': Decimal('251.7555'), 'volume': Decimal('11758300'), 'amount': Decimal('117731722.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,691] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 18:03:54,691] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,691] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 18:03:54,691] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,692] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,693] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,693] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7741'), 'high': Decimal('251.7804'), 'low': Decimal('251.7732'), 'close': Decimal('251.7803'), 'volume': Decimal('1.533E+7'), 'amount': Decimal('154074033.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,693] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 18:03:54,693] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,693] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 18:03:54,693] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,694] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,694] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,694] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7989'), 'high': Decimal('251.8002'), 'low': Decimal('251.7987'), 'close': Decimal('251.8002'), 'volume': Decimal('18280300'), 'amount': Decimal('184316558.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,694] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 18:03:54,694] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:03:54,694] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 18:03:54,694] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,695] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:03:54,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:03:54,695] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:03:54,696] [DEBUG] [backtesting:213] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.8559'), 'high': Decimal('251.8596'), 'low': Decimal('251.8559'), 'close': Decimal('251.8587'), 'volume': Decimal('4.568E+7'), 'amount': Decimal('456762932.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': None, 'REF(SMA(close, 5),1)': None, 'SMA(close, 20)': None, 'REF(SMA(close, 20),1)': None}
[2025-08-18 18:03:54,696] [DEBUG] [backtesting:215] [conn:N/A] 回测完成
[2025-08-18 18:03:54,696] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 18:07:06,864] [INFO] [database:289] [conn:N/A] Loading stock data for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:07:06,865] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 18:07:06,865] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:07:06,923] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-04-01-2025-08-18 for sh.000022

[2025-08-18 18:07:06,930] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 4, 1)} for sh.000022
[2025-08-18 18:07:06,930] [INFO] [database:270] [conn:N/A] Found 1 missing data ranges for sh.000022
[2025-08-18 18:07:06,952] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 4, 1), datetime.date(2025, 4, 1))]
[2025-08-18 18:07:06,952] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.000022
[2025-08-18 18:07:06,954] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-01 to 2025-04-01
[2025-08-18 18:07:07,844] [INFO] [database:346] [conn:N/A] Successfully loaded 94 rows for sh.000022
[2025-08-18 18:07:07,860] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:07:07,866] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:07:07,867] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:07:07,867] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:07:07,867] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:07:07,874] [DEBUG] [backtesting:279] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:07:07,874] [DEBUG] [backtesting:304] [conn:N/A] 注册策略调度处理器: fc5b4341-5c5a-46ed-a06e-434986b0d7c7
[2025-08-18 18:07:07,874] [INFO] [backtesting:307] [conn:N/A] 策略注册成功 | ID: fc5b4341-5c5a-46ed-a06e-434986b0d7c7 | 名称: 自定义规则策略
[2025-08-18 18:07:07,874] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 18:07:07,875] [DEBUG] [backtesting:160] [conn:N/A] 识别数据频率为：日线
[2025-08-18 18:07:07,877] [DEBUG] [backtesting:186] [conn:N/A] 开始回测...
[2025-08-18 18:07:07,877] [INFO] [backtesting:354] [conn:N/A] 回测系统初始化开始
[2025-08-18 18:07:07,878] [INFO] [backtesting:366] [conn:N/A] 策略初始化完成: fc5b4341-5c5a-46ed-a06e-434986b0d7c7
[2025-08-18 18:07:07,878] [INFO] [backtesting:384] [conn:N/A] 回测系统初始化完成
[2025-08-18 18:07:07,878] [DEBUG] [backtesting:219] [conn:N/A] 处理交易日事件 @ 2025-04-02 00:00:00
[2025-08-18 18:07:07,878] [DEBUG] [backtesting:220] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:07:07,878] [WARNING] [backtesting:390] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-02 00:00:00
[2025-08-18 18:07:07,878] [DEBUG] [backtesting:208] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:30,363] [INFO] [database:289] [conn:N/A] Loading stock data for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:08:30,364] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 18:08:30,364] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.000022 from 2025-04-01 to 2025-08-18
[2025-08-18 18:08:30,400] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-04-01-2025-08-18 for sh.000022

[2025-08-18 18:08:30,405] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 4, 1)} for sh.000022
[2025-08-18 18:08:30,405] [INFO] [database:270] [conn:N/A] Found 1 missing data ranges for sh.000022
[2025-08-18 18:08:30,428] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 4, 1), datetime.date(2025, 4, 1))]
[2025-08-18 18:08:30,429] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.000022
[2025-08-18 18:08:30,431] [INFO] [database:306] [conn:N/A] Fetching data from 2025-04-01 to 2025-04-01
[2025-08-18 18:08:31,011] [INFO] [database:346] [conn:N/A] Successfully loaded 94 rows for sh.000022
[2025-08-18 18:08:31,035] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:08:31,040] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:08:31,041] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:08:31,041] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:08:31,041] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 18:08:31,043] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 18:08:31,043] [DEBUG] [backtesting:306] [conn:N/A] 注册策略调度处理器: 13222192-6136-421e-abbd-ada7598f2633
[2025-08-18 18:08:31,043] [INFO] [backtesting:309] [conn:N/A] 策略注册成功 | ID: 13222192-6136-421e-abbd-ada7598f2633 | 名称: 自定义规则策略
[2025-08-18 18:08:31,043] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 18:08:31,043] [DEBUG] [backtesting:161] [conn:N/A] 识别数据频率为：日线
[2025-08-18 18:08:31,045] [DEBUG] [backtesting:187] [conn:N/A] 开始回测...
[2025-08-18 18:08:31,045] [INFO] [backtesting:356] [conn:N/A] 回测系统初始化开始
[2025-08-18 18:08:31,045] [INFO] [backtesting:368] [conn:N/A] 策略初始化完成: 13222192-6136-421e-abbd-ada7598f2633
[2025-08-18 18:08:31,046] [INFO] [backtesting:386] [conn:N/A] 回测系统初始化完成
[2025-08-18 18:08:31,046] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-02 00:00:00
[2025-08-18 18:08:31,046] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,046] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-02 00:00:00
[2025-08-18 18:08:31,046] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,046] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,046] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,047] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,047] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 18:08:31,048] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,048] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,048] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,048] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,048] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,049] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,049] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,049] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,050] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,050] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,051] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-02', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.5450'), 'high': Decimal('248.5495'), 'low': Decimal('248.5441'), 'close': Decimal('248.5488'), 'volume': Decimal('96880600'), 'amount': Decimal('974942690.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:08:31,051] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-03 00:00:00
[2025-08-18 18:08:31,051] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,051] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-03 00:00:00
[2025-08-18 18:08:31,051] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,051] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,051] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,051] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,051] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 18:08:31,051] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 18:08:31,052] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 18:08:31,052] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 18:08:31,053] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 18:08:31,053] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,053] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 18:08:31,054] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,054] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.5685'), 'high': Decimal('248.5699'), 'low': Decimal('248.5679'), 'close': Decimal('248.5683'), 'volume': Decimal('53022600'), 'amount': Decimal('529932927.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:08:31,054] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-07 00:00:00
[2025-08-18 18:08:31,054] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,054] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-07 00:00:00
[2025-08-18 18:08:31,054] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,054] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 18:08:31,055] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 1)
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 18:08:31,055] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 1)
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,055] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 18:08:31,056] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 18:08:31,056] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 18:08:31,057] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,057] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.6471'), 'high': Decimal('248.6530'), 'low': Decimal('248.6454'), 'close': Decimal('248.6528'), 'volume': Decimal('1.0213E+8'), 'amount': Decimal('1031243508.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:08:31,057] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-08 00:00:00
[2025-08-18 18:08:31,057] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,057] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-08 00:00:00
[2025-08-18 18:08:31,057] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 18:08:31,058] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 2)
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 18:08:31,058] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 2)
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 18:08:31,059] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,059] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 18:08:31,059] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,060] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.6725'), 'high': Decimal('248.6900'), 'low': Decimal('248.6725'), 'close': Decimal('248.6896'), 'volume': Decimal('66454000'), 'amount': Decimal('674400820.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:08:31,060] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-09 00:00:00
[2025-08-18 18:08:31,060] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,060] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-09 00:00:00
[2025-08-18 18:08:31,060] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 18:08:31,060] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 3)
[2025-08-18 18:08:31,060] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 18:08:31,061] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 3)
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 18:08:31,061] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,062] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 18:08:31,062] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,062] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7093'), 'high': Decimal('248.7184'), 'low': Decimal('248.7093'), 'close': Decimal('248.7183'), 'volume': Decimal('41411300'), 'amount': Decimal('416015790.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 18:08:31,062] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-10 00:00:00
[2025-08-18 18:08:31,062] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,062] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-10 00:00:00
[2025-08-18 18:08:31,062] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@5
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=1:6, 当前值=248.7429
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.67438
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.67438
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 5, 值: 248.67438
[2025-08-18 18:08:31,063] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: False
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[5] = 248.67438
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 18:08:31,064] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 4)
[2025-08-18 18:08:31,064] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,065] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,065] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,065] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 18:08:31,065] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 18:08:31,066] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 4)
[2025-08-18 18:08:31,066] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,066] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 18:08:31,066] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,066] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,066] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,067] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 18:08:31,067] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,067] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,067] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 18:08:31,067] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,067] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7380'), 'high': Decimal('248.7429'), 'low': Decimal('248.7377'), 'close': Decimal('248.7429'), 'volume': Decimal('83312000'), 'amount': Decimal('836976090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.67438, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.67438}
[2025-08-18 18:08:31,067] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-11 00:00:00
[2025-08-18 18:08:31,067] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,068] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-11 00:00:00
[2025-08-18 18:08:31,068] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@6
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=2:7, 当前值=248.7665
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.71401999999998
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.71401999999998
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 6, 值: 248.71401999999998
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[6] = 248.71401999999998
[2025-08-18 18:08:31,068] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 18:08:31,068] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,068] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.67438
[2025-08-18 18:08:31,069] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.67438 (from index 5)
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 18:08:31,069] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 5)
[2025-08-18 18:08:31,069] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,069] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 18:08:31,069] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,069] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,069] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 18:08:31,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 18:08:31,070] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,070] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 18:08:31,070] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,070] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.7637'), 'high': Decimal('248.7665'), 'low': Decimal('248.7637'), 'close': Decimal('248.7665'), 'volume': Decimal('7.80E+6'), 'amount': Decimal('77909523.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.71401999999998, 'REF(SMA(close, 5),1)': 248.67438, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.71401999999998}
[2025-08-18 18:08:31,070] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-14 00:00:00
[2025-08-18 18:08:31,070] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,070] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-14 00:00:00
[2025-08-18 18:08:31,070] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@7
[2025-08-18 18:08:31,070] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=3:8, 当前值=248.8311
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.74967999999998
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.74967999999998
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 7, 值: 248.74967999999998
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[7] = 248.74967999999998
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 18:08:31,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.71401999999998
[2025-08-18 18:08:31,071] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.71401999999998 (from index 6)
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 18:08:31,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 18:08:31,072] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 6)
[2025-08-18 18:08:31,072] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,072] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 18:08:31,072] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,072] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,072] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 18:08:31,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,073] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 18:08:31,073] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,074] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8254'), 'high': Decimal('248.8312'), 'low': Decimal('248.8254'), 'close': Decimal('248.8311'), 'volume': Decimal('4.028E+7'), 'amount': Decimal('401537703.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.74967999999998, 'REF(SMA(close, 5),1)': 248.71401999999998, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.74967999999998}
[2025-08-18 18:08:31,074] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-15 00:00:00
[2025-08-18 18:08:31,074] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,074] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-15 00:00:00
[2025-08-18 18:08:31,074] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@8
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=4:9, 当前值=248.8530
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.78236
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.78236
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 8, 值: 248.78236
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[8] = 248.78236
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 18:08:31,075] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,075] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.74967999999998
[2025-08-18 18:08:31,075] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.74967999999998 (from index 7)
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 18:08:31,075] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 18:08:31,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 18:08:31,076] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 7)
[2025-08-18 18:08:31,076] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,076] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,076] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,076] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,076] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 18:08:31,076] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,083] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,083] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,083] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,083] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 18:08:31,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,084] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,084] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,084] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 18:08:31,084] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 18:08:31,085] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,085] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 18:08:31,085] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,087] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8508'), 'high': Decimal('248.8530'), 'low': Decimal('248.8505'), 'close': Decimal('248.8530'), 'volume': Decimal('50854200'), 'amount': Decimal('511257068.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.78236, 'REF(SMA(close, 5),1)': 248.74967999999998, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.78236}
[2025-08-18 18:08:31,088] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-16 00:00:00
[2025-08-18 18:08:31,088] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,088] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-16 00:00:00
[2025-08-18 18:08:31,089] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,089] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@9
[2025-08-18 18:08:31,090] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=5:10, 当前值=248.8766
[2025-08-18 18:08:31,090] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.81401999999997
[2025-08-18 18:08:31,090] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.81401999999997
[2025-08-18 18:08:31,090] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 9, 值: 248.81401999999997
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[9] = 248.81401999999997
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 18:08:31,091] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,091] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.78236
[2025-08-18 18:08:31,091] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.78236 (from index 8)
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 18:08:31,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 18:08:31,092] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 8)
[2025-08-18 18:08:31,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 18:08:31,092] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 18:08:31,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 18:08:31,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 18:08:31,093] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,093] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8727'), 'high': Decimal('248.8767'), 'low': Decimal('248.8727'), 'close': Decimal('248.8766'), 'volume': Decimal('53168800'), 'amount': Decimal('536504671.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.81401999999997, 'REF(SMA(close, 5),1)': 248.78236, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.81401999999997}
[2025-08-18 18:08:31,093] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-17 00:00:00
[2025-08-18 18:08:31,093] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,093] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-17 00:00:00
[2025-08-18 18:08:31,093] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@10
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=6:11, 当前值=248.9029
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.84602
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.84602
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 10, 值: 248.84602
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[10] = 248.84602
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 18:08:31,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.81401999999997
[2025-08-18 18:08:31,094] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.81401999999997 (from index 9)
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 18:08:31,095] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 18:08:31,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 18:08:31,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 18:08:31,095] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 9)
[2025-08-18 18:08:31,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 18:08:31,096] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 18:08:31,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,096] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 18:08:31,096] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,096] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.8962'), 'high': Decimal('248.9030'), 'low': Decimal('248.8961'), 'close': Decimal('248.9029'), 'volume': Decimal('6.339E+7'), 'amount': Decimal('643950692.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.84602, 'REF(SMA(close, 5),1)': 248.81401999999997, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.84602}
[2025-08-18 18:08:31,096] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-18 00:00:00
[2025-08-18 18:08:31,096] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,097] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-18 00:00:00
[2025-08-18 18:08:31,097] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,097] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@11
[2025-08-18 18:08:31,097] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=7:12, 当前值=248.9232
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.87736
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.87736
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 11, 值: 248.87736
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[11] = 248.87736
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 18:08:31,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.84602
[2025-08-18 18:08:31,098] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.84602 (from index 10)
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,098] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 18:08:31,099] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 10)
[2025-08-18 18:08:31,099] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,099] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 18:08:31,099] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,099] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,099] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 18:08:31,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 18:08:31,099] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,099] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 18:08:31,100] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,100] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.9226'), 'high': Decimal('248.9232'), 'low': Decimal('248.9226'), 'close': Decimal('248.9232'), 'volume': Decimal('8185000'), 'amount': Decimal('81680106.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.87736, 'REF(SMA(close, 5),1)': 248.84602, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.87736}
[2025-08-18 18:08:31,100] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-21 00:00:00
[2025-08-18 18:08:31,100] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,100] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-21 00:00:00
[2025-08-18 18:08:31,100] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@12
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=8:13, 当前值=248.9874
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.90862
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.90862
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 12, 值: 248.90862
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[12] = 248.90862
[2025-08-18 18:08:31,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 18:08:31,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.87736
[2025-08-18 18:08:31,100] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.87736 (from index 11)
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 18:08:31,101] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 11)
[2025-08-18 18:08:31,101] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 18:08:31,101] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,101] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 18:08:31,101] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 18:08:31,102] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,102] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('248.9819'), 'high': Decimal('248.9883'), 'low': Decimal('248.9813'), 'close': Decimal('248.9874'), 'volume': Decimal('9.421E+7'), 'amount': Decimal('946343409.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.90862, 'REF(SMA(close, 5),1)': 248.87736, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.90862}
[2025-08-18 18:08:31,102] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-22 00:00:00
[2025-08-18 18:08:31,102] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,102] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-22 00:00:00
[2025-08-18 18:08:31,102] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@13
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=9:14, 当前值=249.0101
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.94004
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.94004
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 13, 值: 248.94004
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[13] = 248.94004
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 18:08:31,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.90862
[2025-08-18 18:08:31,102] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.90862 (from index 12)
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 18:08:31,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 18:08:31,103] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 12)
[2025-08-18 18:08:31,103] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 18:08:31,103] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,103] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 18:08:31,103] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 18:08:31,103] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,103] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0071'), 'high': Decimal('249.0102'), 'low': Decimal('249.0067'), 'close': Decimal('249.0101'), 'volume': Decimal('5.528E+7'), 'amount': Decimal('557067303.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.94004, 'REF(SMA(close, 5),1)': 248.90862, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.94004}
[2025-08-18 18:08:31,103] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-23 00:00:00
[2025-08-18 18:08:31,103] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,104] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-23 00:00:00
[2025-08-18 18:08:31,104] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@14
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=10:15, 当前值=249.0361
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.97194
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=248.97194
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 14, 值: 248.97194
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[14] = 248.97194
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 18:08:31,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.94004
[2025-08-18 18:08:31,104] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.94004 (from index 13)
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 18:08:31,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 18:08:31,105] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 13)
[2025-08-18 18:08:31,105] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 18:08:31,105] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,105] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 18:08:31,105] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 18:08:31,105] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,105] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0297'), 'high': Decimal('249.0380'), 'low': Decimal('249.0296'), 'close': Decimal('249.0361'), 'volume': Decimal('116415100'), 'amount': Decimal('1171744149.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 248.97194, 'REF(SMA(close, 5),1)': 248.94004, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 248.97194}
[2025-08-18 18:08:31,106] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-24 00:00:00
[2025-08-18 18:08:31,106] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,106] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-24 00:00:00
[2025-08-18 18:08:31,106] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@15
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=11:16, 当前值=249.0529
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.00194000000002
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.00194000000002
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 15, 值: 249.00194000000002
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[15] = 249.00194000000002
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 18:08:31,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=248.97194
[2025-08-18 18:08:31,106] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=248.97194 (from index 14)
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,106] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 18:08:31,107] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 14)
[2025-08-18 18:08:31,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 18:08:31,107] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 18:08:31,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 18:08:31,107] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,107] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0556'), 'high': Decimal('249.0572'), 'low': Decimal('249.0526'), 'close': Decimal('249.0529'), 'volume': Decimal('96381000'), 'amount': Decimal('964558776.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.00194000000002, 'REF(SMA(close, 5),1)': 248.97194, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.00194000000002}
[2025-08-18 18:08:31,107] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-25 00:00:00
[2025-08-18 18:08:31,107] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,107] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-25 00:00:00
[2025-08-18 18:08:31,107] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@16
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=12:17, 当前值=249.0689
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.03108000000003
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.03108000000003
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 16, 值: 249.03108000000003
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[16] = 249.03108000000003
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 18:08:31,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.00194000000002
[2025-08-18 18:08:31,108] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.00194000000002 (from index 15)
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 18:08:31,108] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 15)
[2025-08-18 18:08:31,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,108] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 18:08:31,109] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,109] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,109] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 18:08:31,109] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,109] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 18:08:31,109] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,109] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.0724'), 'high': Decimal('249.0726'), 'low': Decimal('249.0689'), 'close': Decimal('249.0689'), 'volume': Decimal('12766400'), 'amount': Decimal('128796292.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.03108000000003, 'REF(SMA(close, 5),1)': 249.00194000000002, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.03108000000003}
[2025-08-18 18:08:31,109] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-28 00:00:00
[2025-08-18 18:08:31,109] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,109] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-28 00:00:00
[2025-08-18 18:08:31,109] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@17
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=13:18, 当前值=249.1314
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.05988000000002
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.05988000000002
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 17, 值: 249.05988000000002
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[17] = 249.05988000000002
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 18:08:31,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.03108000000003
[2025-08-18 18:08:31,110] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.03108000000003 (from index 16)
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 18:08:31,110] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 16)
[2025-08-18 18:08:31,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 18:08:31,110] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,110] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 18:08:31,111] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,111] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 18:08:31,111] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,111] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1282'), 'high': Decimal('249.1326'), 'low': Decimal('249.1237'), 'close': Decimal('249.1314'), 'volume': Decimal('137607400'), 'amount': Decimal('1385601091.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.05988000000002, 'REF(SMA(close, 5),1)': 249.03108000000003, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.05988000000002}
[2025-08-18 18:08:31,111] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-29 00:00:00
[2025-08-18 18:08:31,111] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,111] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-29 00:00:00
[2025-08-18 18:08:31,111] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@18
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=14:19, 当前值=249.1497
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.08780000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.08780000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 18, 值: 249.08780000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[18] = 249.08780000000002
[2025-08-18 18:08:31,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 18:08:31,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.05988000000002
[2025-08-18 18:08:31,112] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.05988000000002 (from index 17)
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 18:08:31,112] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 17)
[2025-08-18 18:08:31,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 18:08:31,112] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 18:08:31,112] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 18:08:31,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,113] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 18:08:31,113] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,113] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1532'), 'high': Decimal('249.1607'), 'low': Decimal('249.1497'), 'close': Decimal('249.1497'), 'volume': Decimal('206646900'), 'amount': Decimal('2080664673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.08780000000002, 'REF(SMA(close, 5),1)': 249.05988000000002, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.08780000000002}
[2025-08-18 18:08:31,113] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-04-30 00:00:00
[2025-08-18 18:08:31,113] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,113] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-04-30 00:00:00
[2025-08-18 18:08:31,113] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@19
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=15:20, 当前值=249.1684
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.11426
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.11426
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 19, 值: 249.11426
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[19] = 249.11426
[2025-08-18 18:08:31,113] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 18:08:31,113] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,113] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.08780000000002
[2025-08-18 18:08:31,113] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.08780000000002 (from index 18)
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 18:08:31,114] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 18)
[2025-08-18 18:08:31,114] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,114] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 18:08:31,114] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,114] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,114] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,114] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 18:08:31,115] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,115] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 18:08:31,115] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,115] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-04-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.1691'), 'high': Decimal('249.1701'), 'low': Decimal('249.1677'), 'close': Decimal('249.1684'), 'volume': Decimal('4738900'), 'amount': Decimal('46843437.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-04-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.11426, 'REF(SMA(close, 5),1)': 249.08780000000002, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.11426}
[2025-08-18 18:08:31,115] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-06 00:00:00
[2025-08-18 18:08:31,115] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,115] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-06 00:00:00
[2025-08-18 18:08:31,115] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@20
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=16:21, 当前值=249.2734
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.15836
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.15836
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 20, 值: 249.15836
[2025-08-18 18:08:31,115] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[20] = 249.15836
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 18:08:31,116] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,116] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.11426
[2025-08-18 18:08:31,116] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.11426 (from index 19)
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@20
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=1:21, 当前值=249.2734
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.92017500000003
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=248.92017500000003
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 20, 值: 248.92017500000003
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: False
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[20] = 248.92017500000003
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,116] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 18:08:31,116] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 19)
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,117] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 18:08:31,117] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,117] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,117] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,117] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.2848'), 'high': Decimal('249.2848'), 'low': Decimal('249.2731'), 'close': Decimal('249.2734'), 'volume': Decimal('3.293E+7'), 'amount': Decimal('328052857.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.15836, 'REF(SMA(close, 5),1)': 249.11426, 'SMA(close, 20)': 248.92017500000003, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 249.15836, 'SMA(close,20)': 248.92017500000003}
[2025-08-18 18:08:31,117] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-07 00:00:00
[2025-08-18 18:08:31,117] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,117] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-07 00:00:00
[2025-08-18 18:08:31,117] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,117] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@21
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=17:22, 当前值=249.3023
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.20504
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.20504
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 21, 值: 249.20504
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[21] = 249.20504
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 18:08:31,118] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,118] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.15836
[2025-08-18 18:08:31,118] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.15836 (from index 20)
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@21
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=2:22, 当前值=249.3023
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.956875
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=248.956875
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 21, 值: 248.956875
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[21] = 248.956875
[2025-08-18 18:08:31,118] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 18:08:31,118] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,118] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.92017500000003
[2025-08-18 18:08:31,118] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=248.92017500000003 (from index 20)
[2025-08-18 18:08:31,118] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,118] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,119] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,119] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,119] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,119] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,119] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 18:08:31,119] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,119] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 18:08:31,119] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,119] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,119] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,119] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,119] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.2927'), 'high': Decimal('249.3023'), 'low': Decimal('249.2924'), 'close': Decimal('249.3023'), 'volume': Decimal('8.199E+7'), 'amount': Decimal('820821650.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.20504, 'REF(SMA(close, 5),1)': 249.15836, 'SMA(close, 20)': 248.956875, 'REF(SMA(close, 20),1)': 248.92017500000003, 'SMA(close,5)': 249.20504, 'SMA(close,20)': 248.956875}
[2025-08-18 18:08:31,119] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-08 00:00:00
[2025-08-18 18:08:31,119] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,119] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-08 00:00:00
[2025-08-18 18:08:31,119] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@22
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=18:23, 当前值=249.3220
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.24316
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.24316
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 22, 值: 249.24316
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[22] = 249.24316
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 18:08:31,120] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,120] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.20504
[2025-08-18 18:08:31,120] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.20504 (from index 21)
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@22
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=3:23, 当前值=249.3220
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=248.99033500000002
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=248.99033500000002
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 22, 值: 248.99033500000002
[2025-08-18 18:08:31,120] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[22] = 248.99033500000002
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.956875
[2025-08-18 18:08:31,121] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=248.956875 (from index 21)
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,121] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,121] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,121] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3216'), 'high': Decimal('249.3237'), 'low': Decimal('249.3216'), 'close': Decimal('249.3220'), 'volume': Decimal('8.142E+7'), 'amount': Decimal('816843823.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.24316, 'REF(SMA(close, 5),1)': 249.20504, 'SMA(close, 20)': 248.99033500000002, 'REF(SMA(close, 20),1)': 248.956875, 'SMA(close,5)': 249.24316, 'SMA(close,20)': 248.99033500000002}
[2025-08-18 18:08:31,122] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-09 00:00:00
[2025-08-18 18:08:31,122] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,122] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-09 00:00:00
[2025-08-18 18:08:31,122] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@23
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=19:24, 当前值=249.3397
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.28116
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.28116
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 23, 值: 249.28116
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[23] = 249.28116
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 18:08:31,122] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,122] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.24316
[2025-08-18 18:08:31,122] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.24316 (from index 22)
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@23
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=4:24, 当前值=249.3397
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.02284
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.02284
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 23, 值: 249.02284
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,122] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[23] = 249.02284
[2025-08-18 18:08:31,123] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=248.99033500000002
[2025-08-18 18:08:31,123] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=248.99033500000002 (from index 22)
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,123] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 18:08:31,123] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,123] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,123] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,123] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3414'), 'high': Decimal('249.3414'), 'low': Decimal('249.3397'), 'close': Decimal('249.3397'), 'volume': Decimal('5.036E+7'), 'amount': Decimal('507127571.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.28116, 'REF(SMA(close, 5),1)': 249.24316, 'SMA(close, 20)': 249.02284, 'REF(SMA(close, 20),1)': 248.99033500000002, 'SMA(close,5)': 249.28116, 'SMA(close,20)': 249.02284}
[2025-08-18 18:08:31,123] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-12 00:00:00
[2025-08-18 18:08:31,124] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,124] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-12 00:00:00
[2025-08-18 18:08:31,124] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@24
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=20:25, 当前值=249.4029
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.32806
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.32806
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 24, 值: 249.32806
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[24] = 249.32806
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 18:08:31,124] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,124] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.28116
[2025-08-18 18:08:31,124] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.28116 (from index 23)
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@24
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=5:25, 当前值=249.4029
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.05707
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.05707
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 24, 值: 249.05707
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[24] = 249.05707
[2025-08-18 18:08:31,124] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.02284
[2025-08-18 18:08:31,125] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.02284 (from index 23)
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,125] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 18:08:31,125] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,125] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,125] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,125] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.3979'), 'high': Decimal('249.4029'), 'low': Decimal('249.3967'), 'close': Decimal('249.4029'), 'volume': Decimal('122544200'), 'amount': Decimal('1233849746.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.32806, 'REF(SMA(close, 5),1)': 249.28116, 'SMA(close, 20)': 249.05707, 'REF(SMA(close, 20),1)': 249.02284, 'SMA(close,5)': 249.32806, 'SMA(close,20)': 249.05707}
[2025-08-18 18:08:31,125] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-13 00:00:00
[2025-08-18 18:08:31,125] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,125] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-13 00:00:00
[2025-08-18 18:08:31,126] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@25
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=21:26, 当前值=249.4320
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.35978
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.35978
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 25, 值: 249.35978
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[25] = 249.35978
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 18:08:31,126] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,126] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.32806
[2025-08-18 18:08:31,126] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.32806 (from index 24)
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@25
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=6:26, 当前值=249.4320
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.091525
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.091525
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 25, 值: 249.091525
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[25] = 249.091525
[2025-08-18 18:08:31,126] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 18:08:31,126] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.05707
[2025-08-18 18:08:31,127] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.05707 (from index 24)
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,127] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 18:08:31,127] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,127] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,127] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,127] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4249'), 'high': Decimal('249.4321'), 'low': Decimal('249.4242'), 'close': Decimal('249.4320'), 'volume': Decimal('7.863E+7'), 'amount': Decimal('788207240.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.35978, 'REF(SMA(close, 5),1)': 249.32806, 'SMA(close, 20)': 249.091525, 'REF(SMA(close, 20),1)': 249.05707, 'SMA(close,5)': 249.35978, 'SMA(close,20)': 249.091525}
[2025-08-18 18:08:31,127] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-14 00:00:00
[2025-08-18 18:08:31,127] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,127] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-14 00:00:00
[2025-08-18 18:08:31,127] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@26
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=22:27, 当前值=249.4552
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.39036000000002
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.39036000000002
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 26, 值: 249.39036000000002
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[26] = 249.39036000000002
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 18:08:31,128] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,128] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.35978
[2025-08-18 18:08:31,128] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.35978 (from index 25)
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@26
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=7:27, 当前值=249.4552
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.12596
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.12596
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 26, 值: 249.12596
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[26] = 249.12596
[2025-08-18 18:08:31,128] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 18:08:31,128] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,128] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.091525
[2025-08-18 18:08:31,128] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.091525 (from index 25)
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,129] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 18:08:31,129] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,129] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,129] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,129] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4514'), 'high': Decimal('249.4555'), 'low': Decimal('249.4513'), 'close': Decimal('249.4552'), 'volume': Decimal('156874000'), 'amount': Decimal('1567541466.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.39036000000002, 'REF(SMA(close, 5),1)': 249.35978, 'SMA(close, 20)': 249.12596, 'REF(SMA(close, 20),1)': 249.091525, 'SMA(close,5)': 249.39036000000002, 'SMA(close,20)': 249.12596}
[2025-08-18 18:08:31,129] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-15 00:00:00
[2025-08-18 18:08:31,129] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,129] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-15 00:00:00
[2025-08-18 18:08:31,129] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@27
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=23:28, 当前值=249.4745
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.42086
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.42086
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 27, 值: 249.42086
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[27] = 249.42086
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 18:08:31,130] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,130] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.39036000000002
[2025-08-18 18:08:31,130] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.39036000000002 (from index 26)
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@27
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=8:28, 当前值=249.4745
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.15812999999997
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.15812999999997
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 27, 值: 249.15812999999997
[2025-08-18 18:08:31,130] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[27] = 249.15812999999997
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.12596
[2025-08-18 18:08:31,131] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.12596 (from index 26)
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,131] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,131] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,132] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4745'), 'high': Decimal('249.4749'), 'low': Decimal('249.4697'), 'close': Decimal('249.4745'), 'volume': Decimal('1.2200E+8'), 'amount': Decimal('1219434276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.42086, 'REF(SMA(close, 5),1)': 249.39036000000002, 'SMA(close, 20)': 249.15812999999997, 'REF(SMA(close, 20),1)': 249.12596, 'SMA(close,5)': 249.42086, 'SMA(close,20)': 249.15812999999997}
[2025-08-18 18:08:31,132] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-16 00:00:00
[2025-08-18 18:08:31,132] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,132] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-16 00:00:00
[2025-08-18 18:08:31,132] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@28
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=24:29, 当前值=249.4946
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.45184
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.45184
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 28, 值: 249.45184
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[28] = 249.45184
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 18:08:31,132] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,132] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.42086
[2025-08-18 18:08:31,132] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.42086 (from index 27)
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@28
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=9:29, 当前值=249.4946
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.19020999999998
[2025-08-18 18:08:31,132] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.19020999999998
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 28, 值: 249.19020999999998
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[28] = 249.19020999999998
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.15812999999997
[2025-08-18 18:08:31,133] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.15812999999997 (from index 27)
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,133] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,133] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,133] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.4939'), 'high': Decimal('249.4947'), 'low': Decimal('249.4935'), 'close': Decimal('249.4946'), 'volume': Decimal('19759000'), 'amount': Decimal('196395380.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.45184, 'REF(SMA(close, 5),1)': 249.42086, 'SMA(close, 20)': 249.19020999999998, 'REF(SMA(close, 20),1)': 249.15812999999997, 'SMA(close,5)': 249.45184, 'SMA(close,20)': 249.19020999999998}
[2025-08-18 18:08:31,134] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-19 00:00:00
[2025-08-18 18:08:31,134] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,134] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-19 00:00:00
[2025-08-18 18:08:31,134] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@29
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=25:30, 当前值=249.5570
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.48265999999998
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.48265999999998
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 29, 值: 249.48265999999998
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[29] = 249.48265999999998
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 18:08:31,134] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,134] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.45184
[2025-08-18 18:08:31,134] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.45184 (from index 28)
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@29
[2025-08-18 18:08:31,134] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=10:30, 当前值=249.5570
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.22422999999998
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.22422999999998
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 29, 值: 249.22422999999998
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[29] = 249.22422999999998
[2025-08-18 18:08:31,135] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 18:08:31,135] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,135] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.19020999999998
[2025-08-18 18:08:31,135] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.19020999999998 (from index 28)
[2025-08-18 18:08:31,135] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,135] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,135] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,136] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,136] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,136] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,136] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,136] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,136] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 18:08:31,137] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,137] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,137] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,137] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 18:08:31,137] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,137] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,137] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,137] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,137] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,137] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-19', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5537'), 'high': Decimal('249.5570'), 'low': Decimal('249.5493'), 'close': Decimal('249.5570'), 'volume': Decimal('116027200'), 'amount': Decimal('1165047486.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.48265999999998, 'REF(SMA(close, 5),1)': 249.45184, 'SMA(close, 20)': 249.22422999999998, 'REF(SMA(close, 20),1)': 249.19020999999998, 'SMA(close,5)': 249.48265999999998, 'SMA(close,20)': 249.22422999999998}
[2025-08-18 18:08:31,138] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-20 00:00:00
[2025-08-18 18:08:31,138] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,138] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-20 00:00:00
[2025-08-18 18:08:31,138] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@30
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=26:31, 当前值=249.5587
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.50799999999998
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.50799999999998
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 30, 值: 249.50799999999998
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[30] = 249.50799999999998
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 18:08:31,139] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,139] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.48265999999998
[2025-08-18 18:08:31,139] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.48265999999998 (from index 29)
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@30
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=11:31, 当前值=249.5587
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.25702
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.25702
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 30, 值: 249.25702
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[30] = 249.25702
[2025-08-18 18:08:31,139] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 18:08:31,139] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.22422999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.22422999999998 (from index 29)
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,140] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 18:08:31,140] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,140] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,140] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,141] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-20', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5775'), 'high': Decimal('249.5780'), 'low': Decimal('249.5517'), 'close': Decimal('249.5587'), 'volume': Decimal('1.6864E+8'), 'amount': Decimal('1699835623.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.50799999999998, 'REF(SMA(close, 5),1)': 249.48265999999998, 'SMA(close, 20)': 249.25702, 'REF(SMA(close, 20),1)': 249.22422999999998, 'SMA(close,5)': 249.50799999999998, 'SMA(close,20)': 249.25702}
[2025-08-18 18:08:31,141] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-21 00:00:00
[2025-08-18 18:08:31,141] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,141] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-21 00:00:00
[2025-08-18 18:08:31,141] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@31
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=27:32, 当前值=249.5850
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.53395999999998
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.53395999999998
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 31, 值: 249.53395999999998
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[31] = 249.53395999999998
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 18:08:31,141] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,141] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.50799999999998
[2025-08-18 18:08:31,141] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.50799999999998 (from index 30)
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@31
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=12:32, 当前值=249.5850
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.29011
[2025-08-18 18:08:31,141] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.29011
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 31, 值: 249.29011
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[31] = 249.29011
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.25702
[2025-08-18 18:08:31,142] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.25702 (from index 30)
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,142] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,142] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,143] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.5779'), 'high': Decimal('249.5851'), 'low': Decimal('249.5744'), 'close': Decimal('249.5850'), 'volume': Decimal('159036000'), 'amount': Decimal('1607915005.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.53395999999998, 'REF(SMA(close, 5),1)': 249.50799999999998, 'SMA(close, 20)': 249.29011, 'REF(SMA(close, 20),1)': 249.25702, 'SMA(close,5)': 249.53395999999998, 'SMA(close,20)': 249.29011}
[2025-08-18 18:08:31,143] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-22 00:00:00
[2025-08-18 18:08:31,143] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,143] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-22 00:00:00
[2025-08-18 18:08:31,143] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@32
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=28:33, 当前值=249.6085
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.56076
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.56076
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 32, 值: 249.56076
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[32] = 249.56076
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 18:08:31,143] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,143] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.53395999999998
[2025-08-18 18:08:31,143] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.53395999999998 (from index 31)
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@32
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=13:33, 当前值=249.6085
[2025-08-18 18:08:31,143] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.321165
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.321165
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 32, 值: 249.321165
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[32] = 249.321165
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.29011
[2025-08-18 18:08:31,144] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.29011 (from index 31)
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,144] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,144] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,144] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,144] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,145] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,145] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6042'), 'high': Decimal('249.6085'), 'low': Decimal('249.6042'), 'close': Decimal('249.6085'), 'volume': Decimal('1.2915E+8'), 'amount': Decimal('1294436933.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.56076, 'REF(SMA(close, 5),1)': 249.53395999999998, 'SMA(close, 20)': 249.321165, 'REF(SMA(close, 20),1)': 249.29011, 'SMA(close,5)': 249.56076, 'SMA(close,20)': 249.321165}
[2025-08-18 18:08:31,145] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-23 00:00:00
[2025-08-18 18:08:31,145] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,145] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-23 00:00:00
[2025-08-18 18:08:31,145] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@33
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=29:34, 当前值=249.6277
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.58738
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.58738
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 33, 值: 249.58738
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[33] = 249.58738
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 18:08:31,145] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,145] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.56076
[2025-08-18 18:08:31,145] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.56076 (from index 32)
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@33
[2025-08-18 18:08:31,145] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=14:34, 当前值=249.6277
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.352045
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.352045
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 33, 值: 249.352045
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[33] = 249.352045
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.321165
[2025-08-18 18:08:31,146] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.321165 (from index 32)
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,146] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,146] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 18:08:31,146] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,146] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,147] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,147] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,147] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,147] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6278'), 'high': Decimal('249.6288'), 'low': Decimal('249.6271'), 'close': Decimal('249.6277'), 'volume': Decimal('2.677E+7'), 'amount': Decimal('268475231.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.58738, 'REF(SMA(close, 5),1)': 249.56076, 'SMA(close, 20)': 249.352045, 'REF(SMA(close, 20),1)': 249.321165, 'SMA(close,5)': 249.58738, 'SMA(close,20)': 249.352045}
[2025-08-18 18:08:31,147] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-26 00:00:00
[2025-08-18 18:08:31,147] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,147] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-26 00:00:00
[2025-08-18 18:08:31,147] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@34
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=30:35, 当前值=249.7092
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.61782
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.61782
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 34, 值: 249.61782
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[34] = 249.61782
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 18:08:31,147] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,147] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.58738
[2025-08-18 18:08:31,147] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.58738 (from index 33)
[2025-08-18 18:08:31,147] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@34
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=15:35, 当前值=249.7092
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.38569999999999
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.38569999999999
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 34, 值: 249.38569999999999
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[34] = 249.38569999999999
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 18:08:31,148] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,148] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.352045
[2025-08-18 18:08:31,148] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.352045 (from index 33)
[2025-08-18 18:08:31,148] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,148] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,148] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,148] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,148] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,148] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,148] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,148] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,148] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,148] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 18:08:31,149] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,149] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,149] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,149] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,149] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,149] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-26', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.6909'), 'high': Decimal('249.7093'), 'low': Decimal('249.6909'), 'close': Decimal('249.7092'), 'volume': Decimal('315892000'), 'amount': Decimal('3170299428.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.61782, 'REF(SMA(close, 5),1)': 249.58738, 'SMA(close, 20)': 249.38569999999999, 'REF(SMA(close, 20),1)': 249.352045, 'SMA(close,5)': 249.61782, 'SMA(close,20)': 249.38569999999999}
[2025-08-18 18:08:31,149] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-27 00:00:00
[2025-08-18 18:08:31,149] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,149] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-27 00:00:00
[2025-08-18 18:08:31,149] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@35
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=31:36, 当前值=249.7440
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.65488
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.65488
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 35, 值: 249.65488
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[35] = 249.65488
[2025-08-18 18:08:31,149] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 18:08:31,149] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,149] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.61782
[2025-08-18 18:08:31,149] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.61782 (from index 34)
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@35
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=16:36, 当前值=249.7440
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.420255
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.420255
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 35, 值: 249.420255
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[35] = 249.420255
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 18:08:31,150] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,150] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.38569999999999
[2025-08-18 18:08:31,150] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.38569999999999 (from index 34)
[2025-08-18 18:08:31,150] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,150] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,150] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,150] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,150] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,150] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,150] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 18:08:31,150] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,150] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,151] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 18:08:31,151] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,151] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,151] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,151] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,151] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,151] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-27', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7298'), 'high': Decimal('249.7441'), 'low': Decimal('249.7276'), 'close': Decimal('249.7440'), 'volume': Decimal('2.2565E+8'), 'amount': Decimal('2264220477.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.65488, 'REF(SMA(close, 5),1)': 249.61782, 'SMA(close, 20)': 249.420255, 'REF(SMA(close, 20),1)': 249.38569999999999, 'SMA(close,5)': 249.65488, 'SMA(close,20)': 249.420255}
[2025-08-18 18:08:31,151] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-28 00:00:00
[2025-08-18 18:08:31,151] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,151] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-28 00:00:00
[2025-08-18 18:08:31,151] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@36
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=32:37, 当前值=249.7745
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.69278
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.69278
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 36, 值: 249.69278
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[36] = 249.69278
[2025-08-18 18:08:31,151] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 18:08:31,151] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,151] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.65488
[2025-08-18 18:08:31,152] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.65488 (from index 35)
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@36
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=17:37, 当前值=249.7745
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.455535
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.455535
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 36, 值: 249.455535
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[36] = 249.455535
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 18:08:31,152] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,152] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.420255
[2025-08-18 18:08:31,152] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.420255 (from index 35)
[2025-08-18 18:08:31,152] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,152] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,152] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,152] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,152] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,152] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,152] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 18:08:31,152] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,152] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,153] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 18:08:31,153] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,153] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,153] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,153] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,153] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,153] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7633'), 'high': Decimal('249.7746'), 'low': Decimal('249.7630'), 'close': Decimal('249.7745'), 'volume': Decimal('47424200'), 'amount': Decimal('474490225.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.69278, 'REF(SMA(close, 5),1)': 249.65488, 'SMA(close, 20)': 249.455535, 'REF(SMA(close, 20),1)': 249.420255, 'SMA(close,5)': 249.69278, 'SMA(close,20)': 249.455535}
[2025-08-18 18:08:31,153] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-29 00:00:00
[2025-08-18 18:08:31,153] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,153] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-29 00:00:00
[2025-08-18 18:08:31,153] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@37
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=33:38, 当前值=249.7953
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.73013999999998
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.73013999999998
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 37, 值: 249.73013999999998
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[37] = 249.73013999999998
[2025-08-18 18:08:31,153] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 18:08:31,153] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,153] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.69278
[2025-08-18 18:08:31,154] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.69278 (from index 36)
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@37
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=18:38, 当前值=249.7953
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.48872999999998
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.48872999999998
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 37, 值: 249.48872999999998
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[37] = 249.48872999999998
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 18:08:31,154] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,154] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.455535
[2025-08-18 18:08:31,154] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.455535 (from index 36)
[2025-08-18 18:08:31,154] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,154] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,154] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,154] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,154] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,154] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,154] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 18:08:31,154] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,154] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 18:08:31,155] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,155] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.7938'), 'high': Decimal('249.7954'), 'low': Decimal('249.7919'), 'close': Decimal('249.7953'), 'volume': Decimal('49935600'), 'amount': Decimal('497335635.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.73013999999998, 'REF(SMA(close, 5),1)': 249.69278, 'SMA(close, 20)': 249.48872999999998, 'REF(SMA(close, 20),1)': 249.455535, 'SMA(close,5)': 249.73013999999998, 'SMA(close,20)': 249.48872999999998}
[2025-08-18 18:08:31,155] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-05-30 00:00:00
[2025-08-18 18:08:31,155] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,155] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-05-30 00:00:00
[2025-08-18 18:08:31,155] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@38
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=34:39, 当前值=249.8158
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.76776
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.76776
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 38, 值: 249.76776
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[38] = 249.76776
[2025-08-18 18:08:31,155] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 18:08:31,155] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,155] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.73013999999998
[2025-08-18 18:08:31,156] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.73013999999998 (from index 37)
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@38
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=19:39, 当前值=249.8158
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.52203500000002
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.52203500000002
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 38, 值: 249.52203500000002
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[38] = 249.52203500000002
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 18:08:31,156] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,156] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.48872999999998
[2025-08-18 18:08:31,156] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.48872999999998 (from index 37)
[2025-08-18 18:08:31,156] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,156] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,156] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,156] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,156] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,156] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,156] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 18:08:31,156] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,156] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,156] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 18:08:31,157] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,157] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,157] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,157] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,157] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,157] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-05-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.8145'), 'high': Decimal('249.8160'), 'low': Decimal('249.8141'), 'close': Decimal('249.8158'), 'volume': Decimal('7.68E+6'), 'amount': Decimal('76138553.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-05-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.76776, 'REF(SMA(close, 5),1)': 249.73013999999998, 'SMA(close, 20)': 249.52203500000002, 'REF(SMA(close, 20),1)': 249.48872999999998, 'SMA(close,5)': 249.76776, 'SMA(close,20)': 249.52203500000002}
[2025-08-18 18:08:31,157] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 18:08:31,157] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,157] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 18:08:31,157] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@39
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=35:40, 当前值=249.8988
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.80568
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.80568
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 39, 值: 249.80568
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[39] = 249.80568
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 18:08:31,157] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,157] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.76776
[2025-08-18 18:08:31,157] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.76776 (from index 38)
[2025-08-18 18:08:31,157] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@39
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=20:40, 当前值=249.8988
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.55855499999998
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.55855499999998
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 39, 值: 249.55855499999998
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[39] = 249.55855499999998
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,158] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.52203500000002
[2025-08-18 18:08:31,158] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.52203500000002 (from index 38)
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,158] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,158] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,158] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,158] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,158] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,158] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 18:08:31,158] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,159] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,159] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,159] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,159] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,159] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.8946'), 'high': Decimal('249.8990'), 'low': Decimal('249.8940'), 'close': Decimal('249.8988'), 'volume': Decimal('46055000'), 'amount': Decimal('462740209.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.80568, 'REF(SMA(close, 5),1)': 249.76776, 'SMA(close, 20)': 249.55855499999998, 'REF(SMA(close, 20),1)': 249.52203500000002, 'SMA(close,5)': 249.80568, 'SMA(close,20)': 249.55855499999998}
[2025-08-18 18:08:31,159] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 18:08:31,159] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,159] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 18:08:31,159] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@40
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=36:41, 当前值=249.9244
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.84176000000002
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.84176000000002
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 40, 值: 249.84176000000002
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[40] = 249.84176000000002
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 18:08:31,159] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,159] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.80568
[2025-08-18 18:08:31,159] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.80568 (from index 39)
[2025-08-18 18:08:31,159] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@40
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=21:41, 当前值=249.9244
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.59110500000003
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.59110500000003
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 40, 值: 249.59110500000003
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[40] = 249.59110500000003
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,160] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.55855499999998
[2025-08-18 18:08:31,160] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.55855499999998 (from index 39)
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,160] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,160] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,160] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,160] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,160] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,160] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 18:08:31,160] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,161] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,161] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,161] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,161] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,161] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9179'), 'high': Decimal('249.9244'), 'low': Decimal('249.9174'), 'close': Decimal('249.9244'), 'volume': Decimal('2.219E+7'), 'amount': Decimal('222687917.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.84176000000002, 'REF(SMA(close, 5),1)': 249.80568, 'SMA(close, 20)': 249.59110500000003, 'REF(SMA(close, 20),1)': 249.55855499999998, 'SMA(close,5)': 249.84176000000002, 'SMA(close,20)': 249.59110500000003}
[2025-08-18 18:08:31,161] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 18:08:31,161] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,161] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 18:08:31,161] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@41
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=37:42, 当前值=249.9491
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.87668
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.87668
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 41, 值: 249.87668
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[41] = 249.87668
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 18:08:31,161] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,161] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.84176000000002
[2025-08-18 18:08:31,161] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.84176000000002 (from index 40)
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,161] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@41
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=22:42, 当前值=249.9491
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.623445
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.623445
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 41, 值: 249.623445
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[41] = 249.623445
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.59110500000003
[2025-08-18 18:08:31,162] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.59110500000003 (from index 40)
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,162] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,162] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 18:08:31,162] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,162] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,163] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,163] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,163] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,163] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9436'), 'high': Decimal('249.9491'), 'low': Decimal('249.9436'), 'close': Decimal('249.9491'), 'volume': Decimal('95925000'), 'amount': Decimal('959753281.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.87668, 'REF(SMA(close, 5),1)': 249.84176000000002, 'SMA(close, 20)': 249.623445, 'REF(SMA(close, 20),1)': 249.59110500000003, 'SMA(close,5)': 249.87668, 'SMA(close,20)': 249.623445}
[2025-08-18 18:08:31,163] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 18:08:31,163] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,163] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 18:08:31,163] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@42
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=38:43, 当前值=249.9722
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.91206000000003
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.91206000000003
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 42, 值: 249.91206000000003
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[42] = 249.91206000000003
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 18:08:31,163] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,163] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.87668
[2025-08-18 18:08:31,163] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.87668 (from index 41)
[2025-08-18 18:08:31,163] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@42
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=23:43, 当前值=249.9722
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.655955
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.655955
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 42, 值: 249.655955
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[42] = 249.655955
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 18:08:31,164] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,164] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.623445
[2025-08-18 18:08:31,164] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.623445 (from index 41)
[2025-08-18 18:08:31,164] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,164] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,164] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,164] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,164] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,164] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,164] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,165] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,165] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,165] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 18:08:31,165] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,165] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,165] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,165] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,165] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,165] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('249.9683'), 'high': Decimal('249.9725'), 'low': Decimal('249.9681'), 'close': Decimal('249.9722'), 'volume': Decimal('43013000'), 'amount': Decimal('433856317.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.91206000000003, 'REF(SMA(close, 5),1)': 249.87668, 'SMA(close, 20)': 249.655955, 'REF(SMA(close, 20),1)': 249.623445, 'SMA(close,5)': 249.91206000000003, 'SMA(close,20)': 249.655955}
[2025-08-18 18:08:31,165] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 18:08:31,165] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,165] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 18:08:31,165] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@43
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=39:44, 当前值=250.0504
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.95898000000003
[2025-08-18 18:08:31,165] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.95898000000003
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 43, 值: 249.95898000000003
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[43] = 249.95898000000003
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 18:08:31,166] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,166] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.91206000000003
[2025-08-18 18:08:31,166] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.91206000000003 (from index 42)
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@43
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=24:44, 当前值=250.0504
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.69149000000002
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.69149000000002
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 43, 值: 249.69149000000002
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[43] = 249.69149000000002
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 18:08:31,166] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,166] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.655955
[2025-08-18 18:08:31,166] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.655955 (from index 42)
[2025-08-18 18:08:31,166] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,166] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,166] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,166] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,166] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,166] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,167] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,167] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,167] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,167] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 18:08:31,167] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,167] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,167] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,167] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,167] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,167] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0326'), 'high': Decimal('250.0508'), 'low': Decimal('250.0326'), 'close': Decimal('250.0504'), 'volume': Decimal('95035000'), 'amount': Decimal('956973695.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.95898000000003, 'REF(SMA(close, 5),1)': 249.91206000000003, 'SMA(close, 20)': 249.69149000000002, 'REF(SMA(close, 20),1)': 249.655955, 'SMA(close,5)': 249.95898000000003, 'SMA(close,20)': 249.69149000000002}
[2025-08-18 18:08:31,167] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 18:08:31,167] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,167] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 18:08:31,167] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@44
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=40:45, 当前值=250.0767
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.99456
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=249.99456
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 44, 值: 249.99456
[2025-08-18 18:08:31,167] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[44] = 249.99456
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 18:08:31,168] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,168] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.95898000000003
[2025-08-18 18:08:31,168] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.95898000000003 (from index 43)
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@44
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=25:45, 当前值=250.0767
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.72518
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.72518
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 44, 值: 249.72518
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[44] = 249.72518
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 18:08:31,168] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,168] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.69149000000002
[2025-08-18 18:08:31,168] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.69149000000002 (from index 43)
[2025-08-18 18:08:31,168] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,168] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,168] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,168] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,168] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,168] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,168] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,168] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,169] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,169] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 18:08:31,169] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,169] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,169] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,169] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,169] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,169] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0697'), 'high': Decimal('250.0767'), 'low': Decimal('250.0692'), 'close': Decimal('250.0767'), 'volume': Decimal('108899600'), 'amount': Decimal('1089390586.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 249.99456, 'REF(SMA(close, 5),1)': 249.95898000000003, 'SMA(close, 20)': 249.72518, 'REF(SMA(close, 20),1)': 249.69149000000002, 'SMA(close,5)': 249.99456, 'SMA(close,20)': 249.72518}
[2025-08-18 18:08:31,169] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 18:08:31,169] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,169] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 18:08:31,169] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@45
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=41:46, 当前值=250.1020
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.03008
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.03008
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 45, 值: 250.03008
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,169] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[45] = 250.03008
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 18:08:31,170] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,170] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=249.99456
[2025-08-18 18:08:31,170] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=249.99456 (from index 44)
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@45
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=26:46, 当前值=250.1020
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.75868
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.75868
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 45, 值: 249.75868
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[45] = 249.75868
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 18:08:31,170] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,170] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.72518
[2025-08-18 18:08:31,170] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.72518 (from index 44)
[2025-08-18 18:08:31,170] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,170] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,170] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,170] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,170] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,170] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,170] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,170] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,171] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,171] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 18:08:31,171] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,171] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,171] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,171] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,171] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,171] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.0958'), 'high': Decimal('250.1046'), 'low': Decimal('250.0958'), 'close': Decimal('250.1020'), 'volume': Decimal('8.207E+7'), 'amount': Decimal('825521213.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.03008, 'REF(SMA(close, 5),1)': 249.99456, 'SMA(close, 20)': 249.75868, 'REF(SMA(close, 20),1)': 249.72518, 'SMA(close,5)': 250.03008, 'SMA(close,20)': 249.75868}
[2025-08-18 18:08:31,171] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 18:08:31,171] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,171] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 18:08:31,171] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@46
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=42:47, 当前值=250.1221
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.06468
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.06468
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 46, 值: 250.06468
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,171] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[46] = 250.06468
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 18:08:31,172] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,172] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.03008
[2025-08-18 18:08:31,172] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.03008 (from index 45)
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@46
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=27:47, 当前值=250.1221
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.79202500000002
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.79202500000002
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 46, 值: 249.79202500000002
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[46] = 249.79202500000002
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 18:08:31,172] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,172] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.75868
[2025-08-18 18:08:31,172] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.75868 (from index 45)
[2025-08-18 18:08:31,172] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,172] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,172] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,172] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,172] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,172] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,172] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,173] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,173] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,173] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 18:08:31,173] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,173] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,173] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,173] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,173] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,173] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1212'), 'high': Decimal('250.1311'), 'low': Decimal('250.1212'), 'close': Decimal('250.1221'), 'volume': Decimal('117790700'), 'amount': Decimal('1179404001.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.06468, 'REF(SMA(close, 5),1)': 250.03008, 'SMA(close, 20)': 249.79202500000002, 'REF(SMA(close, 20),1)': 249.75868, 'SMA(close,5)': 250.06468, 'SMA(close,20)': 249.79202500000002}
[2025-08-18 18:08:31,173] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 18:08:31,173] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,173] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 18:08:31,173] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@47
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=43:48, 当前值=250.1422
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.09868
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.09868
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 47, 值: 250.09868
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,173] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[47] = 250.09868
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 18:08:31,174] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,174] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.06468
[2025-08-18 18:08:31,174] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.06468 (from index 46)
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@47
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=28:48, 当前值=250.1422
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.82541
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.82541
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 47, 值: 249.82541
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[47] = 249.82541
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 18:08:31,174] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,174] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.79202500000002
[2025-08-18 18:08:31,174] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.79202500000002 (from index 46)
[2025-08-18 18:08:31,174] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,174] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,174] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,174] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,174] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,174] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,174] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,174] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,175] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,175] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 18:08:31,175] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,175] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,175] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,175] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,175] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,175] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1412'), 'high': Decimal('250.1434'), 'low': Decimal('250.1412'), 'close': Decimal('250.1422'), 'volume': Decimal('1.895E+7'), 'amount': Decimal('188956789.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.09868, 'REF(SMA(close, 5),1)': 250.06468, 'SMA(close, 20)': 249.82541, 'REF(SMA(close, 20),1)': 249.79202500000002, 'SMA(close,5)': 250.09868, 'SMA(close,20)': 249.82541}
[2025-08-18 18:08:31,175] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 18:08:31,175] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,175] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 18:08:31,175] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@48
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=44:49, 当前值=250.2206
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.13272
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.13272
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 48, 值: 250.13272
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[48] = 250.13272
[2025-08-18 18:08:31,175] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 18:08:31,176] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,176] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.09868
[2025-08-18 18:08:31,176] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.09868 (from index 47)
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@48
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=29:49, 当前值=250.2206
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.86171
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.86171
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 48, 值: 249.86171
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[48] = 249.86171
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 18:08:31,176] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,176] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.82541
[2025-08-18 18:08:31,176] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.82541 (from index 47)
[2025-08-18 18:08:31,176] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,176] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,176] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,176] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,176] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,176] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,176] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 18:08:31,176] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,177] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,177] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 18:08:31,177] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,177] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,177] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,177] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,177] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,177] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.1995'), 'high': Decimal('250.2206'), 'low': Decimal('250.1995'), 'close': Decimal('250.2206'), 'volume': Decimal('1.0754E+8'), 'amount': Decimal('1080372154.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.13272, 'REF(SMA(close, 5),1)': 250.09868, 'SMA(close, 20)': 249.86171, 'REF(SMA(close, 20),1)': 249.82541, 'SMA(close,5)': 250.13272, 'SMA(close,20)': 249.86171}
[2025-08-18 18:08:31,177] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 18:08:31,177] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,177] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 18:08:31,177] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@49
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=45:50, 当前值=250.2493
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.16724
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.16724
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 49, 值: 250.16724
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[49] = 250.16724
[2025-08-18 18:08:31,177] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 18:08:31,177] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.13272
[2025-08-18 18:08:31,178] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.13272 (from index 48)
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@49
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=30:50, 当前值=250.2493
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.896325
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.896325
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 49, 值: 249.896325
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[49] = 249.896325
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 18:08:31,178] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.86171
[2025-08-18 18:08:31,178] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.86171 (from index 48)
[2025-08-18 18:08:31,178] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,178] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,178] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,178] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 18:08:31,178] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,178] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,178] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 18:08:31,179] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,179] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,179] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,179] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,179] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,179] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.2403'), 'high': Decimal('250.2497'), 'low': Decimal('250.2403'), 'close': Decimal('250.2493'), 'volume': Decimal('6.730E+7'), 'amount': Decimal('678251568.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.16724, 'REF(SMA(close, 5),1)': 250.13272, 'SMA(close, 20)': 249.896325, 'REF(SMA(close, 20),1)': 249.86171, 'SMA(close,5)': 250.16724, 'SMA(close,20)': 249.896325}
[2025-08-18 18:08:31,179] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 18:08:31,179] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,179] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 18:08:31,179] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@50
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=46:51, 当前值=250.2924
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.20531999999997
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.20531999999997
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 50, 值: 250.20531999999997
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[50] = 250.20531999999997
[2025-08-18 18:08:31,179] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 18:08:31,179] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,179] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.16724
[2025-08-18 18:08:31,180] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.16724 (from index 49)
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@50
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=31:51, 当前值=250.2924
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.93301000000002
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.93301000000002
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 50, 值: 249.93301000000002
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[50] = 249.93301000000002
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 18:08:31,180] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,180] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.896325
[2025-08-18 18:08:31,180] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.896325 (from index 49)
[2025-08-18 18:08:31,180] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,180] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,180] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,180] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,180] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,180] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,180] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,180] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,181] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,181] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 18:08:31,181] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,181] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,181] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,181] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,181] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,181] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.2683'), 'high': Decimal('250.2925'), 'low': Decimal('250.2683'), 'close': Decimal('250.2924'), 'volume': Decimal('1.4737E+8'), 'amount': Decimal('1481932503.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.20531999999997, 'REF(SMA(close, 5),1)': 250.16724, 'SMA(close, 20)': 249.93301000000002, 'REF(SMA(close, 20),1)': 249.896325, 'SMA(close,5)': 250.20531999999997, 'SMA(close,20)': 249.93301000000002}
[2025-08-18 18:08:31,181] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 18:08:31,181] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,181] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 18:08:31,181] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@51
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=47:52, 当前值=250.3454
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.24998
[2025-08-18 18:08:31,181] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.24998
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 51, 值: 250.24998
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[51] = 250.24998
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 18:08:31,182] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,182] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.20531999999997
[2025-08-18 18:08:31,182] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.20531999999997 (from index 50)
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@51
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=32:52, 当前值=250.3454
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=249.97103
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=249.97103
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 51, 值: 249.97103
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[51] = 249.97103
[2025-08-18 18:08:31,182] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 18:08:31,182] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,182] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.93301000000002
[2025-08-18 18:08:31,182] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.93301000000002 (from index 50)
[2025-08-18 18:08:31,182] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,182] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,182] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,182] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,182] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,183] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,183] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,183] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,183] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 18:08:31,183] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,183] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,183] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,183] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,183] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,183] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.3116'), 'high': Decimal('250.3455'), 'low': Decimal('250.3116'), 'close': Decimal('250.3454'), 'volume': Decimal('122368000'), 'amount': Decimal('1230712926.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.24998, 'REF(SMA(close, 5),1)': 250.20531999999997, 'SMA(close, 20)': 249.97103, 'REF(SMA(close, 20),1)': 249.93301000000002, 'SMA(close,5)': 250.24998, 'SMA(close,20)': 249.97103}
[2025-08-18 18:08:31,183] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 18:08:31,183] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,183] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 18:08:31,183] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@52
[2025-08-18 18:08:31,183] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=48:53, 当前值=250.3724
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.29602
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.29602
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 52, 值: 250.29602
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[52] = 250.29602
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 18:08:31,184] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,184] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.24998
[2025-08-18 18:08:31,184] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.24998 (from index 51)
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@52
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=33:53, 当前值=250.3724
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.00922500000001
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.00922500000001
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 52, 值: 250.00922500000001
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[52] = 250.00922500000001
[2025-08-18 18:08:31,184] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 18:08:31,184] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,184] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=249.97103
[2025-08-18 18:08:31,184] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=249.97103 (from index 51)
[2025-08-18 18:08:31,184] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,184] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,184] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,185] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,185] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,185] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 18:08:31,185] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,185] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,185] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,185] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,185] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.3646'), 'high': Decimal('250.3724'), 'low': Decimal('250.3646'), 'close': Decimal('250.3724'), 'volume': Decimal('7.857E+7'), 'amount': Decimal('792389586.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.29602, 'REF(SMA(close, 5),1)': 250.24998, 'SMA(close, 20)': 250.00922500000001, 'REF(SMA(close, 20),1)': 249.97103, 'SMA(close,5)': 250.29602, 'SMA(close,20)': 250.00922500000001}
[2025-08-18 18:08:31,185] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 18:08:31,185] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,185] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 18:08:31,185] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,185] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@53
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=49:54, 当前值=250.4474
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.34138
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.34138
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 53, 值: 250.34138
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[53] = 250.34138
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 18:08:31,186] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,186] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.29602
[2025-08-18 18:08:31,186] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.29602 (from index 52)
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@53
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=34:54, 当前值=250.4474
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.05021000000002
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.05021000000002
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 53, 值: 250.05021000000002
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[53] = 250.05021000000002
[2025-08-18 18:08:31,186] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 18:08:31,186] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,186] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.00922500000001
[2025-08-18 18:08:31,186] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.00922500000001 (from index 52)
[2025-08-18 18:08:31,186] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,186] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,187] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,187] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,187] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,187] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 18:08:31,187] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,187] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,187] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,187] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,187] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.4317'), 'high': Decimal('250.4477'), 'low': Decimal('250.4317'), 'close': Decimal('250.4474'), 'volume': Decimal('2.1581E+8'), 'amount': Decimal('2179654615.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.34138, 'REF(SMA(close, 5),1)': 250.29602, 'SMA(close, 20)': 250.05021000000002, 'REF(SMA(close, 20),1)': 250.00922500000001, 'SMA(close,5)': 250.34138, 'SMA(close,20)': 250.05021000000002}
[2025-08-18 18:08:31,187] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 18:08:31,187] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,187] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 18:08:31,187] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 18:08:31,187] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@54
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=50:55, 当前值=250.4887
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.38926
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.38926
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 54, 值: 250.38926
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[54] = 250.38926
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 18:08:31,188] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,188] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.34138
[2025-08-18 18:08:31,188] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.34138 (from index 53)
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@54
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=35:55, 当前值=250.4887
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.089185
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.089185
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 54, 值: 250.089185
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[54] = 250.089185
[2025-08-18 18:08:31,188] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 18:08:31,188] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,188] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.05021000000002
[2025-08-18 18:08:31,188] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.05021000000002 (from index 53)
[2025-08-18 18:08:31,188] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,189] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,189] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,189] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,189] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,189] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,189] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,189] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,189] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 18:08:31,189] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,189] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,189] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,189] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 18:08:31,189] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,189] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,190] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,190] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,190] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,190] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.4665'), 'high': Decimal('250.4906'), 'low': Decimal('250.4665'), 'close': Decimal('250.4887'), 'volume': Decimal('2.1355E+8'), 'amount': Decimal('2158997186.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.38926, 'REF(SMA(close, 5),1)': 250.34138, 'SMA(close, 20)': 250.089185, 'REF(SMA(close, 20),1)': 250.05021000000002, 'SMA(close,5)': 250.38926, 'SMA(close,20)': 250.089185}
[2025-08-18 18:08:31,197] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 18:08:31,197] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,197] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 18:08:31,197] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 55
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@55
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=51:56, 当前值=250.5239
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.43555999999998
[2025-08-18 18:08:31,198] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.43555999999998
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 55, 值: 250.43555999999998
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[55] = 250.43555999999998
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 54 (当前索引: 55, 回溯周期: 1)
[2025-08-18 18:08:31,199] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,199] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.38926
[2025-08-18 18:08:31,199] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.38926 (from index 54)
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 55
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@55
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=36:56, 当前值=250.5239
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.12818000000001
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.12818000000001
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 55, 值: 250.12818000000001
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[55] = 250.12818000000001
[2025-08-18 18:08:31,199] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 54 (当前索引: 55, 回溯周期: 1)
[2025-08-18 18:08:31,199] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,199] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.089185
[2025-08-18 18:08:31,204] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.089185 (from index 54)
[2025-08-18 18:08:31,204] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,204] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,204] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,204] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,204] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,204] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,223] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,223] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,223] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 54 (当前索引: 55, 回溯周期: 1)
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,224] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,224] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 54 (当前索引: 55, 回溯周期: 1)
[2025-08-18 18:08:31,224] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,224] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,224] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,224] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,224] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,224] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5078'), 'high': Decimal('250.5239'), 'low': Decimal('250.5078'), 'close': Decimal('250.5239'), 'volume': Decimal('1.2909E+8'), 'amount': Decimal('1321640299.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.43555999999998, 'REF(SMA(close, 5),1)': 250.38926, 'SMA(close, 20)': 250.12818000000001, 'REF(SMA(close, 20),1)': 250.089185, 'SMA(close,5)': 250.43555999999998, 'SMA(close,20)': 250.12818000000001}
[2025-08-18 18:08:31,224] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 18:08:31,224] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,224] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 18:08:31,224] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 56
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@56
[2025-08-18 18:08:31,224] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=52:57, 当前值=250.5527
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.47701999999998
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.47701999999998
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 56, 值: 250.47701999999998
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[56] = 250.47701999999998
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 55 (当前索引: 56, 回溯周期: 1)
[2025-08-18 18:08:31,225] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,225] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.43555999999998
[2025-08-18 18:08:31,225] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.43555999999998 (from index 55)
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 56
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@56
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=37:57, 当前值=250.5527
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.16709
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.16709
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 56, 值: 250.16709
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[56] = 250.16709
[2025-08-18 18:08:31,225] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 55 (当前索引: 56, 回溯周期: 1)
[2025-08-18 18:08:31,225] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,225] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.12818000000001
[2025-08-18 18:08:31,226] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.12818000000001 (from index 55)
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,226] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 55 (当前索引: 56, 回溯周期: 1)
[2025-08-18 18:08:31,226] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 55 (当前索引: 56, 回溯周期: 1)
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,226] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,226] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,226] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5430'), 'high': Decimal('250.5527'), 'low': Decimal('250.5428'), 'close': Decimal('250.5527'), 'volume': Decimal('1.7117E+8'), 'amount': Decimal('1727060715.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.47701999999998, 'REF(SMA(close, 5),1)': 250.43555999999998, 'SMA(close, 20)': 250.16709, 'REF(SMA(close, 20),1)': 250.12818000000001, 'SMA(close,5)': 250.47701999999998, 'SMA(close,20)': 250.16709}
[2025-08-18 18:08:31,226] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 18:08:31,226] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,226] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 18:08:31,226] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 57
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@57
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=53:58, 当前值=250.5878
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.5201
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.5201
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 57, 值: 250.5201
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[57] = 250.5201
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 56 (当前索引: 57, 回溯周期: 1)
[2025-08-18 18:08:31,227] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,227] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.47701999999998
[2025-08-18 18:08:31,227] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.47701999999998 (from index 56)
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 57
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,227] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@57
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=38:58, 当前值=250.5878
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.20671499999997
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.20671499999997
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 57, 值: 250.20671499999997
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[57] = 250.20671499999997
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 56 (当前索引: 57, 回溯周期: 1)
[2025-08-18 18:08:31,228] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,228] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.16709
[2025-08-18 18:08:31,228] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.16709 (from index 56)
[2025-08-18 18:08:31,228] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,228] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,228] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,228] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,228] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,228] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,228] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 56 (当前索引: 57, 回溯周期: 1)
[2025-08-18 18:08:31,228] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,228] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,228] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,229] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 56 (当前索引: 57, 回溯周期: 1)
[2025-08-18 18:08:31,229] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,229] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,229] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,229] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,229] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,229] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.5717'), 'high': Decimal('250.5889'), 'low': Decimal('250.5717'), 'close': Decimal('250.5878'), 'volume': Decimal('4.998E+7'), 'amount': Decimal('504387828.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.5201, 'REF(SMA(close, 5),1)': 250.47701999999998, 'SMA(close, 20)': 250.20671499999997, 'REF(SMA(close, 20),1)': 250.16709, 'SMA(close,5)': 250.5201, 'SMA(close,20)': 250.20671499999997}
[2025-08-18 18:08:31,229] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 18:08:31,229] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,229] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 18:08:31,229] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,229] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,235] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 58
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@58
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=54:59, 当前值=250.6707
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.56475999999998
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.56475999999998
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 58, 值: 250.56475999999998
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[58] = 250.56475999999998
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 57 (当前索引: 58, 回溯周期: 1)
[2025-08-18 18:08:31,236] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,236] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.5201
[2025-08-18 18:08:31,236] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.5201 (from index 57)
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 58
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@58
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=39:59, 当前值=250.6707
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.24946
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.24946
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 58, 值: 250.24946
[2025-08-18 18:08:31,236] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,237] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[58] = 250.24946
[2025-08-18 18:08:31,237] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 57 (当前索引: 58, 回溯周期: 1)
[2025-08-18 18:08:31,237] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,237] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.20671499999997
[2025-08-18 18:08:31,237] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.20671499999997 (from index 57)
[2025-08-18 18:08:31,237] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,237] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,238] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,238] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,238] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,238] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,238] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 57 (当前索引: 58, 回溯周期: 1)
[2025-08-18 18:08:31,238] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,238] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 57 (当前索引: 58, 回溯周期: 1)
[2025-08-18 18:08:31,238] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,238] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,238] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,238] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,239] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.6466'), 'high': Decimal('250.6709'), 'low': Decimal('250.6461'), 'close': Decimal('250.6707'), 'volume': Decimal('18475000'), 'amount': Decimal('185745182.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.56475999999998, 'REF(SMA(close, 5),1)': 250.5201, 'SMA(close, 20)': 250.24946, 'REF(SMA(close, 20),1)': 250.20671499999997, 'SMA(close,5)': 250.56475999999998, 'SMA(close,20)': 250.24946}
[2025-08-18 18:08:31,239] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 18:08:31,239] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,239] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 18:08:31,239] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 59
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@59
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=55:60, 当前值=250.6982
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.60666
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.60666
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 59, 值: 250.60666
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[59] = 250.60666
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 58 (当前索引: 59, 回溯周期: 1)
[2025-08-18 18:08:31,239] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,239] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.56475999999998
[2025-08-18 18:08:31,239] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.56475999999998 (from index 58)
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 59
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,239] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@59
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=40:60, 当前值=250.6982
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.28942999999998
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.28942999999998
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 59, 值: 250.28942999999998
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[59] = 250.28942999999998
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 58 (当前索引: 59, 回溯周期: 1)
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.24946
[2025-08-18 18:08:31,240] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.24946 (from index 58)
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,240] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 58 (当前索引: 59, 回溯周期: 1)
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,240] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 58 (当前索引: 59, 回溯周期: 1)
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,240] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,241] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,241] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,241] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.6896'), 'high': Decimal('250.6994'), 'low': Decimal('250.6896'), 'close': Decimal('250.6982'), 'volume': Decimal('34589000'), 'amount': Decimal('347106277.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.60666, 'REF(SMA(close, 5),1)': 250.56475999999998, 'SMA(close, 20)': 250.28942999999998, 'REF(SMA(close, 20),1)': 250.24946, 'SMA(close,5)': 250.60666, 'SMA(close,20)': 250.28942999999998}
[2025-08-18 18:08:31,241] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 18:08:31,241] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,241] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 18:08:31,241] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 60
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@60
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=56:61, 当前值=250.7200
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.64587999999998
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.64587999999998
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 60, 值: 250.64587999999998
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[60] = 250.64587999999998
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 59 (当前索引: 60, 回溯周期: 1)
[2025-08-18 18:08:31,241] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,241] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.60666
[2025-08-18 18:08:31,241] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.60666 (from index 59)
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 60
[2025-08-18 18:08:31,241] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@60
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=41:61, 当前值=250.7200
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.32921000000002
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.32921000000002
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 60, 值: 250.32921000000002
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[60] = 250.32921000000002
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 59 (当前索引: 60, 回溯周期: 1)
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.28942999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.28942999999998 (from index 59)
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,242] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 59 (当前索引: 60, 回溯周期: 1)
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,242] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 59 (当前索引: 60, 回溯周期: 1)
[2025-08-18 18:08:31,242] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,242] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,243] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,243] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,243] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,243] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7171'), 'high': Decimal('250.7200'), 'low': Decimal('250.7112'), 'close': Decimal('250.7200'), 'volume': Decimal('9.926E+7'), 'amount': Decimal('996662518.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.64587999999998, 'REF(SMA(close, 5),1)': 250.60666, 'SMA(close, 20)': 250.32921000000002, 'REF(SMA(close, 20),1)': 250.28942999999998, 'SMA(close,5)': 250.64587999999998, 'SMA(close,20)': 250.32921000000002}
[2025-08-18 18:08:31,243] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 18:08:31,243] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,243] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 18:08:31,243] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 61
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@61
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=57:62, 当前值=250.7490
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.68514
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.68514
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 61, 值: 250.68514
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[61] = 250.68514
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 60 (当前索引: 61, 回溯周期: 1)
[2025-08-18 18:08:31,243] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,243] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.64587999999998
[2025-08-18 18:08:31,243] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.64587999999998 (from index 60)
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,243] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 61
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@61
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=42:62, 当前值=250.7490
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.36920500000002
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.36920500000002
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 61, 值: 250.36920500000002
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[61] = 250.36920500000002
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 60 (当前索引: 61, 回溯周期: 1)
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,244] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.32921000000002
[2025-08-18 18:08:31,244] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.32921000000002 (from index 60)
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,244] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,244] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,244] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,244] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 60 (当前索引: 61, 回溯周期: 1)
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,244] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,244] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 60 (当前索引: 61, 回溯周期: 1)
[2025-08-18 18:08:31,244] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,245] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,245] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,245] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,245] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,245] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7389'), 'high': Decimal('250.7496'), 'low': Decimal('250.7383'), 'close': Decimal('250.7490'), 'volume': Decimal('148906000'), 'amount': Decimal('1492783625.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.68514, 'REF(SMA(close, 5),1)': 250.64587999999998, 'SMA(close, 20)': 250.36920500000002, 'REF(SMA(close, 20),1)': 250.32921000000002, 'SMA(close,5)': 250.68514, 'SMA(close,20)': 250.36920500000002}
[2025-08-18 18:08:31,245] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 18:08:31,245] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,245] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 18:08:31,245] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 62
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@62
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=58:63, 当前值=250.7800
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.72358
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.72358
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 62, 值: 250.72358
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[62] = 250.72358
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 61 (当前索引: 62, 回溯周期: 1)
[2025-08-18 18:08:31,245] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,245] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.68514
[2025-08-18 18:08:31,245] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.68514 (from index 61)
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 62
[2025-08-18 18:08:31,245] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@62
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=43:63, 当前值=250.7800
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.409595
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.409595
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 62, 值: 250.409595
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[62] = 250.409595
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 61 (当前索引: 62, 回溯周期: 1)
[2025-08-18 18:08:31,246] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,246] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.36920500000002
[2025-08-18 18:08:31,246] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.36920500000002 (from index 61)
[2025-08-18 18:08:31,246] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,246] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,246] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,246] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,246] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,246] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,246] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 61 (当前索引: 62, 回溯周期: 1)
[2025-08-18 18:08:31,246] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,247] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,247] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 61 (当前索引: 62, 回溯周期: 1)
[2025-08-18 18:08:31,247] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,247] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,247] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,247] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,247] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,247] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.7679'), 'high': Decimal('250.7802'), 'low': Decimal('250.7679'), 'close': Decimal('250.7800'), 'volume': Decimal('105937100'), 'amount': Decimal('1063192233.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.72358, 'REF(SMA(close, 5),1)': 250.68514, 'SMA(close, 20)': 250.409595, 'REF(SMA(close, 20),1)': 250.36920500000002, 'SMA(close,5)': 250.72358, 'SMA(close,20)': 250.409595}
[2025-08-18 18:08:31,247] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 18:08:31,247] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,247] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 18:08:31,247] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 63
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@63
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=59:64, 当前值=250.8706
[2025-08-18 18:08:31,247] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.76356
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.76356
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 63, 值: 250.76356
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[63] = 250.76356
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 62 (当前索引: 63, 回溯周期: 1)
[2025-08-18 18:08:31,248] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,248] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.72358
[2025-08-18 18:08:31,248] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.72358 (from index 62)
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 63
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@63
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=44:64, 当前值=250.8706
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.450605
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.450605
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 63, 值: 250.450605
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[63] = 250.450605
[2025-08-18 18:08:31,248] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 62 (当前索引: 63, 回溯周期: 1)
[2025-08-18 18:08:31,248] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,248] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.409595
[2025-08-18 18:08:31,248] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.409595 (from index 62)
[2025-08-18 18:08:31,248] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,248] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,248] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,249] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,249] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 62 (当前索引: 63, 回溯周期: 1)
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,249] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 62 (当前索引: 63, 回溯周期: 1)
[2025-08-18 18:08:31,249] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,249] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,249] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,249] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,249] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.8427'), 'high': Decimal('250.8706'), 'low': Decimal('250.8420'), 'close': Decimal('250.8706'), 'volume': Decimal('2.8872E+8'), 'amount': Decimal('2898694381.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.76356, 'REF(SMA(close, 5),1)': 250.72358, 'SMA(close, 20)': 250.450605, 'REF(SMA(close, 20),1)': 250.409595, 'SMA(close,5)': 250.76356, 'SMA(close,20)': 250.450605}
[2025-08-18 18:08:31,249] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 18:08:31,249] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,249] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 18:08:31,249] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 64
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,249] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@64
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=60:65, 当前值=250.9464
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.8132
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.8132
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 64, 值: 250.8132
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[64] = 250.8132
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 63 (当前索引: 64, 回溯周期: 1)
[2025-08-18 18:08:31,250] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,250] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.76356
[2025-08-18 18:08:31,250] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.76356 (from index 63)
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 64
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@64
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=45:65, 当前值=250.9464
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.49409
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.49409
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 64, 值: 250.49409
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[64] = 250.49409
[2025-08-18 18:08:31,250] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 63 (当前索引: 64, 回溯周期: 1)
[2025-08-18 18:08:31,250] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,250] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.450605
[2025-08-18 18:08:31,250] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.450605 (from index 63)
[2025-08-18 18:08:31,250] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,250] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,250] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,250] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,250] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,251] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,251] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 63 (当前索引: 64, 回溯周期: 1)
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,251] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,251] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 63 (当前索引: 64, 回溯周期: 1)
[2025-08-18 18:08:31,251] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,251] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,251] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,251] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,251] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,251] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.8896'), 'high': Decimal('250.9465'), 'low': Decimal('250.8896'), 'close': Decimal('250.9464'), 'volume': Decimal('45913500'), 'amount': Decimal('461597021.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.8132, 'REF(SMA(close, 5),1)': 250.76356, 'SMA(close, 20)': 250.49409, 'REF(SMA(close, 20),1)': 250.450605, 'SMA(close,5)': 250.8132, 'SMA(close,20)': 250.49409}
[2025-08-18 18:08:31,251] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 18:08:31,251] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,251] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 18:08:31,251] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 65
[2025-08-18 18:08:31,251] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@65
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=61:66, 当前值=250.9807
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.86534
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.86534
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 65, 值: 250.86534
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[65] = 250.86534
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 64 (当前索引: 65, 回溯周期: 1)
[2025-08-18 18:08:31,252] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,252] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.8132
[2025-08-18 18:08:31,252] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.8132 (from index 64)
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 65
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@65
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=46:66, 当前值=250.9807
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.538025
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.538025
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 65, 值: 250.538025
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[65] = 250.538025
[2025-08-18 18:08:31,252] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 64 (当前索引: 65, 回溯周期: 1)
[2025-08-18 18:08:31,252] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,252] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.49409
[2025-08-18 18:08:31,252] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.49409 (from index 64)
[2025-08-18 18:08:31,252] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,252] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,252] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,252] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,252] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,253] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,253] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 64 (当前索引: 65, 回溯周期: 1)
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,253] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,253] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 64 (当前索引: 65, 回溯周期: 1)
[2025-08-18 18:08:31,253] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,253] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,253] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,253] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,253] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,253] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.9653'), 'high': Decimal('250.9808'), 'low': Decimal('250.9653'), 'close': Decimal('250.9807'), 'volume': Decimal('26341400'), 'amount': Decimal('265117552.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.86534, 'REF(SMA(close, 5),1)': 250.8132, 'SMA(close, 20)': 250.538025, 'REF(SMA(close, 20),1)': 250.49409, 'SMA(close,5)': 250.86534, 'SMA(close,20)': 250.538025}
[2025-08-18 18:08:31,253] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 18:08:31,253] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,253] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 18:08:31,253] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 66
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@66
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=62:67, 当前值=251.0230
[2025-08-18 18:08:31,253] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.92014
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.92014
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 66, 值: 250.92014
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[66] = 250.92014
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 65 (当前索引: 66, 回溯周期: 1)
[2025-08-18 18:08:31,254] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,254] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.86534
[2025-08-18 18:08:31,254] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.86534 (from index 65)
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 66
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@66
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=47:67, 当前值=251.0230
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.58307
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.58307
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 66, 值: 250.58307
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[66] = 250.58307
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 65 (当前索引: 66, 回溯周期: 1)
[2025-08-18 18:08:31,254] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,254] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.538025
[2025-08-18 18:08:31,254] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.538025 (from index 65)
[2025-08-18 18:08:31,254] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,254] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,254] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,254] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,254] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,254] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,255] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,255] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 65 (当前索引: 66, 回溯周期: 1)
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,255] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,255] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 65 (当前索引: 66, 回溯周期: 1)
[2025-08-18 18:08:31,255] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,255] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,255] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,255] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,255] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,255] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('250.9996'), 'high': Decimal('251.0234'), 'low': Decimal('250.9996'), 'close': Decimal('251.0230'), 'volume': Decimal('1.1314E+8'), 'amount': Decimal('1142073365.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.92014, 'REF(SMA(close, 5),1)': 250.86534, 'SMA(close, 20)': 250.58307, 'REF(SMA(close, 20),1)': 250.538025, 'SMA(close,5)': 250.92014, 'SMA(close,20)': 250.58307}
[2025-08-18 18:08:31,255] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 18:08:31,255] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,255] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 18:08:31,255] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 67
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@67
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=63:68, 当前值=251.0540
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.97494
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=250.97494
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 67, 值: 250.97494
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,255] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[67] = 250.97494
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 66 (当前索引: 67, 回溯周期: 1)
[2025-08-18 18:08:31,256] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,256] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.92014
[2025-08-18 18:08:31,256] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.92014 (from index 66)
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 67
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@67
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=48:68, 当前值=251.0540
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.62866
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.62866
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 67, 值: 250.62866
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[67] = 250.62866
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 66 (当前索引: 67, 回溯周期: 1)
[2025-08-18 18:08:31,256] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,256] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.58307
[2025-08-18 18:08:31,256] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.58307 (from index 66)
[2025-08-18 18:08:31,256] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,256] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,256] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,256] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,256] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,256] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,256] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,256] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 66 (当前索引: 67, 回溯周期: 1)
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,257] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,257] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 66 (当前索引: 67, 回溯周期: 1)
[2025-08-18 18:08:31,257] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,257] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,257] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,257] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,257] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,257] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.0419'), 'high': Decimal('251.0541'), 'low': Decimal('251.0390'), 'close': Decimal('251.0540'), 'volume': Decimal('2.752E+7'), 'amount': Decimal('281001609.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 250.97494, 'REF(SMA(close, 5),1)': 250.92014, 'SMA(close, 20)': 250.62866, 'REF(SMA(close, 20),1)': 250.58307, 'SMA(close,5)': 250.97494, 'SMA(close,20)': 250.62866}
[2025-08-18 18:08:31,257] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 18:08:31,257] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,257] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 18:08:31,257] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 68
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@68
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=64:69, 当前值=251.1208
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.02498
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.02498
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 68, 值: 251.02498
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,257] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[68] = 251.02498
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 67 (当前索引: 68, 回溯周期: 1)
[2025-08-18 18:08:31,258] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,258] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=250.97494
[2025-08-18 18:08:31,258] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=250.97494 (from index 67)
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 68
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@68
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=49:69, 当前值=251.1208
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.67367
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.67367
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 68, 值: 250.67367
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[68] = 250.67367
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 67 (当前索引: 68, 回溯周期: 1)
[2025-08-18 18:08:31,258] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,258] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.62866
[2025-08-18 18:08:31,258] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.62866 (from index 67)
[2025-08-18 18:08:31,258] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,258] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,258] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,258] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,258] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,258] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,258] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,258] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 67 (当前索引: 68, 回溯周期: 1)
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,259] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,259] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 67 (当前索引: 68, 回溯周期: 1)
[2025-08-18 18:08:31,259] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,259] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,259] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,259] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,259] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,259] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1108'), 'high': Decimal('251.1208'), 'low': Decimal('251.1108'), 'close': Decimal('251.1208'), 'volume': Decimal('65507500'), 'amount': Decimal('665251411.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.02498, 'REF(SMA(close, 5),1)': 250.97494, 'SMA(close, 20)': 250.67367, 'REF(SMA(close, 20),1)': 250.62866, 'SMA(close,5)': 251.02498, 'SMA(close,20)': 250.67367}
[2025-08-18 18:08:31,259] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 18:08:31,259] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,259] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 18:08:31,259] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 69
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@69
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=65:70, 当前值=251.1449
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.06468
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.06468
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 69, 值: 251.06468
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,259] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[69] = 251.06468
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 68 (当前索引: 69, 回溯周期: 1)
[2025-08-18 18:08:31,260] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,260] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.02498
[2025-08-18 18:08:31,260] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.02498 (from index 68)
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 69
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@69
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=50:70, 当前值=251.1449
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.71845
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.71845
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 69, 值: 250.71845
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[69] = 250.71845
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 68 (当前索引: 69, 回溯周期: 1)
[2025-08-18 18:08:31,260] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,260] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.67367
[2025-08-18 18:08:31,260] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.67367 (from index 68)
[2025-08-18 18:08:31,260] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,260] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,260] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,260] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,260] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,260] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,260] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,260] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 68 (当前索引: 69, 回溯周期: 1)
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,261] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,261] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 68 (当前索引: 69, 回溯周期: 1)
[2025-08-18 18:08:31,261] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,261] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,261] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,261] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,261] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,261] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1396'), 'high': Decimal('251.1449'), 'low': Decimal('251.1385'), 'close': Decimal('251.1449'), 'volume': Decimal('50112300'), 'amount': Decimal('502588797.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.06468, 'REF(SMA(close, 5),1)': 251.02498, 'SMA(close, 20)': 250.71845, 'REF(SMA(close, 20),1)': 250.67367, 'SMA(close,5)': 251.06468, 'SMA(close,20)': 250.71845}
[2025-08-18 18:08:31,261] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 18:08:31,261] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,261] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 18:08:31,261] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 70
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@70
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=66:71, 当前值=251.1808
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.1047
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.1047
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 70, 值: 251.1047
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[70] = 251.1047
[2025-08-18 18:08:31,261] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 69 (当前索引: 70, 回溯周期: 1)
[2025-08-18 18:08:31,262] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,262] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.06468
[2025-08-18 18:08:31,262] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.06468 (from index 69)
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 70
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@70
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=51:71, 当前值=251.1808
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.76287000000002
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.76287000000002
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 70, 值: 250.76287000000002
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[70] = 250.76287000000002
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 69 (当前索引: 70, 回溯周期: 1)
[2025-08-18 18:08:31,262] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,262] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.71845
[2025-08-18 18:08:31,262] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.71845 (from index 69)
[2025-08-18 18:08:31,262] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,262] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,262] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,262] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,262] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,262] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,262] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 69 (当前索引: 70, 回溯周期: 1)
[2025-08-18 18:08:31,262] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,263] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,263] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 69 (当前索引: 70, 回溯周期: 1)
[2025-08-18 18:08:31,263] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,263] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,263] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,263] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,263] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,263] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.1639'), 'high': Decimal('251.1810'), 'low': Decimal('251.1639'), 'close': Decimal('251.1808'), 'volume': Decimal('93941800'), 'amount': Decimal('948066184.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.1047, 'REF(SMA(close, 5),1)': 251.06468, 'SMA(close, 20)': 250.76287000000002, 'REF(SMA(close, 20),1)': 250.71845, 'SMA(close,5)': 251.1047, 'SMA(close,20)': 250.76287000000002}
[2025-08-18 18:08:31,263] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 18:08:31,263] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,263] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 18:08:31,263] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 71
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@71
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=67:72, 当前值=251.2095
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.142
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.142
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 71, 值: 251.142
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[71] = 251.142
[2025-08-18 18:08:31,263] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 70 (当前索引: 71, 回溯周期: 1)
[2025-08-18 18:08:31,264] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,264] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.1047
[2025-08-18 18:08:31,264] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.1047 (from index 70)
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 71
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@71
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=52:72, 当前值=251.2095
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.80607500000002
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.80607500000002
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 71, 值: 250.80607500000002
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[71] = 250.80607500000002
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 70 (当前索引: 71, 回溯周期: 1)
[2025-08-18 18:08:31,264] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,264] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.76287000000002
[2025-08-18 18:08:31,264] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.76287000000002 (from index 70)
[2025-08-18 18:08:31,264] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.142
[2025-08-18 18:08:31,264] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.142
[2025-08-18 18:08:31,264] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,264] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,264] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,264] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,265] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.142
[2025-08-18 18:08:31,265] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.142
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 70 (当前索引: 71, 回溯周期: 1)
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,265] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,265] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 70 (当前索引: 71, 回溯周期: 1)
[2025-08-18 18:08:31,265] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.142
[2025-08-18 18:08:31,265] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.142
[2025-08-18 18:08:31,265] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,265] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,265] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,265] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2005'), 'high': Decimal('251.2096'), 'low': Decimal('251.2005'), 'close': Decimal('251.2095'), 'volume': Decimal('162611500'), 'amount': Decimal('1636201596.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.142, 'REF(SMA(close, 5),1)': 251.1047, 'SMA(close, 20)': 250.80607500000002, 'REF(SMA(close, 20),1)': 250.76287000000002, 'SMA(close,5)': 251.142, 'SMA(close,20)': 250.80607500000002}
[2025-08-18 18:08:31,265] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 18:08:31,265] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,265] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 18:08:31,265] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 72
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@72
[2025-08-18 18:08:31,265] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=68:73, 当前值=251.2355
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.17829999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.17829999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 72, 值: 251.17829999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[72] = 251.17829999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 71 (当前索引: 72, 回溯周期: 1)
[2025-08-18 18:08:31,266] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.142
[2025-08-18 18:08:31,266] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.142
[2025-08-18 18:08:31,266] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.142 (from index 71)
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 72
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@72
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=53:73, 当前值=251.2355
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.84922999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.84922999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 72, 值: 250.84922999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[72] = 250.84922999999998
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 71 (当前索引: 72, 回溯周期: 1)
[2025-08-18 18:08:31,266] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,266] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.80607500000002
[2025-08-18 18:08:31,266] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.80607500000002 (from index 71)
[2025-08-18 18:08:31,266] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,266] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,266] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,266] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,266] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,266] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,267] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 71 (当前索引: 72, 回溯周期: 1)
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,267] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 71 (当前索引: 72, 回溯周期: 1)
[2025-08-18 18:08:31,267] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,267] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,267] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2283'), 'high': Decimal('251.2355'), 'low': Decimal('251.2283'), 'close': Decimal('251.2355'), 'volume': Decimal('75964300'), 'amount': Decimal('762983810.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.17829999999998, 'REF(SMA(close, 5),1)': 251.142, 'SMA(close, 20)': 250.84922999999998, 'REF(SMA(close, 20),1)': 250.80607500000002, 'SMA(close,5)': 251.17829999999998, 'SMA(close,20)': 250.84922999999998}
[2025-08-18 18:08:31,267] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 18:08:31,267] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,267] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 18:08:31,267] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 73
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@73
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=69:74, 当前值=251.3088
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.2159
[2025-08-18 18:08:31,267] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.2159
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 73, 值: 251.2159
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[73] = 251.2159
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 72 (当前索引: 73, 回溯周期: 1)
[2025-08-18 18:08:31,268] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.17829999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.17829999999998 (from index 72)
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 73
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@73
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=54:74, 当前值=251.3088
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.89229999999998
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.89229999999998
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 73, 值: 250.89229999999998
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[73] = 250.89229999999998
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 72 (当前索引: 73, 回溯周期: 1)
[2025-08-18 18:08:31,268] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.84922999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.84922999999998 (from index 72)
[2025-08-18 18:08:31,268] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,268] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,268] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,268] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,268] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,269] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,269] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 72 (当前索引: 73, 回溯周期: 1)
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,269] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,269] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 72 (当前索引: 73, 回溯周期: 1)
[2025-08-18 18:08:31,269] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,269] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,269] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,269] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,269] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,269] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.2919'), 'high': Decimal('251.3088'), 'low': Decimal('251.2919'), 'close': Decimal('251.3088'), 'volume': Decimal('203458100'), 'amount': Decimal('2048993831.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.2159, 'REF(SMA(close, 5),1)': 251.17829999999998, 'SMA(close, 20)': 250.89229999999998, 'REF(SMA(close, 20),1)': 250.84922999999998, 'SMA(close,5)': 251.2159, 'SMA(close,20)': 250.89229999999998}
[2025-08-18 18:08:31,269] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 18:08:31,269] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,269] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 18:08:31,269] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 74
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@74
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=70:75, 当前值=251.3348
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.25387999999998
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.25387999999998
[2025-08-18 18:08:31,269] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 74, 值: 251.25387999999998
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[74] = 251.25387999999998
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 73 (当前索引: 74, 回溯周期: 1)
[2025-08-18 18:08:31,270] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,270] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.2159
[2025-08-18 18:08:31,270] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.2159 (from index 73)
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 74
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@74
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=55:75, 当前值=251.3348
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.934605
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.934605
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 74, 值: 250.934605
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[74] = 250.934605
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 73 (当前索引: 74, 回溯周期: 1)
[2025-08-18 18:08:31,270] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,270] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.89229999999998
[2025-08-18 18:08:31,270] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.89229999999998 (from index 73)
[2025-08-18 18:08:31,270] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,270] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,270] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,270] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,270] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,270] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,271] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,271] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 73 (当前索引: 74, 回溯周期: 1)
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,271] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,271] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 73 (当前索引: 74, 回溯周期: 1)
[2025-08-18 18:08:31,271] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,271] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,271] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,271] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,271] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,271] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3299'), 'high': Decimal('251.3349'), 'low': Decimal('251.3299'), 'close': Decimal('251.3348'), 'volume': Decimal('54674600'), 'amount': Decimal('549802386.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.25387999999998, 'REF(SMA(close, 5),1)': 251.2159, 'SMA(close, 20)': 250.934605, 'REF(SMA(close, 20),1)': 250.89229999999998, 'SMA(close,5)': 251.25387999999998, 'SMA(close,20)': 250.934605}
[2025-08-18 18:08:31,271] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 18:08:31,271] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,271] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 18:08:31,271] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 75
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@75
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=71:76, 当前值=251.3637
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.29046
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.29046
[2025-08-18 18:08:31,271] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 75, 值: 251.29046
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[75] = 251.29046
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 74 (当前索引: 75, 回溯周期: 1)
[2025-08-18 18:08:31,272] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,272] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.25387999999998
[2025-08-18 18:08:31,272] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.25387999999998 (from index 74)
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 75
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@75
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=56:76, 当前值=251.3637
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=250.976595
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=250.976595
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 75, 值: 250.976595
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[75] = 250.976595
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 74 (当前索引: 75, 回溯周期: 1)
[2025-08-18 18:08:31,272] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,272] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.934605
[2025-08-18 18:08:31,272] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.934605 (from index 74)
[2025-08-18 18:08:31,272] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,272] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,272] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,272] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,272] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,272] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,273] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,273] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 74 (当前索引: 75, 回溯周期: 1)
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,273] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,273] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 74 (当前索引: 75, 回溯周期: 1)
[2025-08-18 18:08:31,273] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,273] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,273] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,273] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,273] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,273] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3536'), 'high': Decimal('251.3641'), 'low': Decimal('251.3536'), 'close': Decimal('251.3637'), 'volume': Decimal('5.244E+7'), 'amount': Decimal('528485128.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.29046, 'REF(SMA(close, 5),1)': 251.25387999999998, 'SMA(close, 20)': 250.976595, 'REF(SMA(close, 20),1)': 250.934605, 'SMA(close,5)': 251.29046, 'SMA(close,20)': 250.976595}
[2025-08-18 18:08:31,273] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 18:08:31,273] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,273] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 18:08:31,273] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 76
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@76
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=72:77, 当前值=251.3851
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.32558
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.32558
[2025-08-18 18:08:31,273] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 76, 值: 251.32558
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[76] = 251.32558
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 75 (当前索引: 76, 回溯周期: 1)
[2025-08-18 18:08:31,274] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,274] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.29046
[2025-08-18 18:08:31,274] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.29046 (from index 75)
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 76
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@76
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=57:77, 当前值=251.3851
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.018215
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.018215
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 76, 值: 251.018215
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[76] = 251.018215
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 75 (当前索引: 76, 回溯周期: 1)
[2025-08-18 18:08:31,274] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,274] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=250.976595
[2025-08-18 18:08:31,274] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=250.976595 (from index 75)
[2025-08-18 18:08:31,274] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,274] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,274] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,274] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,274] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,274] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,275] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,275] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 75 (当前索引: 76, 回溯周期: 1)
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,275] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,275] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 75 (当前索引: 76, 回溯周期: 1)
[2025-08-18 18:08:31,275] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,275] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,275] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,275] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,275] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,275] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.3826'), 'high': Decimal('251.3867'), 'low': Decimal('251.3822'), 'close': Decimal('251.3851'), 'volume': Decimal('119349600'), 'amount': Decimal('1196950502.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.32558, 'REF(SMA(close, 5),1)': 251.29046, 'SMA(close, 20)': 251.018215, 'REF(SMA(close, 20),1)': 250.976595, 'SMA(close,5)': 251.32558, 'SMA(close,20)': 251.018215}
[2025-08-18 18:08:31,275] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 18:08:31,275] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,275] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 18:08:31,275] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 77
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@77
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=73:78, 当前值=251.4001
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.3585
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.3585
[2025-08-18 18:08:31,275] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 77, 值: 251.3585
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[77] = 251.3585
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 76 (当前索引: 77, 回溯周期: 1)
[2025-08-18 18:08:31,276] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,276] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.32558
[2025-08-18 18:08:31,276] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.32558 (from index 76)
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 77
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@77
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=58:78, 当前值=251.4001
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.05883
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.05883
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 77, 值: 251.05883
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[77] = 251.05883
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 76 (当前索引: 77, 回溯周期: 1)
[2025-08-18 18:08:31,276] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,276] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.018215
[2025-08-18 18:08:31,276] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.018215 (from index 76)
[2025-08-18 18:08:31,276] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,276] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,276] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,276] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,276] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,276] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,277] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,277] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 76 (当前索引: 77, 回溯周期: 1)
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,277] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,277] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 76 (当前索引: 77, 回溯周期: 1)
[2025-08-18 18:08:31,277] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,277] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,277] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,277] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,277] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,277] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4038'), 'high': Decimal('251.4038'), 'low': Decimal('251.3995'), 'close': Decimal('251.4001'), 'volume': Decimal('13522700'), 'amount': Decimal('136298163.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.3585, 'REF(SMA(close, 5),1)': 251.32558, 'SMA(close, 20)': 251.05883, 'REF(SMA(close, 20),1)': 251.018215, 'SMA(close,5)': 251.3585, 'SMA(close,20)': 251.05883}
[2025-08-18 18:08:31,277] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 18:08:31,277] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,277] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 18:08:31,277] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 78
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@78
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=74:79, 当前值=251.4679
[2025-08-18 18:08:31,277] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.39032000000003
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.39032000000003
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 78, 值: 251.39032000000003
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[78] = 251.39032000000003
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 77 (当前索引: 78, 回溯周期: 1)
[2025-08-18 18:08:31,278] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,278] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.3585
[2025-08-18 18:08:31,278] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.3585 (from index 77)
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 78
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@78
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=59:79, 当前值=251.4679
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.09868999999998
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.09868999999998
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 78, 值: 251.09868999999998
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[78] = 251.09868999999998
[2025-08-18 18:08:31,278] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 77 (当前索引: 78, 回溯周期: 1)
[2025-08-18 18:08:31,278] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,278] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.05883
[2025-08-18 18:08:31,278] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.05883 (from index 77)
[2025-08-18 18:08:31,278] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,278] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,278] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,278] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,278] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,279] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,279] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 77 (当前索引: 78, 回溯周期: 1)
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,279] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,279] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 77 (当前索引: 78, 回溯周期: 1)
[2025-08-18 18:08:31,279] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,279] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,279] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,279] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,279] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,279] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4564'), 'high': Decimal('251.4686'), 'low': Decimal('251.4549'), 'close': Decimal('251.4679'), 'volume': Decimal('109953200'), 'amount': Decimal('1102470458.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.39032000000003, 'REF(SMA(close, 5),1)': 251.3585, 'SMA(close, 20)': 251.09868999999998, 'REF(SMA(close, 20),1)': 251.05883, 'SMA(close,5)': 251.39032000000003, 'SMA(close,20)': 251.09868999999998}
[2025-08-18 18:08:31,279] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 18:08:31,279] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,279] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 18:08:31,279] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 79
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@79
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=75:80, 当前值=251.4810
[2025-08-18 18:08:31,279] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.41956
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.41956
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 79, 值: 251.41956
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[79] = 251.41956
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 78 (当前索引: 79, 回溯周期: 1)
[2025-08-18 18:08:31,280] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,280] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.39032000000003
[2025-08-18 18:08:31,280] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.39032000000003 (from index 78)
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 79
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@79
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=60:80, 当前值=251.4810
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.13782999999998
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.13782999999998
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 79, 值: 251.13782999999998
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[79] = 251.13782999999998
[2025-08-18 18:08:31,280] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 78 (当前索引: 79, 回溯周期: 1)
[2025-08-18 18:08:31,280] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,280] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.09868999999998
[2025-08-18 18:08:31,280] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.09868999999998 (from index 78)
[2025-08-18 18:08:31,280] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,281] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,281] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 78 (当前索引: 79, 回溯周期: 1)
[2025-08-18 18:08:31,281] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,281] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 78 (当前索引: 79, 回溯周期: 1)
[2025-08-18 18:08:31,281] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,281] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,281] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,281] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4869'), 'high': Decimal('251.4869'), 'low': Decimal('251.4797'), 'close': Decimal('251.4810'), 'volume': Decimal('33824800'), 'amount': Decimal('341257649.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.41956, 'REF(SMA(close, 5),1)': 251.39032000000003, 'SMA(close, 20)': 251.13782999999998, 'REF(SMA(close, 20),1)': 251.09868999999998, 'SMA(close,5)': 251.41956, 'SMA(close,20)': 251.13782999999998}
[2025-08-18 18:08:31,281] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 18:08:31,281] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,281] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 18:08:31,281] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 80
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@80
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=76:81, 当前值=251.5044
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.4477
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.4477
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 80, 值: 251.4477
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[80] = 251.4477
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 79 (当前索引: 80, 回溯周期: 1)
[2025-08-18 18:08:31,282] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,282] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.41956
[2025-08-18 18:08:31,282] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.41956 (from index 79)
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 80
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@80
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=61:81, 当前值=251.5044
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.17705
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.17705
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 80, 值: 251.17705
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[80] = 251.17705
[2025-08-18 18:08:31,282] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 79 (当前索引: 80, 回溯周期: 1)
[2025-08-18 18:08:31,282] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,282] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.13782999999998
[2025-08-18 18:08:31,283] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.13782999999998 (from index 79)
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,283] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 79 (当前索引: 80, 回溯周期: 1)
[2025-08-18 18:08:31,283] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 79 (当前索引: 80, 回溯周期: 1)
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,283] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,283] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,283] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.4998'), 'high': Decimal('251.5063'), 'low': Decimal('251.4959'), 'close': Decimal('251.5044'), 'volume': Decimal('30428600'), 'amount': Decimal('307237345.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.4477, 'REF(SMA(close, 5),1)': 251.41956, 'SMA(close, 20)': 251.17705, 'REF(SMA(close, 20),1)': 251.13782999999998, 'SMA(close,5)': 251.4477, 'SMA(close,20)': 251.17705}
[2025-08-18 18:08:31,283] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 18:08:31,283] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,283] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 18:08:31,283] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 81
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@81
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=77:82, 当前值=251.5111
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.47289999999998
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.47289999999998
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 81, 值: 251.47289999999998
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[81] = 251.47289999999998
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 80 (当前索引: 81, 回溯周期: 1)
[2025-08-18 18:08:31,284] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,284] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.4477
[2025-08-18 18:08:31,284] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.4477 (from index 80)
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 81
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@81
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=62:82, 当前值=251.5111
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.215155
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.215155
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 81, 值: 251.215155
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[81] = 251.215155
[2025-08-18 18:08:31,284] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 80 (当前索引: 81, 回溯周期: 1)
[2025-08-18 18:08:31,284] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,284] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.17705
[2025-08-18 18:08:31,284] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.17705 (from index 80)
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,285] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 80 (当前索引: 81, 回溯周期: 1)
[2025-08-18 18:08:31,285] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 80 (当前索引: 81, 回溯周期: 1)
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,285] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,285] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,285] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5232'), 'high': Decimal('251.5240'), 'low': Decimal('251.5105'), 'close': Decimal('251.5111'), 'volume': Decimal('91647000'), 'amount': Decimal('917650865.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.47289999999998, 'REF(SMA(close, 5),1)': 251.4477, 'SMA(close, 20)': 251.215155, 'REF(SMA(close, 20),1)': 251.17705, 'SMA(close,5)': 251.47289999999998, 'SMA(close,20)': 251.215155}
[2025-08-18 18:08:31,285] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 18:08:31,285] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,285] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 18:08:31,285] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,285] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 82
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@82
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=78:83, 当前值=251.5233
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.49754
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.49754
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 82, 值: 251.49754
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[82] = 251.49754
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 81 (当前索引: 82, 回溯周期: 1)
[2025-08-18 18:08:31,286] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,286] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.47289999999998
[2025-08-18 18:08:31,286] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.47289999999998 (from index 81)
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 82
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@82
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=63:83, 当前值=251.5233
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.25232
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.25232
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 82, 值: 251.25232
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[82] = 251.25232
[2025-08-18 18:08:31,286] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 81 (当前索引: 82, 回溯周期: 1)
[2025-08-18 18:08:31,286] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,286] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.215155
[2025-08-18 18:08:31,286] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.215155 (from index 81)
[2025-08-18 18:08:31,286] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,286] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,287] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,287] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,287] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,287] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,287] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 81 (当前索引: 82, 回溯周期: 1)
[2025-08-18 18:08:31,287] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,287] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 81 (当前索引: 82, 回溯周期: 1)
[2025-08-18 18:08:31,287] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,287] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,287] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,287] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,287] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5298'), 'high': Decimal('251.5306'), 'low': Decimal('251.5221'), 'close': Decimal('251.5233'), 'volume': Decimal('24873300'), 'amount': Decimal('248624740.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.49754, 'REF(SMA(close, 5),1)': 251.47289999999998, 'SMA(close, 20)': 251.25232, 'REF(SMA(close, 20),1)': 251.215155, 'SMA(close,5)': 251.49754, 'SMA(close,20)': 251.25232}
[2025-08-18 18:08:31,287] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 18:08:31,287] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,287] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 18:08:31,287] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,287] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 83
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@83
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=79:84, 当前值=251.5803
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.52002000000002
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.52002000000002
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 83, 值: 251.52002000000002
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[83] = 251.52002000000002
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 82 (当前索引: 83, 回溯周期: 1)
[2025-08-18 18:08:31,288] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,288] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.49754
[2025-08-18 18:08:31,288] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.49754 (from index 82)
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 83
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@83
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=64:84, 当前值=251.5803
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.287805
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.287805
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 83, 值: 251.287805
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[83] = 251.287805
[2025-08-18 18:08:31,288] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 82 (当前索引: 83, 回溯周期: 1)
[2025-08-18 18:08:31,288] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,288] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.25232
[2025-08-18 18:08:31,288] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.25232 (from index 82)
[2025-08-18 18:08:31,288] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,289] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,289] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 82 (当前索引: 83, 回溯周期: 1)
[2025-08-18 18:08:31,289] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,289] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 82 (当前索引: 83, 回溯周期: 1)
[2025-08-18 18:08:31,289] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,289] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,289] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,289] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5793'), 'high': Decimal('251.5819'), 'low': Decimal('251.5793'), 'close': Decimal('251.5803'), 'volume': Decimal('188121500'), 'amount': Decimal('1887359325.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.52002000000002, 'REF(SMA(close, 5),1)': 251.49754, 'SMA(close, 20)': 251.287805, 'REF(SMA(close, 20),1)': 251.25232, 'SMA(close,5)': 251.52002000000002, 'SMA(close,20)': 251.287805}
[2025-08-18 18:08:31,289] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 18:08:31,289] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,289] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 18:08:31,289] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,289] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 84
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@84
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=80:85, 当前值=251.5973
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.54328
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.54328
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 84, 值: 251.54328
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[84] = 251.54328
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 83 (当前索引: 84, 回溯周期: 1)
[2025-08-18 18:08:31,290] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,290] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.52002000000002
[2025-08-18 18:08:31,290] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.52002000000002 (from index 83)
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 84
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@84
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=65:85, 当前值=251.5973
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.32035000000002
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.32035000000002
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 84, 值: 251.32035000000002
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[84] = 251.32035000000002
[2025-08-18 18:08:31,290] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 83 (当前索引: 84, 回溯周期: 1)
[2025-08-18 18:08:31,290] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,290] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.287805
[2025-08-18 18:08:31,290] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.287805 (from index 83)
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,291] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 83 (当前索引: 84, 回溯周期: 1)
[2025-08-18 18:08:31,291] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 83 (当前索引: 84, 回溯周期: 1)
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,291] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,291] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,291] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.5998'), 'high': Decimal('251.6000'), 'low': Decimal('251.5954'), 'close': Decimal('251.5973'), 'volume': Decimal('83600100'), 'amount': Decimal('833584696.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.54328, 'REF(SMA(close, 5),1)': 251.52002000000002, 'SMA(close, 20)': 251.32035000000002, 'REF(SMA(close, 20),1)': 251.287805, 'SMA(close,5)': 251.54328, 'SMA(close,20)': 251.32035000000002}
[2025-08-18 18:08:31,291] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 18:08:31,291] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,291] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 18:08:31,291] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,291] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 85
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@85
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=81:86, 当前值=251.6191
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.56622000000002
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.56622000000002
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 85, 值: 251.56622000000002
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[85] = 251.56622000000002
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 84 (当前索引: 85, 回溯周期: 1)
[2025-08-18 18:08:31,292] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,292] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.54328
[2025-08-18 18:08:31,292] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.54328 (from index 84)
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 85
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@85
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=66:86, 当前值=251.6191
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.35227
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.35227
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 85, 值: 251.35227
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[85] = 251.35227
[2025-08-18 18:08:31,292] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 84 (当前索引: 85, 回溯周期: 1)
[2025-08-18 18:08:31,292] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,292] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.32035000000002
[2025-08-18 18:08:31,292] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.32035000000002 (from index 84)
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 84 (当前索引: 85, 回溯周期: 1)
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 84 (当前索引: 85, 回溯周期: 1)
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,293] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,293] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,293] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6160'), 'high': Decimal('251.6218'), 'low': Decimal('251.6141'), 'close': Decimal('251.6191'), 'volume': Decimal('107385600'), 'amount': Decimal('1078121754.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.56622000000002, 'REF(SMA(close, 5),1)': 251.54328, 'SMA(close, 20)': 251.35227, 'REF(SMA(close, 20),1)': 251.32035000000002, 'SMA(close,5)': 251.56622000000002, 'SMA(close,20)': 251.35227}
[2025-08-18 18:08:31,293] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 18:08:31,293] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,293] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 18:08:31,293] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,293] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 86
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@86
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=82:87, 当前值=251.6371
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.59142000000003
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.59142000000003
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 86, 值: 251.59142000000003
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[86] = 251.59142000000003
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 85 (当前索引: 86, 回溯周期: 1)
[2025-08-18 18:08:31,294] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,294] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.56622000000002
[2025-08-18 18:08:31,294] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.56622000000002 (from index 85)
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 86
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@86
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=67:87, 当前值=251.6371
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.382975
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.382975
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 86, 值: 251.382975
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[86] = 251.382975
[2025-08-18 18:08:31,294] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 85 (当前索引: 86, 回溯周期: 1)
[2025-08-18 18:08:31,294] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,294] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.35227
[2025-08-18 18:08:31,294] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.35227 (from index 85)
[2025-08-18 18:08:31,294] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,294] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,294] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,295] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,295] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 85 (当前索引: 86, 回溯周期: 1)
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,295] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 85 (当前索引: 86, 回溯周期: 1)
[2025-08-18 18:08:31,295] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,295] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,295] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,295] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,295] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6398'), 'high': Decimal('251.6398'), 'low': Decimal('251.6354'), 'close': Decimal('251.6371'), 'volume': Decimal('113268100'), 'amount': Decimal('1135733937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.59142000000003, 'REF(SMA(close, 5),1)': 251.56622000000002, 'SMA(close, 20)': 251.382975, 'REF(SMA(close, 20),1)': 251.35227, 'SMA(close,5)': 251.59142000000003, 'SMA(close,20)': 251.382975}
[2025-08-18 18:08:31,295] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 18:08:31,295] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,295] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 18:08:31,295] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 87
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@87
[2025-08-18 18:08:31,295] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=83:88, 当前值=251.6521
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.61718000000002
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.61718000000002
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 87, 值: 251.61718000000002
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[87] = 251.61718000000002
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 86 (当前索引: 87, 回溯周期: 1)
[2025-08-18 18:08:31,296] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,296] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.59142000000003
[2025-08-18 18:08:31,296] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.59142000000003 (from index 86)
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 87
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@87
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=68:88, 当前值=251.6521
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.41288
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.41288
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 87, 值: 251.41288
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[87] = 251.41288
[2025-08-18 18:08:31,296] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 86 (当前索引: 87, 回溯周期: 1)
[2025-08-18 18:08:31,296] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,296] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.382975
[2025-08-18 18:08:31,296] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.382975 (from index 86)
[2025-08-18 18:08:31,296] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,297] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,297] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 86 (当前索引: 87, 回溯周期: 1)
[2025-08-18 18:08:31,297] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,297] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 86 (当前索引: 87, 回溯周期: 1)
[2025-08-18 18:08:31,297] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,297] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,297] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,297] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.6558'), 'high': Decimal('251.6558'), 'low': Decimal('251.6521'), 'close': Decimal('251.6521'), 'volume': Decimal('15502500'), 'amount': Decimal('155100399.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.61718000000002, 'REF(SMA(close, 5),1)': 251.59142000000003, 'SMA(close, 20)': 251.41288, 'REF(SMA(close, 20),1)': 251.382975, 'SMA(close,5)': 251.61718000000002, 'SMA(close,20)': 251.41288}
[2025-08-18 18:08:31,297] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 18:08:31,297] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,297] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 18:08:31,297] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 88
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@88
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=84:89, 当前值=251.7170
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.64452
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.64452
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 88, 值: 251.64452
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[88] = 251.64452
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 87 (当前索引: 88, 回溯周期: 1)
[2025-08-18 18:08:31,298] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,298] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.61718000000002
[2025-08-18 18:08:31,298] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.61718000000002 (from index 87)
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 88
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@88
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=69:89, 当前值=251.7170
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.44269
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.44269
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 88, 值: 251.44269
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[88] = 251.44269
[2025-08-18 18:08:31,298] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 87 (当前索引: 88, 回溯周期: 1)
[2025-08-18 18:08:31,298] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.41288
[2025-08-18 18:08:31,299] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.41288 (from index 87)
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,299] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 87 (当前索引: 88, 回溯周期: 1)
[2025-08-18 18:08:31,299] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 87 (当前索引: 88, 回溯周期: 1)
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,299] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,299] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,299] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7109'), 'high': Decimal('251.7173'), 'low': Decimal('251.7068'), 'close': Decimal('251.7170'), 'volume': Decimal('174144700'), 'amount': Decimal('1752238061.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.64452, 'REF(SMA(close, 5),1)': 251.61718000000002, 'SMA(close, 20)': 251.44269, 'REF(SMA(close, 20),1)': 251.41288, 'SMA(close,5)': 251.64452, 'SMA(close,20)': 251.44269}
[2025-08-18 18:08:31,299] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 18:08:31,299] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,299] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 18:08:31,299] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 89
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@89
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=85:90, 当前值=251.7357
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.67220000000003
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.67220000000003
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 89, 值: 251.67220000000003
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[89] = 251.67220000000003
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 88 (当前索引: 89, 回溯周期: 1)
[2025-08-18 18:08:31,300] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,300] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.64452
[2025-08-18 18:08:31,300] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.64452 (from index 88)
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 89
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@89
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=70:90, 当前值=251.7357
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.47223
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.47223
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 89, 值: 251.47223
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[89] = 251.47223
[2025-08-18 18:08:31,300] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 88 (当前索引: 89, 回溯周期: 1)
[2025-08-18 18:08:31,300] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,300] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.44269
[2025-08-18 18:08:31,300] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.44269 (from index 88)
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 88 (当前索引: 89, 回溯周期: 1)
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 88 (当前索引: 89, 回溯周期: 1)
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,301] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,301] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,301] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7356'), 'high': Decimal('251.7365'), 'low': Decimal('251.7355'), 'close': Decimal('251.7357'), 'volume': Decimal('20334100'), 'amount': Decimal('203059448.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.67220000000003, 'REF(SMA(close, 5),1)': 251.64452, 'SMA(close, 20)': 251.47223, 'REF(SMA(close, 20),1)': 251.44269, 'SMA(close,5)': 251.67220000000003, 'SMA(close,20)': 251.47223}
[2025-08-18 18:08:31,301] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 18:08:31,301] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,301] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 18:08:31,301] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,301] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 90
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@90
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=86:91, 当前值=251.7555
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.69948
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.69948
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 90, 值: 251.69948
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[90] = 251.69948
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 89 (当前索引: 90, 回溯周期: 1)
[2025-08-18 18:08:31,302] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,302] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.67220000000003
[2025-08-18 18:08:31,302] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.67220000000003 (from index 89)
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 90
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@90
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=71:91, 当前值=251.7555
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.500965
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.500965
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 90, 值: 251.500965
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[90] = 251.500965
[2025-08-18 18:08:31,302] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 89 (当前索引: 90, 回溯周期: 1)
[2025-08-18 18:08:31,302] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,302] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.47223
[2025-08-18 18:08:31,302] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.47223 (from index 89)
[2025-08-18 18:08:31,302] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,302] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,302] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,303] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,303] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 89 (当前索引: 90, 回溯周期: 1)
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,303] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 89 (当前索引: 90, 回溯周期: 1)
[2025-08-18 18:08:31,303] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,303] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,303] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,303] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,303] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7544'), 'high': Decimal('251.7555'), 'low': Decimal('251.7544'), 'close': Decimal('251.7555'), 'volume': Decimal('11758300'), 'amount': Decimal('117731722.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.69948, 'REF(SMA(close, 5),1)': 251.67220000000003, 'SMA(close, 20)': 251.500965, 'REF(SMA(close, 20),1)': 251.47223, 'SMA(close,5)': 251.69948, 'SMA(close,20)': 251.500965}
[2025-08-18 18:08:31,303] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 18:08:31,303] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,303] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 18:08:31,303] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 91
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@91
[2025-08-18 18:08:31,303] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=87:92, 当前值=251.7803
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.72812
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.72812
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 91, 值: 251.72812
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[91] = 251.72812
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 90 (当前索引: 91, 回溯周期: 1)
[2025-08-18 18:08:31,304] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,304] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.69948
[2025-08-18 18:08:31,304] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.69948 (from index 90)
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 91
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@91
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=72:92, 当前值=251.7803
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.52950500000003
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.52950500000003
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 91, 值: 251.52950500000003
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[91] = 251.52950500000003
[2025-08-18 18:08:31,304] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 90 (当前索引: 91, 回溯周期: 1)
[2025-08-18 18:08:31,304] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,304] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.500965
[2025-08-18 18:08:31,304] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.500965 (from index 90)
[2025-08-18 18:08:31,304] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,304] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,304] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,304] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,304] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,305] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,305] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 90 (当前索引: 91, 回溯周期: 1)
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,305] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,305] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 90 (当前索引: 91, 回溯周期: 1)
[2025-08-18 18:08:31,305] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,305] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,305] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,305] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,305] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,305] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7741'), 'high': Decimal('251.7804'), 'low': Decimal('251.7732'), 'close': Decimal('251.7803'), 'volume': Decimal('1.533E+7'), 'amount': Decimal('154074033.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.72812, 'REF(SMA(close, 5),1)': 251.69948, 'SMA(close, 20)': 251.52950500000003, 'REF(SMA(close, 20),1)': 251.500965, 'SMA(close,5)': 251.72812, 'SMA(close,20)': 251.52950500000003}
[2025-08-18 18:08:31,305] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 18:08:31,305] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,305] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 18:08:31,305] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 92
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@92
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=88:93, 当前值=251.8002
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.75774
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.75774
[2025-08-18 18:08:31,305] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 92, 值: 251.75774
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[92] = 251.75774
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 91 (当前索引: 92, 回溯周期: 1)
[2025-08-18 18:08:31,306] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,306] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.72812
[2025-08-18 18:08:31,306] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.72812 (from index 91)
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 92
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@92
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=73:93, 当前值=251.8002
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.55774000000002
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.55774000000002
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 92, 值: 251.55774000000002
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[92] = 251.55774000000002
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 91 (当前索引: 92, 回溯周期: 1)
[2025-08-18 18:08:31,306] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,306] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.52950500000003
[2025-08-18 18:08:31,306] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.52950500000003 (from index 91)
[2025-08-18 18:08:31,306] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,306] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,306] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,306] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,306] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,306] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,307] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,307] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 91 (当前索引: 92, 回溯周期: 1)
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,307] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,307] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 91 (当前索引: 92, 回溯周期: 1)
[2025-08-18 18:08:31,307] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,307] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,307] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,307] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,307] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,307] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.7989'), 'high': Decimal('251.8002'), 'low': Decimal('251.7987'), 'close': Decimal('251.8002'), 'volume': Decimal('18280300'), 'amount': Decimal('184316558.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.75774, 'REF(SMA(close, 5),1)': 251.72812, 'SMA(close, 20)': 251.55774000000002, 'REF(SMA(close, 20),1)': 251.52950500000003, 'SMA(close,5)': 251.75774, 'SMA(close,20)': 251.55774000000002}
[2025-08-18 18:08:31,307] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 18:08:31,307] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 18:08:31,307] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 18:08:31,307] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 93
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@93
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=89:94, 当前值=251.8587
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.78608
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=251.78608
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 93, 值: 251.78608
[2025-08-18 18:08:31,307] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[93] = 251.78608
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 92 (当前索引: 93, 回溯周期: 1)
[2025-08-18 18:08:31,308] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,308] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.75774
[2025-08-18 18:08:31,308] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=251.75774 (from index 92)
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 93
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@93
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=74:94, 当前值=251.8587
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=251.585235
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=251.585235
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 93, 值: 251.585235
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 94, 列是否存在: True
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[93] = 251.585235
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 92 (当前索引: 93, 回溯周期: 1)
[2025-08-18 18:08:31,308] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,308] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.55774000000002
[2025-08-18 18:08:31,308] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=251.55774000000002 (from index 92)
[2025-08-18 18:08:31,308] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,308] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,308] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,308] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,308] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 18:08:31,308] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 18:08:31,308] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,308] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,309] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 92 (当前索引: 93, 回溯周期: 1)
[2025-08-18 18:08:31,309] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 18:08:31,309] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,309] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,309] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 92 (当前索引: 93, 回溯周期: 1)
[2025-08-18 18:08:31,309] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,309] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=251.78608
[2025-08-18 18:08:31,309] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,309] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=251.585235
[2025-08-18 18:08:31,309] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 18:08:31,309] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.000022', 'open': Decimal('251.8559'), 'high': Decimal('251.8596'), 'low': Decimal('251.8559'), 'close': Decimal('251.8587'), 'volume': Decimal('4.568E+7'), 'amount': Decimal('456762932.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 251.78608, 'REF(SMA(close, 5),1)': 251.75774, 'SMA(close, 20)': 251.585235, 'REF(SMA(close, 20),1)': 251.55774000000002, 'SMA(close,5)': 251.78608, 'SMA(close,20)': 251.585235}
[2025-08-18 18:08:31,309] [DEBUG] [backtesting:217] [conn:N/A] 回测完成
[2025-08-18 18:08:31,310] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 19:16:29,442] [INFO] [database:289] [conn:N/A] Loading stock data for sh.000022 from 2025-01-01 to 2025-08-18
[2025-08-18 19:16:29,442] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:16:29,443] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.000022 from 2025-01-01 to 2025-08-18
[2025-08-18 19:16:32,164] [ERROR] [database:274] [conn:N/A] 检查数据完整性失败: unexpected connection_lost() call
[2025-08-18 19:16:32,164] [ERROR] [database:350] [conn:N/A] Failed to load stock data: unexpected connection_lost() call
[2025-08-18 19:16:43,919] [DEBUG] [database:28] [conn:N/A] DatabaseManager initialized, instance_id: 5483930672
[2025-08-18 19:16:47,409] [ERROR] [database:89] [conn:N/A] 连接池初始化失败: unexpected connection_lost() call
[2025-08-18 19:17:07,073] [DEBUG] [database:28] [conn:N/A] DatabaseManager initialized, instance_id: 5087433920
[2025-08-18 19:17:07,540] [DEBUG] [database:87] [conn:N/A] 连接池初始化成功, 循环ID: 4414651792
[2025-08-18 19:17:07,540] [INFO] [database:95] [conn:N/A] 开始数据库表结构初始化...
[2025-08-18 19:17:07,789] [DEBUG] [database:167] [conn:5087435168] 数据库表结构初始化完成
[2025-08-18 19:17:07,789] [DEBUG] [database:171] [conn:N/A] 当前循环活跃状态: True
[2025-08-18 19:17:07,789] [DEBUG] [database:62] [conn:N/A] initialize调用结束，总耗时: 0.72s
[2025-08-18 19:17:09,926] [DEBUG] [database:388] [conn:N/A] 检查数据是否最新
[2025-08-18 19:17:09,927] [DEBUG] [database:416] [conn:N/A] 检查StockInfo表状态(尝试1/3)
[2025-08-18 19:17:09,927] [DEBUG] [database:417] [conn:5091679632] 当前活跃连接数: 1
[2025-08-18 19:17:10,170] [WARNING] [database:443] [conn:N/A] StockInfo表为空
[2025-08-18 19:17:24,664] [DEBUG] [database:511] [conn:N/A] Truncating StockInfo table
[2025-08-18 19:17:24,711] [DEBUG] [database:515] [conn:N/A] Inserting 0 rows into StockInfo
[2025-08-18 19:17:24,772] [INFO] [database:521] [conn:N/A] 成功更新StockInfo表数据，成功插入0行，失败0行
[2025-08-18 19:17:38,566] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-01-01 to 2025-08-18
[2025-08-18 19:17:38,566] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:17:38,566] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-01-01 to 2025-08-18
[2025-08-18 19:17:38,659] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-01-01-2025-08-18 for sh.603900

[2025-08-18 19:17:38,673] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 3, 31), datetime.date(2025, 1, 17), datetime.date(2025, 3, 14), datetime.date(2025, 2, 11), datetime.date(2025, 1, 27), datetime.date(2025, 3, 13), datetime.date(2025, 1, 14), datetime.date(2025, 2, 26), datetime.date(2025, 3, 19), datetime.date(2025, 1, 13), datetime.date(2025, 4, 1), datetime.date(2025, 3, 10), datetime.date(2025, 2, 6), datetime.date(2025, 3, 25), datetime.date(2025, 2, 28), datetime.date(2025, 3, 18), datetime.date(2025, 1, 10), datetime.date(2025, 2, 13), datetime.date(2025, 1, 24), datetime.date(2025, 2, 27), datetime.date(2025, 3, 5), datetime.date(2025, 3, 3), datetime.date(2025, 2, 10), datetime.date(2025, 1, 3), datetime.date(2025, 3, 7), datetime.date(2025, 3, 28), datetime.date(2025, 3, 6), datetime.date(2025, 3, 17), datetime.date(2025, 3, 26), datetime.date(2025, 1, 7), datetime.date(2025, 2, 17), datetime.date(2025, 1, 9), datetime.date(2025, 1, 21), datetime.date(2025, 2, 21), datetime.date(2025, 2, 19), datetime.date(2025, 2, 25), datetime.date(2025, 3, 20), datetime.date(2025, 1, 15), datetime.date(2025, 1, 20), datetime.date(2025, 3, 11), datetime.date(2025, 2, 20), datetime.date(2025, 1, 23), datetime.date(2025, 2, 24), datetime.date(2025, 1, 8), datetime.date(2025, 1, 6), datetime.date(2025, 2, 14), datetime.date(2025, 1, 2), datetime.date(2025, 3, 27), datetime.date(2025, 2, 5), datetime.date(2025, 3, 12), datetime.date(2025, 2, 12), datetime.date(2025, 3, 24), datetime.date(2025, 2, 7), datetime.date(2025, 1, 22), datetime.date(2025, 2, 18), datetime.date(2025, 3, 4), datetime.date(2025, 1, 16), datetime.date(2025, 3, 21)} for sh.603900
[2025-08-18 19:17:38,674] [INFO] [database:270] [conn:N/A] Found 14 missing data ranges for sh.603900
[2025-08-18 19:17:38,705] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 1, 2), datetime.date(2025, 1, 3)), (datetime.date(2025, 1, 6), datetime.date(2025, 1, 10)), (datetime.date(2025, 1, 13), datetime.date(2025, 1, 17)), (datetime.date(2025, 1, 20), datetime.date(2025, 1, 24)), (datetime.date(2025, 1, 27), datetime.date(2025, 1, 27)), (datetime.date(2025, 2, 5), datetime.date(2025, 2, 7)), (datetime.date(2025, 2, 10), datetime.date(2025, 2, 14)), (datetime.date(2025, 2, 17), datetime.date(2025, 2, 21)), (datetime.date(2025, 2, 24), datetime.date(2025, 2, 28)), (datetime.date(2025, 3, 3), datetime.date(2025, 3, 7)), (datetime.date(2025, 3, 10), datetime.date(2025, 3, 14)), (datetime.date(2025, 3, 17), datetime.date(2025, 3, 21)), (datetime.date(2025, 3, 24), datetime.date(2025, 3, 28)), (datetime.date(2025, 3, 31), datetime.date(2025, 4, 1))]
[2025-08-18 19:17:38,706] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.603900
[2025-08-18 19:17:38,706] [INFO] [database:306] [conn:N/A] Fetching data from 2025-01-02 to 2025-01-03
[2025-08-18 19:17:39,449] [INFO] [database:306] [conn:N/A] Fetching data from 2025-01-06 to 2025-01-10
[2025-08-18 19:17:40,133] [INFO] [database:306] [conn:N/A] Fetching data from 2025-01-13 to 2025-01-17
[2025-08-18 19:18:45,139] [ERROR] [database:350] [conn:N/A] Failed to load stock data: Baostock登录失败: 网络接收错误。
[2025-08-18 19:19:10,919] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-01-01 to 2025-08-18
[2025-08-18 19:19:10,920] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:19:10,920] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-01-01 to 2025-08-18
[2025-08-18 19:19:10,970] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-01-01-2025-08-18 for sh.603900

[2025-08-18 19:19:10,980] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 3, 31), datetime.date(2025, 1, 17), datetime.date(2025, 3, 14), datetime.date(2025, 2, 11), datetime.date(2025, 1, 27), datetime.date(2025, 3, 13), datetime.date(2025, 1, 14), datetime.date(2025, 2, 26), datetime.date(2025, 3, 19), datetime.date(2025, 1, 13), datetime.date(2025, 4, 1), datetime.date(2025, 3, 10), datetime.date(2025, 2, 6), datetime.date(2025, 3, 25), datetime.date(2025, 2, 28), datetime.date(2025, 3, 18), datetime.date(2025, 2, 13), datetime.date(2025, 1, 24), datetime.date(2025, 2, 27), datetime.date(2025, 3, 5), datetime.date(2025, 3, 3), datetime.date(2025, 2, 10), datetime.date(2025, 3, 7), datetime.date(2025, 3, 28), datetime.date(2025, 3, 6), datetime.date(2025, 3, 17), datetime.date(2025, 3, 26), datetime.date(2025, 2, 17), datetime.date(2025, 1, 21), datetime.date(2025, 2, 21), datetime.date(2025, 2, 19), datetime.date(2025, 2, 25), datetime.date(2025, 3, 20), datetime.date(2025, 1, 15), datetime.date(2025, 1, 20), datetime.date(2025, 3, 11), datetime.date(2025, 2, 20), datetime.date(2025, 1, 23), datetime.date(2025, 2, 24), datetime.date(2025, 1, 6), datetime.date(2025, 2, 14), datetime.date(2025, 1, 2), datetime.date(2025, 3, 27), datetime.date(2025, 2, 5), datetime.date(2025, 3, 12), datetime.date(2025, 2, 12), datetime.date(2025, 3, 24), datetime.date(2025, 2, 7), datetime.date(2025, 1, 22), datetime.date(2025, 2, 18), datetime.date(2025, 3, 4), datetime.date(2025, 1, 16), datetime.date(2025, 3, 21)} for sh.603900
[2025-08-18 19:19:10,980] [INFO] [database:270] [conn:N/A] Found 14 missing data ranges for sh.603900
[2025-08-18 19:19:11,012] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 1, 2), datetime.date(2025, 1, 2)), (datetime.date(2025, 1, 6), datetime.date(2025, 1, 6)), (datetime.date(2025, 1, 13), datetime.date(2025, 1, 17)), (datetime.date(2025, 1, 20), datetime.date(2025, 1, 24)), (datetime.date(2025, 1, 27), datetime.date(2025, 1, 27)), (datetime.date(2025, 2, 5), datetime.date(2025, 2, 7)), (datetime.date(2025, 2, 10), datetime.date(2025, 2, 14)), (datetime.date(2025, 2, 17), datetime.date(2025, 2, 21)), (datetime.date(2025, 2, 24), datetime.date(2025, 2, 28)), (datetime.date(2025, 3, 3), datetime.date(2025, 3, 7)), (datetime.date(2025, 3, 10), datetime.date(2025, 3, 14)), (datetime.date(2025, 3, 17), datetime.date(2025, 3, 21)), (datetime.date(2025, 3, 24), datetime.date(2025, 3, 28)), (datetime.date(2025, 3, 31), datetime.date(2025, 4, 1))]
[2025-08-18 19:19:11,012] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.603900
[2025-08-18 19:19:11,013] [INFO] [database:306] [conn:N/A] Fetching data from 2025-01-02 to 2025-01-02
[2025-08-18 19:20:16,020] [ERROR] [database:350] [conn:N/A] Failed to load stock data: Baostock登录失败: 网络接收错误。
[2025-08-18 19:21:58,696] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-03-01 to 2025-08-18
[2025-08-18 19:21:58,697] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:21:58,697] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-03-01 to 2025-08-18
[2025-08-18 19:21:58,740] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-03-01-2025-08-18 for sh.603900

[2025-08-18 19:21:58,744] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 3, 31), datetime.date(2025, 3, 14), datetime.date(2025, 3, 13), datetime.date(2025, 3, 19), datetime.date(2025, 4, 1), datetime.date(2025, 3, 10), datetime.date(2025, 3, 18), datetime.date(2025, 3, 25), datetime.date(2025, 3, 3), datetime.date(2025, 3, 5), datetime.date(2025, 3, 7), datetime.date(2025, 3, 28), datetime.date(2025, 3, 6), datetime.date(2025, 3, 17), datetime.date(2025, 3, 26), datetime.date(2025, 3, 20), datetime.date(2025, 3, 11), datetime.date(2025, 3, 27), datetime.date(2025, 3, 12), datetime.date(2025, 3, 24), datetime.date(2025, 3, 4), datetime.date(2025, 3, 21)} for sh.603900
[2025-08-18 19:21:58,744] [INFO] [database:270] [conn:N/A] Found 5 missing data ranges for sh.603900
[2025-08-18 19:21:58,777] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 3, 3), datetime.date(2025, 3, 7)), (datetime.date(2025, 3, 10), datetime.date(2025, 3, 14)), (datetime.date(2025, 3, 17), datetime.date(2025, 3, 21)), (datetime.date(2025, 3, 24), datetime.date(2025, 3, 28)), (datetime.date(2025, 3, 31), datetime.date(2025, 4, 1))]
[2025-08-18 19:21:58,777] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.603900
[2025-08-18 19:21:58,780] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-03 to 2025-03-07
[2025-08-18 19:21:59,211] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-10 to 2025-03-14
[2025-08-18 19:22:00,611] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-17 to 2025-03-21
[2025-08-18 19:22:01,235] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-24 to 2025-03-28
[2025-08-18 19:22:01,868] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-31 to 2025-04-01
[2025-08-18 19:23:06,876] [ERROR] [database:350] [conn:N/A] Failed to load stock data: Baostock登录失败: 网络接收错误。
[2025-08-18 19:23:38,093] [INFO] [database:289] [conn:N/A] Loading stock data for sh.600604 from 2025-03-01 to 2025-08-18
[2025-08-18 19:23:38,094] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:23:38,094] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.600604 from 2025-03-01 to 2025-08-18
[2025-08-18 19:23:38,434] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-03-01-2025-08-18 for sh.600604

[2025-08-18 19:23:38,440] [INFO] [database:250] [conn:N/A] Missing_dates {datetime.date(2025, 3, 14), datetime.date(2025, 5, 22), datetime.date(2025, 4, 2), datetime.date(2025, 4, 29), datetime.date(2025, 7, 17), datetime.date(2025, 5, 13), datetime.date(2025, 4, 10), datetime.date(2025, 6, 27), datetime.date(2025, 3, 19), datetime.date(2025, 5, 7), datetime.date(2025, 4, 1), datetime.date(2025, 6, 5), datetime.date(2025, 5, 20), datetime.date(2025, 7, 4), datetime.date(2025, 4, 3), datetime.date(2025, 7, 9), datetime.date(2025, 3, 18), datetime.date(2025, 4, 24), datetime.date(2025, 7, 18), datetime.date(2025, 4, 9), datetime.date(2025, 5, 26), datetime.date(2025, 7, 29), datetime.date(2025, 8, 11), datetime.date(2025, 3, 5), datetime.date(2025, 7, 22), datetime.date(2025, 5, 16), datetime.date(2025, 7, 30), datetime.date(2025, 4, 16), datetime.date(2025, 3, 6), datetime.date(2025, 3, 26), datetime.date(2025, 5, 19), datetime.date(2025, 8, 6), datetime.date(2025, 8, 7), datetime.date(2025, 6, 20), datetime.date(2025, 7, 24), datetime.date(2025, 6, 30), datetime.date(2025, 3, 20), datetime.date(2025, 7, 28), datetime.date(2025, 4, 30), datetime.date(2025, 4, 22), datetime.date(2025, 8, 1), datetime.date(2025, 7, 10), datetime.date(2025, 7, 8), datetime.date(2025, 4, 8), datetime.date(2025, 6, 10), datetime.date(2025, 5, 28), datetime.date(2025, 6, 11), datetime.date(2025, 6, 3), datetime.date(2025, 5, 6), datetime.date(2025, 5, 30), datetime.date(2025, 4, 25), datetime.date(2025, 8, 15), datetime.date(2025, 7, 25), datetime.date(2025, 7, 31), datetime.date(2025, 3, 12), datetime.date(2025, 6, 26), datetime.date(2025, 8, 5), datetime.date(2025, 7, 21), datetime.date(2025, 5, 15), datetime.date(2025, 6, 19), datetime.date(2025, 3, 21), datetime.date(2025, 4, 7), datetime.date(2025, 7, 14), datetime.date(2025, 3, 31), datetime.date(2025, 7, 1), datetime.date(2025, 4, 28), datetime.date(2025, 7, 15), datetime.date(2025, 6, 24), datetime.date(2025, 6, 18), datetime.date(2025, 3, 13), datetime.date(2025, 7, 2), datetime.date(2025, 5, 23), datetime.date(2025, 4, 11), datetime.date(2025, 4, 15), datetime.date(2025, 3, 10), datetime.date(2025, 7, 7), datetime.date(2025, 3, 25), datetime.date(2025, 3, 3), datetime.date(2025, 8, 4), datetime.date(2025, 6, 4), datetime.date(2025, 6, 23), datetime.date(2025, 8, 14), datetime.date(2025, 4, 17), datetime.date(2025, 3, 7), datetime.date(2025, 3, 28), datetime.date(2025, 4, 21), datetime.date(2025, 7, 16), datetime.date(2025, 3, 17), datetime.date(2025, 7, 3), datetime.date(2025, 6, 13), datetime.date(2025, 6, 9), datetime.date(2025, 6, 6), datetime.date(2025, 4, 14), datetime.date(2025, 8, 8), datetime.date(2025, 6, 17), datetime.date(2025, 8, 13), datetime.date(2025, 5, 12), datetime.date(2025, 8, 12), datetime.date(2025, 4, 23), datetime.date(2025, 5, 27), datetime.date(2025, 7, 23), datetime.date(2025, 3, 11), datetime.date(2025, 5, 21), datetime.date(2025, 6, 16), datetime.date(2025, 5, 29), datetime.date(2025, 6, 12), datetime.date(2025, 5, 8), datetime.date(2025, 5, 9), datetime.date(2025, 6, 25), datetime.date(2025, 3, 27), datetime.date(2025, 7, 11), datetime.date(2025, 3, 24), datetime.date(2025, 5, 14), datetime.date(2025, 3, 4), datetime.date(2025, 4, 18)} for sh.600604
[2025-08-18 19:23:38,441] [INFO] [database:270] [conn:N/A] Found 24 missing data ranges for sh.600604
[2025-08-18 19:23:38,482] [INFO] [database:300] [conn:N/A] missing_ranges [(datetime.date(2025, 3, 3), datetime.date(2025, 3, 7)), (datetime.date(2025, 3, 10), datetime.date(2025, 3, 14)), (datetime.date(2025, 3, 17), datetime.date(2025, 3, 21)), (datetime.date(2025, 3, 24), datetime.date(2025, 3, 28)), (datetime.date(2025, 3, 31), datetime.date(2025, 4, 3)), (datetime.date(2025, 4, 7), datetime.date(2025, 4, 11)), (datetime.date(2025, 4, 14), datetime.date(2025, 4, 18)), (datetime.date(2025, 4, 21), datetime.date(2025, 4, 25)), (datetime.date(2025, 4, 28), datetime.date(2025, 4, 30)), (datetime.date(2025, 5, 6), datetime.date(2025, 5, 9)), (datetime.date(2025, 5, 12), datetime.date(2025, 5, 16)), (datetime.date(2025, 5, 19), datetime.date(2025, 5, 23)), (datetime.date(2025, 5, 26), datetime.date(2025, 5, 30)), (datetime.date(2025, 6, 3), datetime.date(2025, 6, 6)), (datetime.date(2025, 6, 9), datetime.date(2025, 6, 13)), (datetime.date(2025, 6, 16), datetime.date(2025, 6, 20)), (datetime.date(2025, 6, 23), datetime.date(2025, 6, 27)), (datetime.date(2025, 6, 30), datetime.date(2025, 7, 4)), (datetime.date(2025, 7, 7), datetime.date(2025, 7, 11)), (datetime.date(2025, 7, 14), datetime.date(2025, 7, 18)), (datetime.date(2025, 7, 21), datetime.date(2025, 7, 25)), (datetime.date(2025, 7, 28), datetime.date(2025, 8, 1)), (datetime.date(2025, 8, 4), datetime.date(2025, 8, 8)), (datetime.date(2025, 8, 11), datetime.date(2025, 8, 15))]
[2025-08-18 19:23:38,483] [INFO] [database:301] [conn:N/A] Fetching missing data ranges for sh.600604
[2025-08-18 19:23:38,484] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-03 to 2025-03-07
[2025-08-18 19:23:39,287] [INFO] [database:306] [conn:N/A] Fetching data from 2025-03-10 to 2025-03-14
[2025-08-18 19:24:44,293] [ERROR] [database:350] [conn:N/A] Failed to load stock data: Baostock登录失败: 网络接收错误。
[2025-08-18 19:25:52,346] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:25:52,347] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:25:52,347] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:25:52,408] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-06-01-2025-08-18 for sh.603900

[2025-08-18 19:25:52,414] [INFO] [database:250] [conn:N/A] Missing_dates set() for sh.603900
[2025-08-18 19:25:52,414] [INFO] [database:270] [conn:N/A] Found 0 missing data ranges for sh.603900
[2025-08-18 19:25:52,540] [INFO] [database:346] [conn:N/A] Successfully loaded 55 rows for sh.603900
[2025-08-18 19:25:52,570] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:25:52,612] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:25:52,612] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:25:52,612] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:25:52,612] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:25:52,616] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:25:52,616] [DEBUG] [backtesting:306] [conn:N/A] 注册策略调度处理器: 05af9b4f-330c-440d-95ce-1738705a8bab
[2025-08-18 19:25:52,617] [INFO] [backtesting:309] [conn:N/A] 策略注册成功 | ID: 05af9b4f-330c-440d-95ce-1738705a8bab | 名称: 自定义规则策略
[2025-08-18 19:25:52,617] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 19:25:52,617] [DEBUG] [backtesting:161] [conn:N/A] 识别数据频率为：日线
[2025-08-18 19:25:52,619] [DEBUG] [backtesting:187] [conn:N/A] 开始回测...
[2025-08-18 19:25:52,619] [INFO] [backtesting:356] [conn:N/A] 回测系统初始化开始
[2025-08-18 19:25:52,619] [INFO] [backtesting:368] [conn:N/A] 策略初始化完成: 05af9b4f-330c-440d-95ce-1738705a8bab
[2025-08-18 19:25:52,619] [INFO] [backtesting:386] [conn:N/A] 回测系统初始化完成
[2025-08-18 19:25:52,620] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 19:25:52,620] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,620] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 19:25:52,620] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,620] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,620] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,620] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,620] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,621] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:25:52,621] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,621] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,621] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,621] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:25:52,632] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,632] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,634] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,634] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,635] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,635] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,635] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,636] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,636] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9700'), 'high': Decimal('12.1000'), 'low': Decimal('11.3200'), 'close': Decimal('11.8500'), 'volume': Decimal('59781512'), 'amount': Decimal('704448786.5200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:25:52,636] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 19:25:52,636] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,636] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 19:25:52,636] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,636] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:25:52,637] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:25:52,637] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:25:52,637] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,637] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:25:52,638] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,638] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5400'), 'high': Decimal('13.0400'), 'low': Decimal('11.4000'), 'close': Decimal('13.0400'), 'volume': Decimal('76582685'), 'amount': Decimal('954797066.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:25:52,638] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 19:25:52,638] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,638] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 19:25:52,638] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,638] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:25:52,639] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 1)
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:25:52,639] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 1)
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,639] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:25:52,640] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,640] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:25:52,640] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,641] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.9700'), 'high': Decimal('13.3700'), 'low': Decimal('11.7400'), 'close': Decimal('11.7400'), 'volume': Decimal('79708868'), 'amount': Decimal('990913647.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:25:52,641] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 19:25:52,641] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,641] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 19:25:52,641] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,641] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:25:52,642] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 2)
[2025-08-18 19:25:52,642] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,642] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,642] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,642] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:25:52,642] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:25:52,643] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 2)
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:25:52,643] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,643] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,644] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:25:52,644] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,644] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3100'), 'high': Decimal('11.5900'), 'low': Decimal('11.0500'), 'close': Decimal('11.1000'), 'volume': Decimal('52021272'), 'amount': Decimal('584670731.8900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:25:52,644] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 19:25:52,644] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,644] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 19:25:52,644] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,645] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,645] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,645] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,645] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:25:52,646] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:25:52,646] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,646] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:25:52,647] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 3)
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,647] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:25:52,648] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 3)
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:25:52,648] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,648] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,649] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:25:52,650] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,650] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,650] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:25:52,650] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,650] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0300'), 'high': Decimal('11.9000'), 'low': Decimal('11.0000'), 'close': Decimal('11.7300'), 'volume': Decimal('43385516'), 'amount': Decimal('498593941.2600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:25:52,651] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 19:25:52,651] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,651] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 19:25:52,651] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,651] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,651] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,651] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,651] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@5
[2025-08-18 19:25:52,651] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=1:6, 当前值=11.8500
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.892
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.892
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 5, 值: 11.892
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[5] = 11.892
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:25:52,652] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 4)
[2025-08-18 19:25:52,652] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,653] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:25:52,653] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 4)
[2025-08-18 19:25:52,653] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:25:52,654] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:25:52,654] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,654] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:25:52,654] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:25:52,654] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:25:52,655] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:25:52,655] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,655] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:25:52,655] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,656] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0000'), 'high': Decimal('12.1800'), 'low': Decimal('11.4500'), 'close': Decimal('11.8500'), 'volume': Decimal('49110045'), 'amount': Decimal('583218737.6900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.892, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.892}
[2025-08-18 19:25:52,656] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 19:25:52,656] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,656] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 19:25:52,656] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@6
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=2:7, 当前值=12.2400
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 6, 值: 11.732
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[6] = 11.732
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:25:52,656] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:25:52,656] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:25:52,656] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.892 (from index 5)
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,656] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:25:52,657] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 5)
[2025-08-18 19:25:52,657] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,657] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:25:52,657] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,657] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,657] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:25:52,657] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:25:52,657] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,658] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,658] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,658] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,658] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:25:52,658] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,658] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9800'), 'high': Decimal('12.4500'), 'low': Decimal('11.8000'), 'close': Decimal('12.2400'), 'volume': Decimal('49011610'), 'amount': Decimal('594009519.9700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.892, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:25:52,658] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 19:25:52,659] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,659] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 19:25:52,659] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,659] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,659] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,659] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,659] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@7
[2025-08-18 19:25:52,659] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=3:8, 当前值=12.9700
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.978
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.978
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 7, 值: 11.978
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[7] = 11.978
[2025-08-18 19:25:52,660] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:25:52,661] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,661] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,661] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 6)
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:25:52,661] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 6)
[2025-08-18 19:25:52,661] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:25:52,661] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:25:52,661] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,661] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,662] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:25:52,662] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:25:52,662] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:25:52,662] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,662] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:25:52,662] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,662] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.3400'), 'high': Decimal('13.2000'), 'low': Decimal('12.1200'), 'close': Decimal('12.9700'), 'volume': Decimal('53794722'), 'amount': Decimal('679946623.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.978, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.978}
[2025-08-18 19:25:52,662] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 19:25:52,662] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,662] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 19:25:52,662] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@8
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=4:9, 当前值=12.9700
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.352
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.352
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 8, 值: 12.352
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[8] = 12.352
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:25:52,663] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:25:52,663] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:25:52,663] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.978 (from index 7)
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,663] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:25:52,663] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 7)
[2025-08-18 19:25:52,664] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:25:52,664] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,664] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:25:52,664] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,664] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:25:52,664] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,665] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('13.3600'), 'high': Decimal('13.8800'), 'low': Decimal('12.8000'), 'close': Decimal('12.9700'), 'volume': Decimal('53806995'), 'amount': Decimal('718624248.0800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.352, 'REF(SMA(close, 5),1)': 11.978, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.352}
[2025-08-18 19:25:52,665] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 19:25:52,665] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,665] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 19:25:52,665] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@9
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=5:10, 当前值=12.8700
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.58
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.58
[2025-08-18 19:25:52,665] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 9, 值: 12.58
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[9] = 12.58
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:25:52,666] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:25:52,666] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:25:52,666] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.352 (from index 8)
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:25:52,666] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 8)
[2025-08-18 19:25:52,666] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:25:52,666] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:25:52,666] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,666] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,667] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:25:52,667] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:25:52,667] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:25:52,667] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:25:52,667] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,667] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.7000'), 'high': Decimal('13.6100'), 'low': Decimal('12.3600'), 'close': Decimal('12.8700'), 'volume': Decimal('39445490'), 'amount': Decimal('517960693.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.58, 'REF(SMA(close, 5),1)': 12.352, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.58}
[2025-08-18 19:25:52,667] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 19:25:52,667] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,667] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 19:25:52,667] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,667] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@10
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=6:11, 当前值=12.3500
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.68
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.68
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 10, 值: 12.68
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[10] = 12.68
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:25:52,668] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:25:52,668] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:25:52,668] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.58 (from index 9)
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,668] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:25:52,669] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 9)
[2025-08-18 19:25:52,669] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:25:52,669] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:25:52,669] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,669] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:25:52,669] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,669] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:25:52,670] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:25:52,670] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:25:52,670] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,670] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.4500'), 'high': Decimal('12.8600'), 'low': Decimal('12.2300'), 'close': Decimal('12.3500'), 'volume': Decimal('33378865'), 'amount': Decimal('414478726.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.68, 'REF(SMA(close, 5),1)': 12.58, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.68}
[2025-08-18 19:25:52,670] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 19:25:52,670] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,670] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 19:25:52,670] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,670] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@11
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=7:12, 当前值=12.1800
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.668000000000001
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.668000000000001
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 11, 值: 12.668000000000001
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[11] = 12.668000000000001
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:25:52,671] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:25:52,671] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:25:52,671] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.68 (from index 10)
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,671] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:25:52,671] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 10)
[2025-08-18 19:25:52,671] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:25:52,672] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,672] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:25:52,672] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,672] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:25:52,672] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,673] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.2500'), 'high': Decimal('12.5400'), 'low': Decimal('11.9000'), 'close': Decimal('12.1800'), 'volume': Decimal('23136160'), 'amount': Decimal('281766986.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.668000000000001, 'REF(SMA(close, 5),1)': 12.68, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.668000000000001}
[2025-08-18 19:25:52,673] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 19:25:52,673] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,673] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 19:25:52,673] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,673] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,673] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,673] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,673] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@12
[2025-08-18 19:25:52,673] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=8:13, 当前值=11.6200
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.398
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.398
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 12, 值: 12.398
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[12] = 12.398
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:25:52,674] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,674] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:25:52,674] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.668000000000001 (from index 11)
[2025-08-18 19:25:52,674] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,675] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:25:52,675] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 11)
[2025-08-18 19:25:52,677] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:25:52,677] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:25:52,678] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,678] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:25:52,678] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,678] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:25:52,679] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:25:52,679] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,679] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:25:52,679] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,679] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0100'), 'high': Decimal('12.4600'), 'low': Decimal('11.5800'), 'close': Decimal('11.6200'), 'volume': Decimal('25982780'), 'amount': Decimal('311245180.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.398, 'REF(SMA(close, 5),1)': 12.668000000000001, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.398}
[2025-08-18 19:25:52,679] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 19:25:52,679] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,681] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 19:25:52,681] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,682] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,682] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,682] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,682] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@13
[2025-08-18 19:25:52,682] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=9:14, 当前值=11.5100
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.106
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.106
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 13, 值: 12.106
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[13] = 12.106
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:25:52,683] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:25:52,683] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:25:52,683] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.398 (from index 12)
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,683] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:25:52,684] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:25:52,684] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:25:52,685] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,685] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:25:52,685] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 12)
[2025-08-18 19:25:52,686] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:25:52,686] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:25:52,686] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,686] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:25:52,686] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,686] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:25:52,687] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:25:52,687] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,687] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:25:52,687] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,687] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.6000'), 'high': Decimal('11.9500'), 'low': Decimal('11.4300'), 'close': Decimal('11.5100'), 'volume': Decimal('18962453'), 'amount': Decimal('220750154.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.106, 'REF(SMA(close, 5),1)': 12.398, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.106}
[2025-08-18 19:25:52,688] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 19:25:52,688] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,688] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 19:25:52,688] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@14
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=10:15, 当前值=11.8200
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.895999999999999
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.895999999999999
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 14, 值: 11.895999999999999
[2025-08-18 19:25:52,688] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,689] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[14] = 11.895999999999999
[2025-08-18 19:25:52,689] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:25:52,689] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:25:52,689] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:25:52,689] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.106 (from index 13)
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:25:52,690] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 13)
[2025-08-18 19:25:52,690] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,690] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:25:52,690] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,690] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,690] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:25:52,690] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:25:52,691] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,691] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:25:52,691] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,691] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5200'), 'high': Decimal('12.0900'), 'low': Decimal('11.3800'), 'close': Decimal('11.8200'), 'volume': Decimal('23825452'), 'amount': Decimal('280686631.8800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.895999999999999, 'REF(SMA(close, 5),1)': 12.106, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.895999999999999}
[2025-08-18 19:25:52,691] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 19:25:52,691] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,691] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 19:25:52,691] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,691] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@15
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=11:16, 当前值=11.5300
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 15, 值: 11.732
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[15] = 11.732
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:25:52,692] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,692] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:25:52,692] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.895999999999999 (from index 14)
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:25:52,692] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:25:52,693] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 14)
[2025-08-18 19:25:52,693] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,693] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:25:52,693] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,693] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,693] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,693] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:25:52,694] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,694] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:25:52,694] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,694] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5800'), 'high': Decimal('12.0600'), 'low': Decimal('11.4400'), 'close': Decimal('11.5300'), 'volume': Decimal('24376800'), 'amount': Decimal('284215937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.895999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:25:52,694] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 19:25:52,694] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,694] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 19:25:52,694] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,694] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@16
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=12:17, 当前值=11.2400
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.544
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.544
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 16, 值: 11.544
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[16] = 11.544
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:25:52,695] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:25:52,695] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:25:52,695] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 15)
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:25:52,695] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 15)
[2025-08-18 19:25:52,695] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:25:52,695] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,695] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:25:52,696] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,696] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:25:52,696] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:25:52,696] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:25:52,696] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,696] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:25:52,696] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,696] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('11.5300'), 'low': Decimal('11.1200'), 'close': Decimal('11.2400'), 'volume': Decimal('17654000'), 'amount': Decimal('199083908.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.544, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.544}
[2025-08-18 19:25:52,696] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 19:25:52,696] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,696] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 19:25:52,696] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@17
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=13:18, 当前值=11.1200
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.443999999999999
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.443999999999999
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 17, 值: 11.443999999999999
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[17] = 11.443999999999999
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:25:52,697] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:25:52,697] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:25:52,697] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.544 (from index 16)
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,697] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:25:52,697] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 16)
[2025-08-18 19:25:52,697] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,697] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:25:52,698] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,698] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,698] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:25:52,698] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,698] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,698] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:25:52,698] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,698] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2300'), 'high': Decimal('11.2900'), 'low': Decimal('10.8300'), 'close': Decimal('11.1200'), 'volume': Decimal('16326051'), 'amount': Decimal('181333863.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.443999999999999, 'REF(SMA(close, 5),1)': 11.544, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.443999999999999}
[2025-08-18 19:25:52,698] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 19:25:52,698] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,698] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 19:25:52,698] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@18
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=14:19, 当前值=11.1500
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.372
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.372
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 18, 值: 11.372
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[18] = 11.372
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:25:52,699] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,699] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:25:52,699] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.443999999999999 (from index 17)
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:25:52,699] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 17)
[2025-08-18 19:25:52,699] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:25:52,699] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,699] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:25:52,700] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,700] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:25:52,700] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:25:52,700] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:25:52,700] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:25:52,700] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,700] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0900'), 'high': Decimal('11.2300'), 'low': Decimal('10.8800'), 'close': Decimal('11.1500'), 'volume': Decimal('11665380'), 'amount': Decimal('129719694.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.372, 'REF(SMA(close, 5),1)': 11.443999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.372}
[2025-08-18 19:25:52,700] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 19:25:52,700] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,700] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 19:25:52,700] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,700] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@19
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=15:20, 当前值=11.4000
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.288
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.288
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 19, 值: 11.288
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[19] = 11.288
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:25:52,701] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:25:52,701] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:25:52,701] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.372 (from index 18)
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,701] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:25:52,702] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 18)
[2025-08-18 19:25:52,702] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:25:52,702] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,702] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:25:52,702] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,702] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:25:52,702] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,702] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1800'), 'high': Decimal('11.5600'), 'low': Decimal('11.0700'), 'close': Decimal('11.4000'), 'volume': Decimal('20761600'), 'amount': Decimal('235697621.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.288, 'REF(SMA(close, 5),1)': 11.372, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.288}
[2025-08-18 19:25:52,702] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 19:25:52,703] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,703] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 19:25:52,703] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@20
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=16:21, 当前值=11.4600
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.274
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.274
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 20, 值: 11.274
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[20] = 11.274
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:25:52,703] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:25:52,703] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:25:52,703] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.288 (from index 19)
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@20
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=1:21, 当前值=11.4600
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.894499999999999
[2025-08-18 19:25:52,703] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.894499999999999
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 20, 值: 11.894499999999999
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[20] = 11.894499999999999
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:25:52,704] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 19)
[2025-08-18 19:25:52,704] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:25:52,704] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:25:52,704] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,704] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,704] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,704] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:25:52,704] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,704] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,704] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,704] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:25:52,704] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:25:52,705] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:25:52,705] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,705] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,705] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,705] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4700'), 'high': Decimal('11.8000'), 'low': Decimal('11.1500'), 'close': Decimal('11.4600'), 'volume': Decimal('24552500'), 'amount': Decimal('281309276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.274, 'REF(SMA(close, 5),1)': 11.288, 'SMA(close, 20)': 11.894499999999999, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.274, 'SMA(close,20)': 11.894499999999999}
[2025-08-18 19:25:52,705] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 19:25:52,705] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,705] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 19:25:52,705] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@21
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=17:22, 当前值=11.3000
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.286
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.286
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 21, 值: 11.286
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[21] = 11.286
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:25:52,705] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:25:52,705] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:25:52,705] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.274 (from index 20)
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,705] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@21
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=2:22, 当前值=11.3000
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.807500000000001
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.807500000000001
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 21, 值: 11.807500000000001
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[21] = 11.807500000000001
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:25:52,706] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,706] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:25:52,706] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.894499999999999 (from index 20)
[2025-08-18 19:25:52,706] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:25:52,706] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:25:52,706] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,706] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,706] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,706] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:25:52,706] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:25:52,706] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,707] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,707] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:25:52,707] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:25:52,707] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:25:52,707] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,707] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,707] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,707] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('12.0000'), 'low': Decimal('11.2500'), 'close': Decimal('11.3000'), 'volume': Decimal('29079220'), 'amount': Decimal('336568278.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.286, 'REF(SMA(close, 5),1)': 11.274, 'SMA(close, 20)': 11.807500000000001, 'REF(SMA(close, 20),1)': 11.894499999999999, 'SMA(close,5)': 11.286, 'SMA(close,20)': 11.807500000000001}
[2025-08-18 19:25:52,707] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 19:25:52,707] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,707] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 19:25:52,707] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@22
[2025-08-18 19:25:52,707] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=18:23, 当前值=11.2600
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.314
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.314
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 22, 值: 11.314
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[22] = 11.314
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:25:52,708] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:25:52,708] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:25:52,708] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.286 (from index 21)
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,708] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@22
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=3:23, 当前值=11.2600
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7835
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7835
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 22, 值: 11.7835
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[22] = 11.7835
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:25:52,709] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,709] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:25:52,709] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.807500000000001 (from index 21)
[2025-08-18 19:25:52,709] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:25:52,709] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:25:52,709] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,709] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,709] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,709] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,709] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:25:52,709] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:25:52,710] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:25:52,710] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,710] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,710] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,710] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:25:52,710] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:25:52,710] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:25:52,710] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,710] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,710] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,711] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1600'), 'high': Decimal('11.5500'), 'low': Decimal('11.0900'), 'close': Decimal('11.2600'), 'volume': Decimal('16376940'), 'amount': Decimal('184800725.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.314, 'REF(SMA(close, 5),1)': 11.286, 'SMA(close, 20)': 11.7835, 'REF(SMA(close, 20),1)': 11.807500000000001, 'SMA(close,5)': 11.314, 'SMA(close,20)': 11.7835}
[2025-08-18 19:25:52,711] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 19:25:52,711] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,711] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 19:25:52,711] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@23
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=19:24, 当前值=10.8600
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.256
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.256
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 23, 值: 11.256
[2025-08-18 19:25:52,712] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[23] = 11.256
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:25:52,713] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:25:52,713] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:25:52,713] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.314 (from index 22)
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@23
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=4:24, 当前值=10.8600
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7715
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7715
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 23, 值: 11.7715
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[23] = 11.7715
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:25:52,713] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,713] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:25:52,713] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7835 (from index 22)
[2025-08-18 19:25:52,713] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:25:52,713] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:25:52,713] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,713] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,713] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,713] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,714] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:25:52,714] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,714] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,714] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:25:52,714] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:25:52,714] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:25:52,714] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,714] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,714] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,714] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.2600'), 'low': Decimal('10.7000'), 'close': Decimal('10.8600'), 'volume': Decimal('18454110'), 'amount': Decimal('200513009.9000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.256, 'REF(SMA(close, 5),1)': 11.314, 'SMA(close, 20)': 11.7715, 'REF(SMA(close, 20),1)': 11.7835, 'SMA(close,5)': 11.256, 'SMA(close,20)': 11.7715}
[2025-08-18 19:25:52,714] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 19:25:52,714] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,714] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 19:25:52,714] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@24
[2025-08-18 19:25:52,714] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=20:25, 当前值=11.1900
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 24, 值: 11.214
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[24] = 11.214
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:25:52,715] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:25:52,715] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:25:52,715] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.256 (from index 23)
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@24
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=5:25, 当前值=11.1900
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.744499999999999
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.744499999999999
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 24, 值: 11.744499999999999
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[24] = 11.744499999999999
[2025-08-18 19:25:52,715] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:25:52,715] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,715] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:25:52,715] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7715 (from index 23)
[2025-08-18 19:25:52,715] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,715] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,715] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,715] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,715] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,716] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,716] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,716] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,716] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:25:52,716] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,716] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,716] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,716] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,716] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,716] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8300'), 'high': Decimal('11.3600'), 'low': Decimal('10.6300'), 'close': Decimal('11.1900'), 'volume': Decimal('15540620'), 'amount': Decimal('173423981.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.256, 'SMA(close, 20)': 11.744499999999999, 'REF(SMA(close, 20),1)': 11.7715, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.744499999999999}
[2025-08-18 19:25:52,716] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 19:25:52,716] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,716] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 19:25:52,716] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,716] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@25
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=21:26, 当前值=11.3700
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.196
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.196
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 25, 值: 11.196
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[25] = 11.196
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:25:52,717] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,717] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,717] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 24)
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@25
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=6:26, 当前值=11.3700
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7205
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7205
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 25, 值: 11.7205
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[25] = 11.7205
[2025-08-18 19:25:52,717] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:25:52,717] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,717] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:25:52,717] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.744499999999999 (from index 24)
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,718] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:25:52,718] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:25:52,718] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,718] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,718] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.7000'), 'low': Decimal('11.1000'), 'close': Decimal('11.3700'), 'volume': Decimal('17187760'), 'amount': Decimal('195723936.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.196, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.7205, 'REF(SMA(close, 20),1)': 11.744499999999999, 'SMA(close,5)': 11.196, 'SMA(close,20)': 11.7205}
[2025-08-18 19:25:52,718] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 19:25:52,718] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,718] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 19:25:52,718] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@26
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=22:27, 当前值=11.4200
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.22
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.22
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 26, 值: 11.22
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[26] = 11.22
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:25:52,719] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:25:52,719] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:25:52,719] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.196 (from index 25)
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@26
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=7:27, 当前值=11.4200
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.6795
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.6795
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 26, 值: 11.6795
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[26] = 11.6795
[2025-08-18 19:25:52,719] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:25:52,720] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7205 (from index 25)
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,720] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:25:52,720] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:25:52,720] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,720] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,720] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3000'), 'high': Decimal('11.5700'), 'low': Decimal('11.2300'), 'close': Decimal('11.4200'), 'volume': Decimal('11928520'), 'amount': Decimal('135881154.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.22, 'REF(SMA(close, 5),1)': 11.196, 'SMA(close, 20)': 11.6795, 'REF(SMA(close, 20),1)': 11.7205, 'SMA(close,5)': 11.22, 'SMA(close,20)': 11.6795}
[2025-08-18 19:25:52,720] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 19:25:52,720] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,720] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 19:25:52,721] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@27
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=23:28, 当前值=11.2300
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 27, 值: 11.214
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[27] = 11.214
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:25:52,721] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:25:52,721] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:25:52,721] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.22 (from index 26)
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@27
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=8:28, 当前值=11.2300
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.5925
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.5925
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 27, 值: 11.5925
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,721] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[27] = 11.5925
[2025-08-18 19:25:52,722] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:25:52,722] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.6795 (from index 26)
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,722] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:25:52,722] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,722] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,722] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,723] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.5500'), 'low': Decimal('11.0700'), 'close': Decimal('11.2300'), 'volume': Decimal('10643600'), 'amount': Decimal('119294545.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.22, 'SMA(close, 20)': 11.5925, 'REF(SMA(close, 20),1)': 11.6795, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.5925}
[2025-08-18 19:25:52,723] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 19:25:52,723] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,723] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 19:25:52,723] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@28
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=24:29, 当前值=11.3000
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.302
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.302
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 28, 值: 11.302
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[28] = 11.302
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:25:52,723] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:25:52,723] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:25:52,723] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 27)
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@28
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=9:29, 当前值=11.3000
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.509
[2025-08-18 19:25:52,723] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.509
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 28, 值: 11.509
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[28] = 11.509
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:25:52,724] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.5925 (from index 27)
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:25:52,724] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:25:52,724] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,725] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1500'), 'high': Decimal('11.3200'), 'low': Decimal('11.1000'), 'close': Decimal('11.3000'), 'volume': Decimal('8740380'), 'amount': Decimal('98150127.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.302, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.509, 'REF(SMA(close, 20),1)': 11.5925, 'SMA(close,5)': 11.302, 'SMA(close,20)': 11.509}
[2025-08-18 19:25:52,725] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 19:25:52,725] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,725] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 19:25:52,725] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,726] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,726] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:25:52,726] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,726] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@29
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=25:30, 当前值=11.8900
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.442
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.442
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 29, 值: 11.442
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[29] = 11.442
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:25:52,727] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:25:52,727] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:25:52,727] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.302 (from index 28)
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:25:52,727] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@29
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=10:30, 当前值=11.8900
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.459999999999999
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.459999999999999
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 29, 值: 11.459999999999999
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[29] = 11.459999999999999
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:25:52,728] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:25:52,728] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.509 (from index 28)
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:25:52,728] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,728] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,728] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:25:52,728] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,728] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,728] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:25:52,728] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:25:52,729] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:25:52,729] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,729] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,729] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,729] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.9300'), 'low': Decimal('11.3100'), 'close': Decimal('11.8900'), 'volume': Decimal('23118500'), 'amount': Decimal('269805301.3600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.442, 'REF(SMA(close, 5),1)': 11.302, 'SMA(close, 20)': 11.459999999999999, 'REF(SMA(close, 20),1)': 11.509, 'SMA(close,5)': 11.442, 'SMA(close,20)': 11.459999999999999}
[2025-08-18 19:25:52,729] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 19:25:52,729] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,729] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 19:25:52,729] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@30
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=26:31, 当前值=10.7000
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.308
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.308
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 30, 值: 11.308
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[30] = 11.308
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:25:52,729] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:25:52,729] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:25:52,729] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.442 (from index 29)
[2025-08-18 19:25:52,729] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@30
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=11:31, 当前值=10.7000
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.377500000000001
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.377500000000001
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 30, 值: 11.377500000000001
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[30] = 11.377500000000001
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:25:52,730] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,730] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:25:52,730] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.459999999999999 (from index 29)
[2025-08-18 19:25:52,730] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:25:52,730] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:25:52,730] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,730] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,730] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,730] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:25:52,730] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,730] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,730] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,730] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:25:52,731] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:25:52,731] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:25:52,731] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,731] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,731] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,731] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9900'), 'high': Decimal('11.1900'), 'low': Decimal('10.7000'), 'close': Decimal('10.7000'), 'volume': Decimal('27945200'), 'amount': Decimal('300147468.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.308, 'REF(SMA(close, 5),1)': 11.442, 'SMA(close, 20)': 11.377500000000001, 'REF(SMA(close, 20),1)': 11.459999999999999, 'SMA(close,5)': 11.308, 'SMA(close,20)': 11.377500000000001}
[2025-08-18 19:25:52,731] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 19:25:52,731] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,731] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 19:25:52,731] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@31
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=27:32, 当前值=9.9300
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.01
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.01
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 31, 值: 11.01
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[31] = 11.01
[2025-08-18 19:25:52,731] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:25:52,731] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:25:52,731] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:25:52,731] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.308 (from index 30)
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@31
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=12:32, 当前值=9.9300
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.265
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.265
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 31, 值: 11.265
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[31] = 11.265
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:25:52,732] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,732] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:25:52,732] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.377500000000001 (from index 30)
[2025-08-18 19:25:52,732] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:25:52,732] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:25:52,732] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:25:52,732] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:25:52,732] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,732] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:25:52,732] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:25:52,732] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,732] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:25:52,732] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:25:52,733] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:25:52,733] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:25:52,733] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:25:52,733] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:25:52,733] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,733] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3700'), 'high': Decimal('10.4300'), 'low': Decimal('9.7500'), 'close': Decimal('9.9300'), 'volume': Decimal('33570940'), 'amount': Decimal('334695551.6800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.01, 'REF(SMA(close, 5),1)': 11.308, 'SMA(close, 20)': 11.265, 'REF(SMA(close, 20),1)': 11.377500000000001, 'SMA(close,5)': 11.01, 'SMA(close,20)': 11.265}
[2025-08-18 19:25:52,733] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 19:25:52,733] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,733] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 19:25:52,733] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@32
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=28:33, 当前值=9.8900
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.742
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.742
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 32, 值: 10.742
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[32] = 10.742
[2025-08-18 19:25:52,733] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:25:52,733] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:25:52,733] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:25:52,733] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.01 (from index 31)
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@32
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=13:33, 当前值=9.8900
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.1785
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.1785
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 32, 值: 11.1785
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[32] = 11.1785
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:25:52,734] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:25:52,734] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:25:52,734] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.265 (from index 31)
[2025-08-18 19:25:52,734] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:25:52,734] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:25:52,734] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,734] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,734] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,734] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:25:52,734] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,734] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,734] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,734] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:25:52,735] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:25:52,735] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:25:52,735] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,735] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,735] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,735] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8800'), 'high': Decimal('10.1500'), 'low': Decimal('9.8500'), 'close': Decimal('9.8900'), 'volume': Decimal('17583985'), 'amount': Decimal('174553922.9500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.742, 'REF(SMA(close, 5),1)': 11.01, 'SMA(close, 20)': 11.1785, 'REF(SMA(close, 20),1)': 11.265, 'SMA(close,5)': 10.742, 'SMA(close,20)': 11.1785}
[2025-08-18 19:25:52,735] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 19:25:52,735] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,735] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 19:25:52,735] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@33
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=29:34, 当前值=9.7500
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.431999999999999
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.431999999999999
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 33, 值: 10.431999999999999
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[33] = 10.431999999999999
[2025-08-18 19:25:52,735] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:25:52,735] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:25:52,735] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:25:52,736] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.742 (from index 32)
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@33
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=14:34, 当前值=9.7500
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.0905
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.0905
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 33, 值: 11.0905
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[33] = 11.0905
[2025-08-18 19:25:52,736] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:25:52,736] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,736] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:25:52,736] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.1785 (from index 32)
[2025-08-18 19:25:52,736] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,736] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,737] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,737] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,737] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,737] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,737] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:25:52,737] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,737] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:25:52,737] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,737] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,737] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,737] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,738] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8500'), 'high': Decimal('9.8900'), 'low': Decimal('9.6900'), 'close': Decimal('9.7500'), 'volume': Decimal('13242400'), 'amount': Decimal('129118773.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.431999999999999, 'REF(SMA(close, 5),1)': 10.742, 'SMA(close, 20)': 11.0905, 'REF(SMA(close, 20),1)': 11.1785, 'SMA(close,5)': 10.431999999999999, 'SMA(close,20)': 11.0905}
[2025-08-18 19:25:52,738] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 19:25:52,738] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,738] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 19:25:52,738] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@34
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=30:35, 当前值=9.8500
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.024
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.024
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 34, 值: 10.024
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[34] = 10.024
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:25:52,738] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,738] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:25:52,738] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.431999999999999 (from index 33)
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@34
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=15:35, 当前值=9.8500
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.992
[2025-08-18 19:25:52,738] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.992
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 34, 值: 10.992
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[34] = 10.992
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:25:52,739] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.0905 (from index 33)
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:25:52,739] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:25:52,739] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,739] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('9.9400'), 'low': Decimal('9.7100'), 'close': Decimal('9.8500'), 'volume': Decimal('12705234'), 'amount': Decimal('125082445.7000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.024, 'REF(SMA(close, 5),1)': 10.431999999999999, 'SMA(close, 20)': 10.992, 'REF(SMA(close, 20),1)': 11.0905, 'SMA(close,5)': 10.024, 'SMA(close,20)': 10.992}
[2025-08-18 19:25:52,740] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 19:25:52,740] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,740] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 19:25:52,740] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@35
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=31:36, 当前值=9.9400
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 35, 值: 9.872
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[35] = 9.872
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:25:52,740] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:25:52,740] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:25:52,740] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.024 (from index 34)
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@35
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=16:36, 当前值=9.9400
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.9125
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.9125
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 35, 值: 10.9125
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[35] = 10.9125
[2025-08-18 19:25:52,740] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:25:52,741] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.992 (from index 34)
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,741] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,741] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,741] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:25:52,741] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,741] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:25:52,741] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,741] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,742] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,742] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,742] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,742] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9200'), 'high': Decimal('10.1300'), 'low': Decimal('9.8900'), 'close': Decimal('9.9400'), 'volume': Decimal('17735100'), 'amount': Decimal('177170090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 10.024, 'SMA(close, 20)': 10.9125, 'REF(SMA(close, 20),1)': 10.992, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.9125}
[2025-08-18 19:25:52,742] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 19:25:52,742] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,742] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 19:25:52,742] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@36
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=32:37, 当前值=9.9300
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 36, 值: 9.872
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[36] = 9.872
[2025-08-18 19:25:52,743] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:25:52,743] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 35)
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@36
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=17:37, 当前值=9.9300
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.847
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.847
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 36, 值: 10.847
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[36] = 10.847
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:25:52,744] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,744] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:25:52,744] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.9125 (from index 35)
[2025-08-18 19:25:52,744] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:25:52,744] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:25:52,744] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,744] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:25:52,744] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,745] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:25:52,745] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:25:52,745] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,745] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,745] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:25:52,745] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:25:52,745] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,745] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9500'), 'high': Decimal('10.2000'), 'low': Decimal('9.8000'), 'close': Decimal('9.9300'), 'volume': Decimal('13795275'), 'amount': Decimal('137802304.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.847, 'REF(SMA(close, 20),1)': 10.9125, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.847}
[2025-08-18 19:25:52,745] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 19:25:52,745] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,745] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 19:25:52,745] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@37
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=33:38, 当前值=9.8100
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.856
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.856
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 37, 值: 9.856
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,745] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[37] = 9.856
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:25:52,746] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:25:52,746] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:25:52,746] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 36)
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@37
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=18:38, 当前值=9.8100
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7815
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7815
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 37, 值: 10.7815
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[37] = 10.7815
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:25:52,746] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:25:52,746] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:25:52,746] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.847 (from index 36)
[2025-08-18 19:25:52,746] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:25:52,746] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:25:52,746] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,746] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,746] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,746] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,747] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:25:52,747] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,747] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,747] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:25:52,747] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:25:52,747] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:25:52,747] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,747] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,747] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,747] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('9.9700'), 'low': Decimal('9.7500'), 'close': Decimal('9.8100'), 'volume': Decimal('12661765'), 'amount': Decimal('124434027.1100'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.856, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.7815, 'REF(SMA(close, 20),1)': 10.847, 'SMA(close,5)': 9.856, 'SMA(close,20)': 10.7815}
[2025-08-18 19:25:52,747] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 19:25:52,747] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,747] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 19:25:52,747] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@38
[2025-08-18 19:25:52,747] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=34:39, 当前值=9.7700
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 38, 值: 9.86
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[38] = 9.86
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:25:52,748] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:25:52,748] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:25:52,748] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.856 (from index 37)
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@38
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=19:39, 当前值=9.7700
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7125
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7125
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 38, 值: 10.7125
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[38] = 10.7125
[2025-08-18 19:25:52,748] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:25:52,748] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,748] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:25:52,748] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7815 (from index 37)
[2025-08-18 19:25:52,748] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,748] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,748] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,749] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,749] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,749] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:25:52,749] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,749] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,749] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,749] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,749] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8900'), 'low': Decimal('9.7400'), 'close': Decimal('9.7700'), 'volume': Decimal('8516580'), 'amount': Decimal('83461624.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.856, 'SMA(close, 20)': 10.7125, 'REF(SMA(close, 20),1)': 10.7815, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.7125}
[2025-08-18 19:25:52,749] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 19:25:52,749] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,749] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 19:25:52,749] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@39
[2025-08-18 19:25:52,749] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=35:40, 当前值=9.8500
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 39, 值: 9.86
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[39] = 9.86
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:25:52,750] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,750] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,750] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 38)
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@39
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=20:40, 当前值=9.8500
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.635
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.635
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 39, 值: 10.635
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[39] = 10.635
[2025-08-18 19:25:52,750] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:25:52,750] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,750] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:25:52,750] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7125 (from index 38)
[2025-08-18 19:25:52,750] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,750] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,750] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:25:52,750] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:25:52,750] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,751] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,751] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,751] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,751] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:25:52,751] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,751] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:25:52,751] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:25:52,751] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:25:52,751] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,751] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,751] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:25:52,751] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:25:52,751] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,751] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8700'), 'low': Decimal('9.6400'), 'close': Decimal('9.8500'), 'volume': Decimal('12892399'), 'amount': Decimal('125856550.5500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.635, 'REF(SMA(close, 20),1)': 10.7125, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.635}
[2025-08-18 19:25:52,751] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 19:25:52,751] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,752] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 19:25:52,752] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@40
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=36:41, 当前值=9.7200
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.815999999999999
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.815999999999999
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 40, 值: 9.815999999999999
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[40] = 9.815999999999999
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:25:52,752] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:25:52,752] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:25:52,752] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 39)
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@40
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=21:41, 当前值=9.7200
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.548
[2025-08-18 19:25:52,752] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.548
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 40, 值: 10.548
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[40] = 10.548
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:25:52,753] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.635 (from index 39)
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,753] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:25:52,753] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,754] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8700'), 'low': Decimal('9.4800'), 'close': Decimal('9.7200'), 'volume': Decimal('15174100'), 'amount': Decimal('145998673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.815999999999999, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.548, 'REF(SMA(close, 20),1)': 10.635, 'SMA(close,5)': 9.815999999999999, 'SMA(close,20)': 10.548}
[2025-08-18 19:25:52,754] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 19:25:52,754] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,754] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 19:25:52,754] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@41
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=37:42, 当前值=9.7100
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.772
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.772
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 41, 值: 9.772
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[41] = 9.772
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:25:52,754] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,754] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:25:52,754] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.815999999999999 (from index 40)
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@41
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=22:42, 当前值=9.7100
[2025-08-18 19:25:52,754] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.4685
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.4685
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 41, 值: 10.4685
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[41] = 10.4685
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:25:52,755] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.548 (from index 40)
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:25:52,755] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,755] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,756] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6400'), 'high': Decimal('9.7900'), 'low': Decimal('9.6200'), 'close': Decimal('9.7100'), 'volume': Decimal('9069800'), 'amount': Decimal('88084034.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.772, 'REF(SMA(close, 5),1)': 9.815999999999999, 'SMA(close, 20)': 10.4685, 'REF(SMA(close, 20),1)': 10.548, 'SMA(close,5)': 9.772, 'SMA(close,20)': 10.4685}
[2025-08-18 19:25:52,756] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 19:25:52,756] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,756] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 19:25:52,756] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@42
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=38:43, 当前值=9.6000
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.73
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.73
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 42, 值: 9.73
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[42] = 9.73
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:25:52,756] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:25:52,756] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:25:52,756] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.772 (from index 41)
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@42
[2025-08-18 19:25:52,756] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=23:43, 当前值=9.6000
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.3855
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.3855
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 42, 值: 10.3855
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[42] = 10.3855
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:25:52,757] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.4685 (from index 41)
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,757] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,757] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:25:52,757] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,758] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,758] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,758] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6700'), 'high': Decimal('9.6800'), 'low': Decimal('9.5700'), 'close': Decimal('9.6000'), 'volume': Decimal('6631455'), 'amount': Decimal('63720844.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.73, 'REF(SMA(close, 5),1)': 9.772, 'SMA(close, 20)': 10.3855, 'REF(SMA(close, 20),1)': 10.4685, 'SMA(close,5)': 9.73, 'SMA(close,20)': 10.3855}
[2025-08-18 19:25:52,758] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 19:25:52,758] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,758] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 19:25:52,758] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,758] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,758] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:25:52,758] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,758] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@43
[2025-08-18 19:25:52,758] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=39:44, 当前值=9.5900
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.693999999999999
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.693999999999999
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 43, 值: 9.693999999999999
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[43] = 9.693999999999999
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:25:52,759] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:25:52,759] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:25:52,759] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.73 (from index 42)
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@43
[2025-08-18 19:25:52,759] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=24:44, 当前值=9.5900
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.322
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.322
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 43, 值: 10.322
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[43] = 10.322
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:25:52,760] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,760] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:25:52,760] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.3855 (from index 42)
[2025-08-18 19:25:52,760] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,760] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,760] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:25:52,760] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:25:52,760] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,760] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,760] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:25:52,760] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,760] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:25:52,761] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:25:52,761] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,761] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,761] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:25:52,761] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:25:52,761] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,761] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.5900'), 'high': Decimal('9.7000'), 'low': Decimal('9.5300'), 'close': Decimal('9.5900'), 'volume': Decimal('6628475'), 'amount': Decimal('63641406.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.693999999999999, 'REF(SMA(close, 5),1)': 9.73, 'SMA(close, 20)': 10.322, 'REF(SMA(close, 20),1)': 10.3855, 'SMA(close,5)': 9.693999999999999, 'SMA(close,20)': 10.322}
[2025-08-18 19:25:52,761] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 19:25:52,761] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,761] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 19:25:52,761] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@44
[2025-08-18 19:25:52,761] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=40:45, 当前值=9.9400
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.712
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.712
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 44, 值: 9.712
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[44] = 9.712
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:25:52,762] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,762] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:25:52,762] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.693999999999999 (from index 43)
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@44
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=25:45, 当前值=9.9400
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.2595
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.2595
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 44, 值: 10.2595
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,762] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[44] = 10.2595
[2025-08-18 19:25:52,763] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:25:52,763] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.322 (from index 43)
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,763] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:25:52,763] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:25:52,763] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,763] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,763] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('10.0500'), 'low': Decimal('9.6000'), 'close': Decimal('9.9400'), 'volume': Decimal('22449020'), 'amount': Decimal('221168482.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.712, 'REF(SMA(close, 5),1)': 9.693999999999999, 'SMA(close, 20)': 10.2595, 'REF(SMA(close, 20),1)': 10.322, 'SMA(close,5)': 9.712, 'SMA(close,20)': 10.2595}
[2025-08-18 19:25:52,764] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 19:25:52,764] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,764] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 19:25:52,764] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@45
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=41:46, 当前值=9.8000
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.728
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.728
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 45, 值: 9.728
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[45] = 9.728
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:25:52,764] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:25:52,764] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:25:52,764] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.712 (from index 44)
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@45
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=26:46, 当前值=9.8000
[2025-08-18 19:25:52,764] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.181000000000001
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.181000000000001
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 45, 值: 10.181000000000001
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[45] = 10.181000000000001
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:25:52,765] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.2595 (from index 44)
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,765] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,765] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:25:52,765] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,766] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,766] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,766] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9300'), 'high': Decimal('10.0500'), 'low': Decimal('9.7500'), 'close': Decimal('9.8000'), 'volume': Decimal('14326900'), 'amount': Decimal('140652171.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.728, 'REF(SMA(close, 5),1)': 9.712, 'SMA(close, 20)': 10.181000000000001, 'REF(SMA(close, 20),1)': 10.2595, 'SMA(close,5)': 9.728, 'SMA(close,20)': 10.181000000000001}
[2025-08-18 19:25:52,766] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 19:25:52,766] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,766] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 19:25:52,766] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@46
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=42:47, 当前值=9.8800
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.762
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.762
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 46, 值: 9.762
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[46] = 9.762
[2025-08-18 19:25:52,766] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:25:52,767] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:25:52,767] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:25:52,767] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.728 (from index 45)
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@46
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=27:47, 当前值=9.8800
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.104000000000001
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.104000000000001
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 46, 值: 10.104000000000001
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[46] = 10.104000000000001
[2025-08-18 19:25:52,767] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:25:52,767] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,767] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:25:52,767] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.181000000000001 (from index 45)
[2025-08-18 19:25:52,767] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,768] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,768] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:25:52,768] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,768] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:25:52,768] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:25:52,768] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,768] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,768] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8900'), 'low': Decimal('9.6500'), 'close': Decimal('9.8800'), 'volume': Decimal('11917700'), 'amount': Decimal('116643412.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.762, 'REF(SMA(close, 5),1)': 9.728, 'SMA(close, 20)': 10.104000000000001, 'REF(SMA(close, 20),1)': 10.181000000000001, 'SMA(close,5)': 9.762, 'SMA(close,20)': 10.104000000000001}
[2025-08-18 19:25:52,768] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 19:25:52,768] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,768] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 19:25:52,768] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@47
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=43:48, 当前值=10.8700
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.016
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.016
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 47, 值: 10.016
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[47] = 10.016
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:25:52,769] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:25:52,769] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:25:52,769] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.762 (from index 46)
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@47
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=28:48, 当前值=10.8700
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.086
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.086
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 47, 值: 10.086
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[47] = 10.086
[2025-08-18 19:25:52,769] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:25:52,769] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:25:52,770] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.104000000000001 (from index 46)
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,770] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:25:52,770] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:25:52,770] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:25:52,770] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,770] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('10.8700'), 'low': Decimal('9.7700'), 'close': Decimal('10.8700'), 'volume': Decimal('34331640'), 'amount': Decimal('358998997.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.016, 'REF(SMA(close, 5),1)': 9.762, 'SMA(close, 20)': 10.086, 'REF(SMA(close, 20),1)': 10.104000000000001, 'SMA(close,5)': 10.016, 'SMA(close,20)': 10.086}
[2025-08-18 19:25:52,771] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 19:25:52,771] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,771] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 19:25:52,771] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@48
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=44:49, 当前值=11.2400
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.346
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.346
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 48, 值: 10.346
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[48] = 10.346
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:25:52,771] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:25:52,771] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:25:52,771] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.016 (from index 47)
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@48
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=29:49, 当前值=11.2400
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.083
[2025-08-18 19:25:52,771] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.083
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 48, 值: 10.083
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[48] = 10.083
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:25:52,772] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.086 (from index 47)
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:25:52,772] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:25:52,772] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:25:52,772] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:25:52,772] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:25:52,773] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:25:52,773] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:25:52,773] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,773] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2100'), 'high': Decimal('11.6500'), 'low': Decimal('10.7600'), 'close': Decimal('11.2400'), 'volume': Decimal('51811380'), 'amount': Decimal('574331218.0600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.346, 'REF(SMA(close, 5),1)': 10.016, 'SMA(close, 20)': 10.083, 'REF(SMA(close, 20),1)': 10.086, 'SMA(close,5)': 10.346, 'SMA(close,20)': 10.083}
[2025-08-18 19:25:52,773] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 19:25:52,773] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,773] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 19:25:52,773] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@49
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=45:50, 当前值=10.8900
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.536
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.536
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 49, 值: 10.536
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[49] = 10.536
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:25:52,773] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:25:52,773] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:25:52,773] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.346 (from index 48)
[2025-08-18 19:25:52,773] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@49
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=30:50, 当前值=10.8900
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.033
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.033
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 49, 值: 10.033
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[49] = 10.033
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:25:52,774] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:25:52,774] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:25:52,774] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.083 (from index 48)
[2025-08-18 19:25:52,774] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:25:52,774] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:25:52,774] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:25:52,774] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:25:52,774] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,774] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:25:52,774] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,774] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:25:52,774] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:25:52,774] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:25:52,775] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:25:52,775] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:25:52,775] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:25:52,775] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:25:52,775] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,775] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8000'), 'high': Decimal('10.9700'), 'low': Decimal('10.4800'), 'close': Decimal('10.8900'), 'volume': Decimal('29621940'), 'amount': Decimal('319078682.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.536, 'REF(SMA(close, 5),1)': 10.346, 'SMA(close, 20)': 10.033, 'REF(SMA(close, 20),1)': 10.083, 'SMA(close,5)': 10.536, 'SMA(close,20)': 10.033}
[2025-08-18 19:25:52,776] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 19:25:52,776] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,776] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 19:25:52,776] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,776] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@50
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=46:51, 当前值=10.9600
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.768
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.768
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 50, 值: 10.768
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[50] = 10.768
[2025-08-18 19:25:52,777] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:25:52,778] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:25:52,778] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:25:52,778] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.536 (from index 49)
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@50
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=31:51, 当前值=10.9600
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.046
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.046
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 50, 值: 10.046
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[50] = 10.046
[2025-08-18 19:25:52,778] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:25:52,778] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:25:52,778] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:25:52,778] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.033 (from index 49)
[2025-08-18 19:25:52,778] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:25:52,778] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:25:52,778] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:25:52,778] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:25:52,778] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,779] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:25:52,779] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,779] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:25:52,779] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:25:52,779] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:25:52,779] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:25:52,779] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:25:52,779] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:25:52,779] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,779] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8100'), 'high': Decimal('11.1800'), 'low': Decimal('10.7500'), 'close': Decimal('10.9600'), 'volume': Decimal('27855000'), 'amount': Decimal('305544408.2400'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.768, 'REF(SMA(close, 5),1)': 10.536, 'SMA(close, 20)': 10.046, 'REF(SMA(close, 20),1)': 10.033, 'SMA(close,5)': 10.768, 'SMA(close,20)': 10.046}
[2025-08-18 19:25:52,779] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 19:25:52,779] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,779] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 19:25:52,779] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@51
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=47:52, 当前值=10.6400
[2025-08-18 19:25:52,779] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.92
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.92
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 51, 值: 10.92
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[51] = 10.92
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:25:52,780] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:25:52,780] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:25:52,780] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.768 (from index 50)
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@51
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=32:52, 当前值=10.6400
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.0815
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.0815
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 51, 值: 10.0815
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[51] = 10.0815
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:25:52,780] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:25:52,780] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:25:52,780] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.046 (from index 50)
[2025-08-18 19:25:52,780] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:25:52,780] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:25:52,780] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,780] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,780] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,780] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,781] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:25:52,781] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,781] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,781] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:25:52,781] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:25:52,781] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:25:52,781] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,781] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,781] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,781] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9000'), 'high': Decimal('10.9600'), 'low': Decimal('10.5000'), 'close': Decimal('10.6400'), 'volume': Decimal('25362800'), 'amount': Decimal('269858594.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.92, 'REF(SMA(close, 5),1)': 10.768, 'SMA(close, 20)': 10.0815, 'REF(SMA(close, 20),1)': 10.046, 'SMA(close,5)': 10.92, 'SMA(close,20)': 10.0815}
[2025-08-18 19:25:52,781] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 19:25:52,781] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,781] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 19:25:52,781] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@52
[2025-08-18 19:25:52,781] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=48:53, 当前值=10.2700
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.8
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.8
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 52, 值: 10.8
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[52] = 10.8
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:25:52,782] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:25:52,782] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:25:52,782] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.92 (from index 51)
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@52
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=33:53, 当前值=10.2700
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1005
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1005
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 52, 值: 10.1005
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[52] = 10.1005
[2025-08-18 19:25:52,782] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:25:52,782] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,782] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:25:52,782] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.0815 (from index 51)
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,783] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:25:52,783] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:25:52,783] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,783] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,783] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.6400'), 'high': Decimal('10.7100'), 'low': Decimal('10.2600'), 'close': Decimal('10.2700'), 'volume': Decimal('21862900'), 'amount': Decimal('228640246.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.8, 'REF(SMA(close, 5),1)': 10.92, 'SMA(close, 20)': 10.1005, 'REF(SMA(close, 20),1)': 10.0815, 'SMA(close,5)': 10.8, 'SMA(close,20)': 10.1005}
[2025-08-18 19:25:52,783] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 19:25:52,783] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,783] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 19:25:52,783] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,783] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@53
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=49:54, 当前值=10.3000
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.612
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.612
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 53, 值: 10.612
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[53] = 10.612
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:25:52,784] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:25:52,784] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:25:52,784] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.8 (from index 52)
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@53
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=34:54, 当前值=10.3000
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.128
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.128
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 53, 值: 10.128
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[53] = 10.128
[2025-08-18 19:25:52,784] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:25:52,784] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,784] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:25:52,784] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.1005 (from index 52)
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,785] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:25:52,785] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:25:52,785] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:25:52,785] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,785] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.1200'), 'high': Decimal('10.3600'), 'low': Decimal('10.0800'), 'close': Decimal('10.3000'), 'volume': Decimal('15409920'), 'amount': Decimal('157573581.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.612, 'REF(SMA(close, 5),1)': 10.8, 'SMA(close, 20)': 10.128, 'REF(SMA(close, 20),1)': 10.1005, 'SMA(close,5)': 10.612, 'SMA(close,20)': 10.128}
[2025-08-18 19:25:52,785] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 19:25:52,785] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:25:52,785] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 19:25:52,785] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@54
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=50:55, 当前值=10.2800
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.49
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.49
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 54, 值: 10.49
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[54] = 10.49
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:25:52,786] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:25:52,786] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:25:52,786] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.612 (from index 53)
[2025-08-18 19:25:52,786] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@54
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=35:55, 当前值=10.2800
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1495
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1495
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 54, 值: 10.1495
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[54] = 10.1495
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:25:52,787] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:25:52,787] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:25:52,787] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.128 (from index 53)
[2025-08-18 19:25:52,787] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:25:52,787] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:25:52,787] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,787] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,787] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:25:52,787] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:25:52,787] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:25:52,788] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:25:52,788] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:25:52,788] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:25:52,788] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,788] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,788] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:25:52,788] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:25:52,788] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:25:52,788] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,788] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:25:52,788] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:25:52,788] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3000'), 'high': Decimal('10.4100'), 'low': Decimal('10.2100'), 'close': Decimal('10.2800'), 'volume': Decimal('14335285'), 'amount': Decimal('147287583.1000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.49, 'REF(SMA(close, 5),1)': 10.612, 'SMA(close, 20)': 10.1495, 'REF(SMA(close, 20),1)': 10.128, 'SMA(close,5)': 10.49, 'SMA(close,20)': 10.1495}
[2025-08-18 19:25:52,788] [DEBUG] [backtesting:217] [conn:N/A] 回测完成
[2025-08-18 19:25:52,789] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 19:26:29,244] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:26:29,244] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:26:29,245] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:26:29,295] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-06-01-2025-08-18 for sh.603900

[2025-08-18 19:26:29,299] [INFO] [database:250] [conn:N/A] Missing_dates set() for sh.603900
[2025-08-18 19:26:29,299] [INFO] [database:270] [conn:N/A] Found 0 missing data ranges for sh.603900
[2025-08-18 19:26:29,370] [INFO] [database:346] [conn:N/A] Successfully loaded 55 rows for sh.603900
[2025-08-18 19:26:29,397] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:29,401] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:29,401] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:29,401] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:29,401] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:29,402] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:29,402] [DEBUG] [backtesting:306] [conn:N/A] 注册策略调度处理器: c69ae48d-2fd6-4a33-85f4-8902cd3ba5eb
[2025-08-18 19:26:29,402] [INFO] [backtesting:309] [conn:N/A] 策略注册成功 | ID: c69ae48d-2fd6-4a33-85f4-8902cd3ba5eb | 名称: 自定义规则策略
[2025-08-18 19:26:29,402] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 19:26:29,402] [DEBUG] [backtesting:161] [conn:N/A] 识别数据频率为：日线
[2025-08-18 19:26:29,404] [DEBUG] [backtesting:187] [conn:N/A] 开始回测...
[2025-08-18 19:26:29,405] [INFO] [backtesting:356] [conn:N/A] 回测系统初始化开始
[2025-08-18 19:26:29,405] [INFO] [backtesting:368] [conn:N/A] 策略初始化完成: c69ae48d-2fd6-4a33-85f4-8902cd3ba5eb
[2025-08-18 19:26:29,406] [INFO] [backtesting:386] [conn:N/A] 回测系统初始化完成
[2025-08-18 19:26:29,406] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 19:26:29,406] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,406] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 19:26:29,406] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,407] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,407] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,407] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,408] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,408] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:29,409] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,409] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,409] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,410] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:26:29,410] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,411] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,411] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,411] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,412] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:29,412] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,413] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,413] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,413] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,414] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,414] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,415] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,415] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,416] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9700'), 'high': Decimal('12.1000'), 'low': Decimal('11.3200'), 'close': Decimal('11.8500'), 'volume': Decimal('59781512'), 'amount': Decimal('704448786.5200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:29,416] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 19:26:29,416] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,416] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 19:26:29,416] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:29,416] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:29,416] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:29,417] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:29,417] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:29,417] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,418] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:29,418] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,419] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5400'), 'high': Decimal('13.0400'), 'low': Decimal('11.4000'), 'close': Decimal('13.0400'), 'volume': Decimal('76582685'), 'amount': Decimal('954797066.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:29,419] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 19:26:29,419] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,419] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 19:26:29,419] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:29,419] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 1)
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:29,419] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:29,420] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 1)
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:29,420] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:29,420] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:29,421] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,421] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.9700'), 'high': Decimal('13.3700'), 'low': Decimal('11.7400'), 'close': Decimal('11.7400'), 'volume': Decimal('79708868'), 'amount': Decimal('990913647.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:29,421] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 19:26:29,421] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,421] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 19:26:29,421] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:29,421] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:29,422] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 2)
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:29,422] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 2)
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,422] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:29,423] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,423] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:29,423] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,423] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3100'), 'high': Decimal('11.5900'), 'low': Decimal('11.0500'), 'close': Decimal('11.1000'), 'volume': Decimal('52021272'), 'amount': Decimal('584670731.8900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:29,423] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 19:26:29,423] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,423] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 19:26:29,423] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:29,424] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 3)
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,424] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:29,425] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 3)
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:29,425] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,425] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:29,426] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,427] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:29,427] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,427] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0300'), 'high': Decimal('11.9000'), 'low': Decimal('11.0000'), 'close': Decimal('11.7300'), 'volume': Decimal('43385516'), 'amount': Decimal('498593941.2600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:29,427] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 19:26:29,427] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,427] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 19:26:29,428] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@5
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=1:6, 当前值=11.8500
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.892
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.892
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 5, 值: 11.892
[2025-08-18 19:26:29,428] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[5] = 11.892
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:29,429] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 4)
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:29,429] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:29,430] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:29,430] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,430] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:29,431] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 4)
[2025-08-18 19:26:29,431] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:29,431] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:29,431] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,431] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,431] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:29,431] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,431] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,431] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:29,431] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:29,431] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:29,433] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:29,433] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,433] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:29,433] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,433] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0000'), 'high': Decimal('12.1800'), 'low': Decimal('11.4500'), 'close': Decimal('11.8500'), 'volume': Decimal('49110045'), 'amount': Decimal('583218737.6900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.892, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.892}
[2025-08-18 19:26:29,436] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 19:26:29,436] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,436] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 19:26:29,436] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@6
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=2:7, 当前值=12.2400
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:26:29,436] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:26:29,437] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 6, 值: 11.732
[2025-08-18 19:26:29,437] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,437] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[6] = 11.732
[2025-08-18 19:26:29,437] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:29,437] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:29,437] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:29,437] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.892 (from index 5)
[2025-08-18 19:26:29,437] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:29,438] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 5)
[2025-08-18 19:26:29,438] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,438] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:29,438] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,438] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,439] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,439] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:29,439] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,439] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,439] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:29,440] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,440] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9800'), 'high': Decimal('12.4500'), 'low': Decimal('11.8000'), 'close': Decimal('12.2400'), 'volume': Decimal('49011610'), 'amount': Decimal('594009519.9700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.892, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:26:29,440] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 19:26:29,440] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,440] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 19:26:29,440] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@7
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=3:8, 当前值=12.9700
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.978
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.978
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 7, 值: 11.978
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[7] = 11.978
[2025-08-18 19:26:29,440] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:29,441] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,441] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,441] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 6)
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:29,441] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 6)
[2025-08-18 19:26:29,441] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:29,441] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,441] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:29,441] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,442] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,442] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:29,442] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:29,443] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:29,443] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:29,443] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:29,444] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,444] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.3400'), 'high': Decimal('13.2000'), 'low': Decimal('12.1200'), 'close': Decimal('12.9700'), 'volume': Decimal('53794722'), 'amount': Decimal('679946623.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.978, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.978}
[2025-08-18 19:26:29,444] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 19:26:29,444] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,444] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 19:26:29,444] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@8
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=4:9, 当前值=12.9700
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.352
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.352
[2025-08-18 19:26:29,444] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 8, 值: 12.352
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[8] = 12.352
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:29,445] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:29,445] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:29,445] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.978 (from index 7)
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:29,445] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 7)
[2025-08-18 19:26:29,445] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:29,445] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:29,445] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,445] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:29,445] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:29,445] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:29,446] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:29,446] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:29,446] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,446] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('13.3600'), 'high': Decimal('13.8800'), 'low': Decimal('12.8000'), 'close': Decimal('12.9700'), 'volume': Decimal('53806995'), 'amount': Decimal('718624248.0800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.352, 'REF(SMA(close, 5),1)': 11.978, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.352}
[2025-08-18 19:26:29,446] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 19:26:29,446] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,446] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 19:26:29,446] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@9
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=5:10, 当前值=12.8700
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.58
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.58
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 9, 值: 12.58
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[9] = 12.58
[2025-08-18 19:26:29,446] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:29,447] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:29,447] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:29,447] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.352 (from index 8)
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:29,447] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 8)
[2025-08-18 19:26:29,447] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:29,447] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:29,447] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,447] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:29,447] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,447] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:29,448] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:29,448] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:29,448] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,448] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.7000'), 'high': Decimal('13.6100'), 'low': Decimal('12.3600'), 'close': Decimal('12.8700'), 'volume': Decimal('39445490'), 'amount': Decimal('517960693.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.58, 'REF(SMA(close, 5),1)': 12.352, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.58}
[2025-08-18 19:26:29,448] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 19:26:29,448] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,448] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 19:26:29,448] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@10
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=6:11, 当前值=12.3500
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.68
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.68
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 10, 值: 12.68
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[10] = 12.68
[2025-08-18 19:26:29,448] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:29,449] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:29,449] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:29,449] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.58 (from index 9)
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:29,449] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 9)
[2025-08-18 19:26:29,449] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:29,449] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:29,449] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,449] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:29,449] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:29,449] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:29,450] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:29,450] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:29,450] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,450] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.4500'), 'high': Decimal('12.8600'), 'low': Decimal('12.2300'), 'close': Decimal('12.3500'), 'volume': Decimal('33378865'), 'amount': Decimal('414478726.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.68, 'REF(SMA(close, 5),1)': 12.58, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.68}
[2025-08-18 19:26:29,450] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 19:26:29,450] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,450] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 19:26:29,450] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,450] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@11
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=7:12, 当前值=12.1800
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.668000000000001
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.668000000000001
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 11, 值: 12.668000000000001
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[11] = 12.668000000000001
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:29,451] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:29,451] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:29,451] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.68 (from index 10)
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,451] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:29,451] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 10)
[2025-08-18 19:26:29,451] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:29,452] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,452] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:29,452] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,452] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:29,452] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,452] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.2500'), 'high': Decimal('12.5400'), 'low': Decimal('11.9000'), 'close': Decimal('12.1800'), 'volume': Decimal('23136160'), 'amount': Decimal('281766986.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.668000000000001, 'REF(SMA(close, 5),1)': 12.68, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.668000000000001}
[2025-08-18 19:26:29,453] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 19:26:29,453] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,453] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 19:26:29,453] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@12
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=8:13, 当前值=11.6200
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.398
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.398
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 12, 值: 12.398
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[12] = 12.398
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:29,453] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,453] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:29,453] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.668000000000001 (from index 11)
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:29,453] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:29,454] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 11)
[2025-08-18 19:26:29,454] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:29,454] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,454] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:29,454] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,454] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:29,454] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,454] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0100'), 'high': Decimal('12.4600'), 'low': Decimal('11.5800'), 'close': Decimal('11.6200'), 'volume': Decimal('25982780'), 'amount': Decimal('311245180.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.398, 'REF(SMA(close, 5),1)': 12.668000000000001, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.398}
[2025-08-18 19:26:29,455] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 19:26:29,455] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,455] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 19:26:29,455] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@13
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=9:14, 当前值=11.5100
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.106
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.106
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 13, 值: 12.106
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[13] = 12.106
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:29,455] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:29,455] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:29,455] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.398 (from index 12)
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,455] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:29,455] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 12)
[2025-08-18 19:26:29,456] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:29,456] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,456] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:29,456] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,456] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:29,456] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,456] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.6000'), 'high': Decimal('11.9500'), 'low': Decimal('11.4300'), 'close': Decimal('11.5100'), 'volume': Decimal('18962453'), 'amount': Decimal('220750154.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.106, 'REF(SMA(close, 5),1)': 12.398, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.106}
[2025-08-18 19:26:29,456] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 19:26:29,456] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,456] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 19:26:29,456] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@14
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=10:15, 当前值=11.8200
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.895999999999999
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.895999999999999
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 14, 值: 11.895999999999999
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[14] = 11.895999999999999
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:29,457] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:29,457] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:29,457] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.106 (from index 13)
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,457] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:29,457] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 13)
[2025-08-18 19:26:29,458] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,458] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,458] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,458] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,458] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:29,458] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,458] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,459] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,459] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:29,459] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:29,459] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,460] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:29,460] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,460] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5200'), 'high': Decimal('12.0900'), 'low': Decimal('11.3800'), 'close': Decimal('11.8200'), 'volume': Decimal('23825452'), 'amount': Decimal('280686631.8800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.895999999999999, 'REF(SMA(close, 5),1)': 12.106, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.895999999999999}
[2025-08-18 19:26:29,460] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 19:26:29,460] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,460] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 19:26:29,460] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@15
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=11:16, 当前值=11.5300
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 15, 值: 11.732
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[15] = 11.732
[2025-08-18 19:26:29,460] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:29,460] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,460] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:29,461] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.895999999999999 (from index 14)
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:29,461] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 14)
[2025-08-18 19:26:29,461] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,461] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:29,461] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,461] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,461] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:29,461] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:29,461] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,461] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:29,462] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,462] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5800'), 'high': Decimal('12.0600'), 'low': Decimal('11.4400'), 'close': Decimal('11.5300'), 'volume': Decimal('24376800'), 'amount': Decimal('284215937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.895999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:26:29,462] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 19:26:29,462] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,462] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 19:26:29,462] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@16
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=12:17, 当前值=11.2400
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.544
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.544
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 16, 值: 11.544
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[16] = 11.544
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:29,462] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:29,462] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:29,462] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 15)
[2025-08-18 19:26:29,462] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:29,463] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 15)
[2025-08-18 19:26:29,463] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:29,463] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,463] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:29,463] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:29,463] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:29,464] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,464] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('11.5300'), 'low': Decimal('11.1200'), 'close': Decimal('11.2400'), 'volume': Decimal('17654000'), 'amount': Decimal('199083908.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.544, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.544}
[2025-08-18 19:26:29,464] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 19:26:29,464] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,464] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 19:26:29,464] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@17
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=13:18, 当前值=11.1200
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.443999999999999
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.443999999999999
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 17, 值: 11.443999999999999
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[17] = 11.443999999999999
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:29,464] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:29,464] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:29,464] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.544 (from index 16)
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:29,464] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:29,465] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 16)
[2025-08-18 19:26:29,465] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:29,465] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,465] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:29,465] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,465] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:29,465] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,465] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2300'), 'high': Decimal('11.2900'), 'low': Decimal('10.8300'), 'close': Decimal('11.1200'), 'volume': Decimal('16326051'), 'amount': Decimal('181333863.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.443999999999999, 'REF(SMA(close, 5),1)': 11.544, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.443999999999999}
[2025-08-18 19:26:29,465] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 19:26:29,466] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,466] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 19:26:29,466] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@18
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=14:19, 当前值=11.1500
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.372
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.372
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 18, 值: 11.372
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[18] = 11.372
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:29,466] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,466] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:29,466] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.443999999999999 (from index 17)
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,466] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:29,466] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 17)
[2025-08-18 19:26:29,466] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:29,466] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:29,467] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,467] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:29,467] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:29,467] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:29,467] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,467] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:29,467] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,467] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0900'), 'high': Decimal('11.2300'), 'low': Decimal('10.8800'), 'close': Decimal('11.1500'), 'volume': Decimal('11665380'), 'amount': Decimal('129719694.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.372, 'REF(SMA(close, 5),1)': 11.443999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.372}
[2025-08-18 19:26:29,467] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 19:26:29,467] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,467] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 19:26:29,467] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@19
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=15:20, 当前值=11.4000
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.288
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.288
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 19, 值: 11.288
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[19] = 11.288
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:29,468] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:29,468] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:29,468] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.372 (from index 18)
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:29,468] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 18)
[2025-08-18 19:26:29,468] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:29,468] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,468] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:29,469] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,469] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:29,469] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:29,469] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:29,469] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:29,469] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,469] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1800'), 'high': Decimal('11.5600'), 'low': Decimal('11.0700'), 'close': Decimal('11.4000'), 'volume': Decimal('20761600'), 'amount': Decimal('235697621.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.288, 'REF(SMA(close, 5),1)': 11.372, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.288}
[2025-08-18 19:26:29,469] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 19:26:29,469] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,469] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 19:26:29,469] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:26:29,469] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@20
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=16:21, 当前值=11.4600
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.274
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.274
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 20, 值: 11.274
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[20] = 11.274
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:29,470] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:29,470] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:29,470] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.288 (from index 19)
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@20
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=1:21, 当前值=11.4600
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.894499999999999
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.894499999999999
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 20, 值: 11.894499999999999
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[20] = 11.894499999999999
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,470] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:29,471] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 19)
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,471] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:29,471] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:29,471] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,471] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,471] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4700'), 'high': Decimal('11.8000'), 'low': Decimal('11.1500'), 'close': Decimal('11.4600'), 'volume': Decimal('24552500'), 'amount': Decimal('281309276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.274, 'REF(SMA(close, 5),1)': 11.288, 'SMA(close, 20)': 11.894499999999999, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.274, 'SMA(close,20)': 11.894499999999999}
[2025-08-18 19:26:29,471] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 19:26:29,471] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,471] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 19:26:29,471] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@21
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=17:22, 当前值=11.3000
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.286
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.286
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 21, 值: 11.286
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[21] = 11.286
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:29,472] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:29,472] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:29,472] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.274 (from index 20)
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@21
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=2:22, 当前值=11.3000
[2025-08-18 19:26:29,472] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.807500000000001
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.807500000000001
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 21, 值: 11.807500000000001
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[21] = 11.807500000000001
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:29,473] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.894499999999999 (from index 20)
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,473] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,473] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:29,473] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:29,473] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:29,474] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,474] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,474] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,474] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('12.0000'), 'low': Decimal('11.2500'), 'close': Decimal('11.3000'), 'volume': Decimal('29079220'), 'amount': Decimal('336568278.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.286, 'REF(SMA(close, 5),1)': 11.274, 'SMA(close, 20)': 11.807500000000001, 'REF(SMA(close, 20),1)': 11.894499999999999, 'SMA(close,5)': 11.286, 'SMA(close,20)': 11.807500000000001}
[2025-08-18 19:26:29,474] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 19:26:29,474] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,474] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 19:26:29,474] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@22
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=18:23, 当前值=11.2600
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.314
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.314
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 22, 值: 11.314
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[22] = 11.314
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:29,474] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:29,474] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:29,474] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.286 (from index 21)
[2025-08-18 19:26:29,474] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@22
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=3:23, 当前值=11.2600
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7835
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7835
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 22, 值: 11.7835
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[22] = 11.7835
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:29,475] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,475] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:29,475] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.807500000000001 (from index 21)
[2025-08-18 19:26:29,475] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:29,475] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:29,475] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,475] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,475] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,475] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,475] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:29,475] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,476] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,476] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:29,476] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:29,476] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:29,476] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,476] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,476] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,476] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1600'), 'high': Decimal('11.5500'), 'low': Decimal('11.0900'), 'close': Decimal('11.2600'), 'volume': Decimal('16376940'), 'amount': Decimal('184800725.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.314, 'REF(SMA(close, 5),1)': 11.286, 'SMA(close, 20)': 11.7835, 'REF(SMA(close, 20),1)': 11.807500000000001, 'SMA(close,5)': 11.314, 'SMA(close,20)': 11.7835}
[2025-08-18 19:26:29,476] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 19:26:29,476] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,476] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 19:26:29,476] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@23
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=19:24, 当前值=10.8600
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.256
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.256
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 23, 值: 11.256
[2025-08-18 19:26:29,476] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[23] = 11.256
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:29,477] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:29,477] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:29,477] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.314 (from index 22)
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@23
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=4:24, 当前值=10.8600
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7715
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7715
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 23, 值: 11.7715
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[23] = 11.7715
[2025-08-18 19:26:29,477] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:29,477] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,477] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:29,477] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7835 (from index 22)
[2025-08-18 19:26:29,477] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:29,477] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:29,478] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,478] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,478] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:29,478] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:29,478] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:29,478] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,478] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:29,478] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:29,478] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:29,478] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,478] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,478] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.2600'), 'low': Decimal('10.7000'), 'close': Decimal('10.8600'), 'volume': Decimal('18454110'), 'amount': Decimal('200513009.9000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.256, 'REF(SMA(close, 5),1)': 11.314, 'SMA(close, 20)': 11.7715, 'REF(SMA(close, 20),1)': 11.7835, 'SMA(close,5)': 11.256, 'SMA(close,20)': 11.7715}
[2025-08-18 19:26:29,478] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 19:26:29,478] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,478] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 19:26:29,478] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@24
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=20:25, 当前值=11.1900
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 24, 值: 11.214
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[24] = 11.214
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:29,479] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:29,479] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:29,479] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.256 (from index 23)
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@24
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=5:25, 当前值=11.1900
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.744499999999999
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.744499999999999
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 24, 值: 11.744499999999999
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[24] = 11.744499999999999
[2025-08-18 19:26:29,479] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:29,479] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,479] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:29,479] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7715 (from index 23)
[2025-08-18 19:26:29,479] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,479] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,480] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,480] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,480] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,480] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:29,480] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,480] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,480] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,480] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,480] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8300'), 'high': Decimal('11.3600'), 'low': Decimal('10.6300'), 'close': Decimal('11.1900'), 'volume': Decimal('15540620'), 'amount': Decimal('173423981.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.256, 'SMA(close, 20)': 11.744499999999999, 'REF(SMA(close, 20),1)': 11.7715, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.744499999999999}
[2025-08-18 19:26:29,480] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 19:26:29,480] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,480] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 19:26:29,480] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,480] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@25
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=21:26, 当前值=11.3700
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.196
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.196
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 25, 值: 11.196
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[25] = 11.196
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:29,481] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,481] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,481] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 24)
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@25
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=6:26, 当前值=11.3700
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7205
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7205
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 25, 值: 11.7205
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[25] = 11.7205
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:29,481] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,481] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:29,481] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.744499999999999 (from index 24)
[2025-08-18 19:26:29,481] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:29,481] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:29,481] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,481] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,481] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,481] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,482] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:29,482] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,482] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,482] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:29,482] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:29,482] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:29,482] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,482] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,482] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,482] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.7000'), 'low': Decimal('11.1000'), 'close': Decimal('11.3700'), 'volume': Decimal('17187760'), 'amount': Decimal('195723936.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.196, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.7205, 'REF(SMA(close, 20),1)': 11.744499999999999, 'SMA(close,5)': 11.196, 'SMA(close,20)': 11.7205}
[2025-08-18 19:26:29,482] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 19:26:29,482] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,482] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 19:26:29,482] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:26:29,482] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@26
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=22:27, 当前值=11.4200
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.22
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.22
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 26, 值: 11.22
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[26] = 11.22
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:29,483] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:29,483] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:29,483] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.196 (from index 25)
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@26
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=7:27, 当前值=11.4200
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.6795
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.6795
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 26, 值: 11.6795
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[26] = 11.6795
[2025-08-18 19:26:29,483] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:29,483] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,483] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:29,483] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7205 (from index 25)
[2025-08-18 19:26:29,483] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,484] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,484] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:29,484] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,484] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:29,484] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:29,484] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,484] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,484] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3000'), 'high': Decimal('11.5700'), 'low': Decimal('11.2300'), 'close': Decimal('11.4200'), 'volume': Decimal('11928520'), 'amount': Decimal('135881154.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.22, 'REF(SMA(close, 5),1)': 11.196, 'SMA(close, 20)': 11.6795, 'REF(SMA(close, 20),1)': 11.7205, 'SMA(close,5)': 11.22, 'SMA(close,20)': 11.6795}
[2025-08-18 19:26:29,484] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 19:26:29,484] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,484] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 19:26:29,484] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,484] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@27
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=23:28, 当前值=11.2300
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 27, 值: 11.214
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[27] = 11.214
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:29,485] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:29,485] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:29,485] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.22 (from index 26)
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@27
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=8:28, 当前值=11.2300
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.5925
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.5925
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 27, 值: 11.5925
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[27] = 11.5925
[2025-08-18 19:26:29,485] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:29,485] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,485] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:29,485] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.6795 (from index 26)
[2025-08-18 19:26:29,485] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,485] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,486] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,486] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,486] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,486] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:29,486] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,486] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,486] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,486] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,486] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.5500'), 'low': Decimal('11.0700'), 'close': Decimal('11.2300'), 'volume': Decimal('10643600'), 'amount': Decimal('119294545.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.22, 'SMA(close, 20)': 11.5925, 'REF(SMA(close, 20),1)': 11.6795, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.5925}
[2025-08-18 19:26:29,486] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 19:26:29,486] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,486] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 19:26:29,486] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,486] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@28
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=24:29, 当前值=11.3000
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.302
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.302
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 28, 值: 11.302
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[28] = 11.302
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:29,487] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:29,487] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:29,487] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 27)
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@28
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=9:29, 当前值=11.3000
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.509
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.509
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 28, 值: 11.509
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[28] = 11.509
[2025-08-18 19:26:29,487] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:29,487] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,487] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:29,487] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.5925 (from index 27)
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,488] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:29,488] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:29,488] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:29,488] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,488] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1500'), 'high': Decimal('11.3200'), 'low': Decimal('11.1000'), 'close': Decimal('11.3000'), 'volume': Decimal('8740380'), 'amount': Decimal('98150127.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.302, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.509, 'REF(SMA(close, 20),1)': 11.5925, 'SMA(close,5)': 11.302, 'SMA(close,20)': 11.509}
[2025-08-18 19:26:29,488] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 19:26:29,488] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,488] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 19:26:29,488] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@29
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=25:30, 当前值=11.8900
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.442
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.442
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 29, 值: 11.442
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[29] = 11.442
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:29,489] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:29,489] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:29,489] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.302 (from index 28)
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@29
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=10:30, 当前值=11.8900
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.459999999999999
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.459999999999999
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 29, 值: 11.459999999999999
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[29] = 11.459999999999999
[2025-08-18 19:26:29,489] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:29,489] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:29,489] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:29,489] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.509 (from index 28)
[2025-08-18 19:26:29,489] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:29,489] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:29,490] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,490] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:29,490] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,490] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:29,490] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:29,490] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:29,490] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,490] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,490] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.9300'), 'low': Decimal('11.3100'), 'close': Decimal('11.8900'), 'volume': Decimal('23118500'), 'amount': Decimal('269805301.3600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.442, 'REF(SMA(close, 5),1)': 11.302, 'SMA(close, 20)': 11.459999999999999, 'REF(SMA(close, 20),1)': 11.509, 'SMA(close,5)': 11.442, 'SMA(close,20)': 11.459999999999999}
[2025-08-18 19:26:29,490] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 19:26:29,490] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,490] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 19:26:29,490] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,490] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@30
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=26:31, 当前值=10.7000
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.308
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.308
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 30, 值: 11.308
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[30] = 11.308
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:29,491] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:29,491] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:29,491] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.442 (from index 29)
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@30
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=11:31, 当前值=10.7000
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.377500000000001
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.377500000000001
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 30, 值: 11.377500000000001
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[30] = 11.377500000000001
[2025-08-18 19:26:29,491] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:29,491] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,491] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:29,491] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.459999999999999 (from index 29)
[2025-08-18 19:26:29,491] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:29,491] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:29,492] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,492] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,492] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,492] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,492] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:29,492] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:29,492] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:29,492] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,492] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,492] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:29,493] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:29,493] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:29,493] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,493] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,493] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,493] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9900'), 'high': Decimal('11.1900'), 'low': Decimal('10.7000'), 'close': Decimal('10.7000'), 'volume': Decimal('27945200'), 'amount': Decimal('300147468.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.308, 'REF(SMA(close, 5),1)': 11.442, 'SMA(close, 20)': 11.377500000000001, 'REF(SMA(close, 20),1)': 11.459999999999999, 'SMA(close,5)': 11.308, 'SMA(close,20)': 11.377500000000001}
[2025-08-18 19:26:29,493] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 19:26:29,493] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,493] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 19:26:29,493] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@31
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=27:32, 当前值=9.9300
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.01
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.01
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 31, 值: 11.01
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[31] = 11.01
[2025-08-18 19:26:29,493] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:29,493] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:29,493] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:29,494] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.308 (from index 30)
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@31
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=12:32, 当前值=9.9300
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.265
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.265
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 31, 值: 11.265
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[31] = 11.265
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:29,494] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,494] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:29,494] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.377500000000001 (from index 30)
[2025-08-18 19:26:29,494] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:29,494] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:29,494] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:29,494] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:29,494] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,494] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:29,494] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,494] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:29,494] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:29,494] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:29,495] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:29,495] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:29,495] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:29,495] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:29,495] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,495] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3700'), 'high': Decimal('10.4300'), 'low': Decimal('9.7500'), 'close': Decimal('9.9300'), 'volume': Decimal('33570940'), 'amount': Decimal('334695551.6800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.01, 'REF(SMA(close, 5),1)': 11.308, 'SMA(close, 20)': 11.265, 'REF(SMA(close, 20),1)': 11.377500000000001, 'SMA(close,5)': 11.01, 'SMA(close,20)': 11.265}
[2025-08-18 19:26:29,495] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 19:26:29,495] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,495] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 19:26:29,495] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@32
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=28:33, 当前值=9.8900
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.742
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.742
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 32, 值: 10.742
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[32] = 10.742
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:29,495] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:29,495] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:29,495] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.01 (from index 31)
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,495] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@32
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=13:33, 当前值=9.8900
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.1785
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.1785
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 32, 值: 11.1785
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[32] = 11.1785
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:29,496] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.265 (from index 31)
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,496] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,496] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:29,496] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,497] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,497] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,497] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8800'), 'high': Decimal('10.1500'), 'low': Decimal('9.8500'), 'close': Decimal('9.8900'), 'volume': Decimal('17583985'), 'amount': Decimal('174553922.9500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.742, 'REF(SMA(close, 5),1)': 11.01, 'SMA(close, 20)': 11.1785, 'REF(SMA(close, 20),1)': 11.265, 'SMA(close,5)': 10.742, 'SMA(close,20)': 11.1785}
[2025-08-18 19:26:29,497] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 19:26:29,497] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,497] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 19:26:29,497] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@33
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=29:34, 当前值=9.7500
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.431999999999999
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.431999999999999
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 33, 值: 10.431999999999999
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[33] = 10.431999999999999
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:29,497] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:29,497] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:29,497] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.742 (from index 32)
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@33
[2025-08-18 19:26:29,497] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=14:34, 当前值=9.7500
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.0905
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.0905
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 33, 值: 11.0905
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[33] = 11.0905
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:29,498] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.1785 (from index 32)
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,498] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,498] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,499] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8500'), 'high': Decimal('9.8900'), 'low': Decimal('9.6900'), 'close': Decimal('9.7500'), 'volume': Decimal('13242400'), 'amount': Decimal('129118773.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.431999999999999, 'REF(SMA(close, 5),1)': 10.742, 'SMA(close, 20)': 11.0905, 'REF(SMA(close, 20),1)': 11.1785, 'SMA(close,5)': 10.431999999999999, 'SMA(close,20)': 11.0905}
[2025-08-18 19:26:29,499] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 19:26:29,499] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,499] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 19:26:29,499] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@34
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=30:35, 当前值=9.8500
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.024
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.024
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 34, 值: 10.024
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[34] = 10.024
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:29,499] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,499] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:29,499] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.431999999999999 (from index 33)
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@34
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=15:35, 当前值=9.8500
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.992
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.992
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 34, 值: 10.992
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,499] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[34] = 10.992
[2025-08-18 19:26:29,500] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:29,500] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.0905 (from index 33)
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,500] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:29,500] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:29,500] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:29,500] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,500] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('9.9400'), 'low': Decimal('9.7100'), 'close': Decimal('9.8500'), 'volume': Decimal('12705234'), 'amount': Decimal('125082445.7000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.024, 'REF(SMA(close, 5),1)': 10.431999999999999, 'SMA(close, 20)': 10.992, 'REF(SMA(close, 20),1)': 11.0905, 'SMA(close,5)': 10.024, 'SMA(close,20)': 10.992}
[2025-08-18 19:26:29,500] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 19:26:29,501] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,501] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 19:26:29,501] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@35
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=31:36, 当前值=9.9400
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 35, 值: 9.872
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[35] = 9.872
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:29,501] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:29,501] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:29,501] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.024 (from index 34)
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@35
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=16:36, 当前值=9.9400
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.9125
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.9125
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 35, 值: 10.9125
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[35] = 10.9125
[2025-08-18 19:26:29,501] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:29,501] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:29,501] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:29,502] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.992 (from index 34)
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,502] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:29,502] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,502] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,502] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,502] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9200'), 'high': Decimal('10.1300'), 'low': Decimal('9.8900'), 'close': Decimal('9.9400'), 'volume': Decimal('17735100'), 'amount': Decimal('177170090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 10.024, 'SMA(close, 20)': 10.9125, 'REF(SMA(close, 20),1)': 10.992, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.9125}
[2025-08-18 19:26:29,503] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 19:26:29,503] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,503] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 19:26:29,503] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@36
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=32:37, 当前值=9.9300
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 36, 值: 9.872
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[36] = 9.872
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:29,503] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,503] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,503] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 35)
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@36
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=17:37, 当前值=9.9300
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.847
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.847
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 36, 值: 10.847
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,503] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[36] = 10.847
[2025-08-18 19:26:29,504] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:29,504] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.9125 (from index 35)
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,504] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:29,504] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,504] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:29,504] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,504] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9500'), 'high': Decimal('10.2000'), 'low': Decimal('9.8000'), 'close': Decimal('9.9300'), 'volume': Decimal('13795275'), 'amount': Decimal('137802304.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.847, 'REF(SMA(close, 20),1)': 10.9125, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.847}
[2025-08-18 19:26:29,504] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 19:26:29,505] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,505] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 19:26:29,505] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@37
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=33:38, 当前值=9.8100
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.856
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.856
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 37, 值: 9.856
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[37] = 9.856
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:29,505] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:29,505] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:29,505] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 36)
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@37
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=18:38, 当前值=9.8100
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7815
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7815
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 37, 值: 10.7815
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,505] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[37] = 10.7815
[2025-08-18 19:26:29,506] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:29,506] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.847 (from index 36)
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,506] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:29,506] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:29,506] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,506] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,506] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('9.9700'), 'low': Decimal('9.7500'), 'close': Decimal('9.8100'), 'volume': Decimal('12661765'), 'amount': Decimal('124434027.1100'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.856, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.7815, 'REF(SMA(close, 20),1)': 10.847, 'SMA(close,5)': 9.856, 'SMA(close,20)': 10.7815}
[2025-08-18 19:26:29,507] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 19:26:29,507] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,507] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 19:26:29,507] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@38
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=34:39, 当前值=9.7700
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 38, 值: 9.86
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[38] = 9.86
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:29,507] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:29,507] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:29,507] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.856 (from index 37)
[2025-08-18 19:26:29,507] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@38
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=19:39, 当前值=9.7700
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7125
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7125
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 38, 值: 10.7125
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[38] = 10.7125
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:29,508] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,508] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:29,508] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7815 (from index 37)
[2025-08-18 19:26:29,508] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,508] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,508] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,508] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,508] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,508] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,508] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,508] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,509] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,509] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:29,509] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,509] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,509] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,509] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,509] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,509] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8900'), 'low': Decimal('9.7400'), 'close': Decimal('9.7700'), 'volume': Decimal('8516580'), 'amount': Decimal('83461624.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.856, 'SMA(close, 20)': 10.7125, 'REF(SMA(close, 20),1)': 10.7815, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.7125}
[2025-08-18 19:26:29,509] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 19:26:29,509] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,509] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 19:26:29,509] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,509] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@39
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=35:40, 当前值=9.8500
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 39, 值: 9.86
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[39] = 9.86
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:29,510] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,510] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,510] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 38)
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@39
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=20:40, 当前值=9.8500
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.635
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.635
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 39, 值: 10.635
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[39] = 10.635
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:29,510] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,510] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:29,510] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7125 (from index 38)
[2025-08-18 19:26:29,510] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,510] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,510] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:29,510] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:29,510] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,510] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,511] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,511] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,511] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:29,511] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:29,511] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,511] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,511] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:29,511] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:29,511] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,511] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8700'), 'low': Decimal('9.6400'), 'close': Decimal('9.8500'), 'volume': Decimal('12892399'), 'amount': Decimal('125856550.5500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.635, 'REF(SMA(close, 20),1)': 10.7125, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.635}
[2025-08-18 19:26:29,511] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 19:26:29,511] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,511] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 19:26:29,511] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@40
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=36:41, 当前值=9.7200
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.815999999999999
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.815999999999999
[2025-08-18 19:26:29,511] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 40, 值: 9.815999999999999
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[40] = 9.815999999999999
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:29,512] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:29,512] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:29,512] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 39)
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@40
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=21:41, 当前值=9.7200
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.548
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.548
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 40, 值: 10.548
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[40] = 10.548
[2025-08-18 19:26:29,512] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:29,512] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:29,512] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:29,512] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.635 (from index 39)
[2025-08-18 19:26:29,512] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,513] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,513] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:29,513] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,513] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:29,513] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,513] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:29,513] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,513] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8700'), 'low': Decimal('9.4800'), 'close': Decimal('9.7200'), 'volume': Decimal('15174100'), 'amount': Decimal('145998673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.815999999999999, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.548, 'REF(SMA(close, 20),1)': 10.635, 'SMA(close,5)': 9.815999999999999, 'SMA(close,20)': 10.548}
[2025-08-18 19:26:29,513] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 19:26:29,513] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,513] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 19:26:29,513] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@41
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=37:42, 当前值=9.7100
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.772
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.772
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 41, 值: 9.772
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[41] = 9.772
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:29,514] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,514] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:29,514] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.815999999999999 (from index 40)
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@41
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=22:42, 当前值=9.7100
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.4685
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.4685
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 41, 值: 10.4685
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[41] = 10.4685
[2025-08-18 19:26:29,514] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:29,514] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:29,514] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:29,514] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.548 (from index 40)
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,515] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:29,515] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:29,515] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,515] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,515] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6400'), 'high': Decimal('9.7900'), 'low': Decimal('9.6200'), 'close': Decimal('9.7100'), 'volume': Decimal('9069800'), 'amount': Decimal('88084034.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.772, 'REF(SMA(close, 5),1)': 9.815999999999999, 'SMA(close, 20)': 10.4685, 'REF(SMA(close, 20),1)': 10.548, 'SMA(close,5)': 9.772, 'SMA(close,20)': 10.4685}
[2025-08-18 19:26:29,515] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 19:26:29,515] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,515] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 19:26:29,515] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@42
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=38:43, 当前值=9.6000
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.73
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.73
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 42, 值: 9.73
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[42] = 9.73
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:29,516] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:29,516] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:29,516] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.772 (from index 41)
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@42
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=23:43, 当前值=9.6000
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.3855
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.3855
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 42, 值: 10.3855
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[42] = 10.3855
[2025-08-18 19:26:29,516] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:29,516] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,516] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:29,516] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.4685 (from index 41)
[2025-08-18 19:26:29,516] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:29,516] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:29,517] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,517] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,517] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:29,517] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:29,517] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:29,517] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,517] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:29,517] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:29,517] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:29,517] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,517] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,517] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6700'), 'high': Decimal('9.6800'), 'low': Decimal('9.5700'), 'close': Decimal('9.6000'), 'volume': Decimal('6631455'), 'amount': Decimal('63720844.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.73, 'REF(SMA(close, 5),1)': 9.772, 'SMA(close, 20)': 10.3855, 'REF(SMA(close, 20),1)': 10.4685, 'SMA(close,5)': 9.73, 'SMA(close,20)': 10.3855}
[2025-08-18 19:26:29,517] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 19:26:29,517] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,517] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 19:26:29,518] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@43
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=39:44, 当前值=9.5900
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.693999999999999
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.693999999999999
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 43, 值: 9.693999999999999
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[43] = 9.693999999999999
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:29,518] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:29,518] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:29,518] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.73 (from index 42)
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@43
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=24:44, 当前值=9.5900
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.322
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.322
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 43, 值: 10.322
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,518] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[43] = 10.322
[2025-08-18 19:26:29,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:29,519] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.3855 (from index 42)
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,519] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:29,519] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,519] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:29,519] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,519] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.5900'), 'high': Decimal('9.7000'), 'low': Decimal('9.5300'), 'close': Decimal('9.5900'), 'volume': Decimal('6628475'), 'amount': Decimal('63641406.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.693999999999999, 'REF(SMA(close, 5),1)': 9.73, 'SMA(close, 20)': 10.322, 'REF(SMA(close, 20),1)': 10.3855, 'SMA(close,5)': 9.693999999999999, 'SMA(close,20)': 10.322}
[2025-08-18 19:26:29,520] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 19:26:29,520] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,520] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 19:26:29,520] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@44
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=40:45, 当前值=9.9400
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.712
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.712
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 44, 值: 9.712
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[44] = 9.712
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:29,520] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,520] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:29,520] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.693999999999999 (from index 43)
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@44
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=25:45, 当前值=9.9400
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.2595
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.2595
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 44, 值: 10.2595
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[44] = 10.2595
[2025-08-18 19:26:29,520] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:29,521] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.322 (from index 43)
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,521] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:29,521] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:29,521] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,521] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,521] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('10.0500'), 'low': Decimal('9.6000'), 'close': Decimal('9.9400'), 'volume': Decimal('22449020'), 'amount': Decimal('221168482.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.712, 'REF(SMA(close, 5),1)': 9.693999999999999, 'SMA(close, 20)': 10.2595, 'REF(SMA(close, 20),1)': 10.322, 'SMA(close,5)': 9.712, 'SMA(close,20)': 10.2595}
[2025-08-18 19:26:29,521] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 19:26:29,521] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,521] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 19:26:29,521] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@45
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=41:46, 当前值=9.8000
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.728
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.728
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 45, 值: 9.728
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[45] = 9.728
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:29,522] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:29,522] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:29,522] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.712 (from index 44)
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@45
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=26:46, 当前值=9.8000
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.181000000000001
[2025-08-18 19:26:29,522] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.181000000000001
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 45, 值: 10.181000000000001
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[45] = 10.181000000000001
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:29,523] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.2595 (from index 44)
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:29,523] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,523] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,524] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9300'), 'high': Decimal('10.0500'), 'low': Decimal('9.7500'), 'close': Decimal('9.8000'), 'volume': Decimal('14326900'), 'amount': Decimal('140652171.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.728, 'REF(SMA(close, 5),1)': 9.712, 'SMA(close, 20)': 10.181000000000001, 'REF(SMA(close, 20),1)': 10.2595, 'SMA(close,5)': 9.728, 'SMA(close,20)': 10.181000000000001}
[2025-08-18 19:26:29,524] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 19:26:29,524] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,524] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 19:26:29,524] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@46
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=42:47, 当前值=9.8800
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.762
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.762
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 46, 值: 9.762
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[46] = 9.762
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:29,524] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:29,524] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:29,524] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.728 (from index 45)
[2025-08-18 19:26:29,524] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@46
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=27:47, 当前值=9.8800
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.104000000000001
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.104000000000001
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 46, 值: 10.104000000000001
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[46] = 10.104000000000001
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:29,525] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,525] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:29,525] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.181000000000001 (from index 45)
[2025-08-18 19:26:29,525] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:29,525] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:29,525] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,525] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,525] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,525] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:29,525] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:29,525] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,525] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,526] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:29,526] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:29,526] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:29,526] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,526] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,526] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,526] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8900'), 'low': Decimal('9.6500'), 'close': Decimal('9.8800'), 'volume': Decimal('11917700'), 'amount': Decimal('116643412.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.762, 'REF(SMA(close, 5),1)': 9.728, 'SMA(close, 20)': 10.104000000000001, 'REF(SMA(close, 20),1)': 10.181000000000001, 'SMA(close,5)': 9.762, 'SMA(close,20)': 10.104000000000001}
[2025-08-18 19:26:29,526] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 19:26:29,526] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,526] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 19:26:29,526] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@47
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=43:48, 当前值=10.8700
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.016
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.016
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 47, 值: 10.016
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[47] = 10.016
[2025-08-18 19:26:29,526] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:29,526] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:29,526] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:29,527] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.762 (from index 46)
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@47
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=28:48, 当前值=10.8700
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.086
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.086
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 47, 值: 10.086
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[47] = 10.086
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:29,527] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,527] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:29,527] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.104000000000001 (from index 46)
[2025-08-18 19:26:29,527] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:29,527] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:29,527] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:29,527] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:29,527] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,527] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:29,527] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:29,527] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,528] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:29,528] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:29,528] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:29,528] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:29,528] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:29,528] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:29,528] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,528] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('10.8700'), 'low': Decimal('9.7700'), 'close': Decimal('10.8700'), 'volume': Decimal('34331640'), 'amount': Decimal('358998997.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.016, 'REF(SMA(close, 5),1)': 9.762, 'SMA(close, 20)': 10.086, 'REF(SMA(close, 20),1)': 10.104000000000001, 'SMA(close,5)': 10.016, 'SMA(close,20)': 10.086}
[2025-08-18 19:26:29,528] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 19:26:29,528] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,528] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 19:26:29,528] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@48
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=44:49, 当前值=11.2400
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.346
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.346
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 48, 值: 10.346
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[48] = 10.346
[2025-08-18 19:26:29,528] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:29,529] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:29,529] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:29,529] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.016 (from index 47)
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@48
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=29:49, 当前值=11.2400
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.083
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.083
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 48, 值: 10.083
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[48] = 10.083
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:29,529] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:29,529] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:29,529] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.086 (from index 47)
[2025-08-18 19:26:29,529] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:29,529] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:29,529] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:29,529] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:29,529] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,529] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:29,529] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:29,529] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,530] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:29,530] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:29,530] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:29,530] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:29,530] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:29,530] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:29,530] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,530] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2100'), 'high': Decimal('11.6500'), 'low': Decimal('10.7600'), 'close': Decimal('11.2400'), 'volume': Decimal('51811380'), 'amount': Decimal('574331218.0600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.346, 'REF(SMA(close, 5),1)': 10.016, 'SMA(close, 20)': 10.083, 'REF(SMA(close, 20),1)': 10.086, 'SMA(close,5)': 10.346, 'SMA(close,20)': 10.083}
[2025-08-18 19:26:29,530] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 19:26:29,530] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,530] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 19:26:29,530] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@49
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=45:50, 当前值=10.8900
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.536
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.536
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 49, 值: 10.536
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[49] = 10.536
[2025-08-18 19:26:29,530] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:29,530] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:29,530] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:29,531] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.346 (from index 48)
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@49
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=30:50, 当前值=10.8900
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.033
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.033
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 49, 值: 10.033
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[49] = 10.033
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:29,531] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:29,531] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:29,531] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.083 (from index 48)
[2025-08-18 19:26:29,531] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:29,531] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:29,531] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:29,531] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:29,531] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,531] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:29,531] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:29,531] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,531] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:29,531] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:29,532] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:29,532] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:29,532] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:29,532] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:29,532] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,532] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8000'), 'high': Decimal('10.9700'), 'low': Decimal('10.4800'), 'close': Decimal('10.8900'), 'volume': Decimal('29621940'), 'amount': Decimal('319078682.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.536, 'REF(SMA(close, 5),1)': 10.346, 'SMA(close, 20)': 10.033, 'REF(SMA(close, 20),1)': 10.083, 'SMA(close,5)': 10.536, 'SMA(close,20)': 10.033}
[2025-08-18 19:26:29,532] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 19:26:29,532] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,532] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 19:26:29,532] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@50
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=46:51, 当前值=10.9600
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.768
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.768
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 50, 值: 10.768
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[50] = 10.768
[2025-08-18 19:26:29,532] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:29,533] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.536 (from index 49)
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@50
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=31:51, 当前值=10.9600
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.046
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.046
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 50, 值: 10.046
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[50] = 10.046
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:29,533] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.033 (from index 49)
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:29,533] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:29,533] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,533] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:29,533] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:29,534] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:29,534] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:29,534] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:29,534] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:29,534] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,534] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8100'), 'high': Decimal('11.1800'), 'low': Decimal('10.7500'), 'close': Decimal('10.9600'), 'volume': Decimal('27855000'), 'amount': Decimal('305544408.2400'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.768, 'REF(SMA(close, 5),1)': 10.536, 'SMA(close, 20)': 10.046, 'REF(SMA(close, 20),1)': 10.033, 'SMA(close,5)': 10.768, 'SMA(close,20)': 10.046}
[2025-08-18 19:26:29,534] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 19:26:29,534] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,534] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 19:26:29,534] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@51
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=47:52, 当前值=10.6400
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.92
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.92
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 51, 值: 10.92
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[51] = 10.92
[2025-08-18 19:26:29,534] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:29,534] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:29,534] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:29,534] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.768 (from index 50)
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@51
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=32:52, 当前值=10.6400
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.0815
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.0815
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 51, 值: 10.0815
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[51] = 10.0815
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:29,535] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:29,535] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:29,535] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.046 (from index 50)
[2025-08-18 19:26:29,535] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:29,535] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:29,535] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,535] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,535] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,535] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:29,535] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,535] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,535] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,535] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:29,536] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:29,536] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:29,536] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,536] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,536] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,536] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9000'), 'high': Decimal('10.9600'), 'low': Decimal('10.5000'), 'close': Decimal('10.6400'), 'volume': Decimal('25362800'), 'amount': Decimal('269858594.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.92, 'REF(SMA(close, 5),1)': 10.768, 'SMA(close, 20)': 10.0815, 'REF(SMA(close, 20),1)': 10.046, 'SMA(close,5)': 10.92, 'SMA(close,20)': 10.0815}
[2025-08-18 19:26:29,536] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 19:26:29,536] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,536] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 19:26:29,536] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@52
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=48:53, 当前值=10.2700
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.8
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.8
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 52, 值: 10.8
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[52] = 10.8
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:29,536] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:29,536] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:29,536] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.92 (from index 51)
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,536] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@52
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=33:53, 当前值=10.2700
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1005
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1005
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 52, 值: 10.1005
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[52] = 10.1005
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:29,537] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,537] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:29,537] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.0815 (from index 51)
[2025-08-18 19:26:29,537] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:29,537] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:29,537] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,537] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,537] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,537] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:29,537] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:29,537] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,537] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,538] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:29,538] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:29,538] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:29,538] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,538] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,538] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,538] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.6400'), 'high': Decimal('10.7100'), 'low': Decimal('10.2600'), 'close': Decimal('10.2700'), 'volume': Decimal('21862900'), 'amount': Decimal('228640246.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.8, 'REF(SMA(close, 5),1)': 10.92, 'SMA(close, 20)': 10.1005, 'REF(SMA(close, 20),1)': 10.0815, 'SMA(close,5)': 10.8, 'SMA(close,20)': 10.1005}
[2025-08-18 19:26:29,538] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 19:26:29,538] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,538] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 19:26:29,538] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@53
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=49:54, 当前值=10.3000
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.612
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.612
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 53, 值: 10.612
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[53] = 10.612
[2025-08-18 19:26:29,538] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:29,538] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:29,538] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:29,538] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.8 (from index 52)
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@53
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=34:54, 当前值=10.3000
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.128
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.128
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 53, 值: 10.128
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[53] = 10.128
[2025-08-18 19:26:29,539] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:29,539] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,539] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:29,539] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.1005 (from index 52)
[2025-08-18 19:26:29,539] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:29,539] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:29,539] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:29,539] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:29,539] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,540] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:29,540] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,540] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:29,540] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:29,540] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:29,540] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:29,540] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:29,540] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:29,540] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,540] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.1200'), 'high': Decimal('10.3600'), 'low': Decimal('10.0800'), 'close': Decimal('10.3000'), 'volume': Decimal('15409920'), 'amount': Decimal('157573581.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.612, 'REF(SMA(close, 5),1)': 10.8, 'SMA(close, 20)': 10.128, 'REF(SMA(close, 20),1)': 10.1005, 'SMA(close,5)': 10.612, 'SMA(close,20)': 10.128}
[2025-08-18 19:26:29,540] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 19:26:29,540] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:29,540] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 19:26:29,540] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:26:29,540] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@54
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=50:55, 当前值=10.2800
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.49
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.49
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 54, 值: 10.49
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[54] = 10.49
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:29,541] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:29,541] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:29,541] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.612 (from index 53)
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@54
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=35:55, 当前值=10.2800
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1495
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1495
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 54, 值: 10.1495
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[54] = 10.1495
[2025-08-18 19:26:29,541] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:29,541] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:29,541] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:29,541] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.128 (from index 53)
[2025-08-18 19:26:29,541] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:29,541] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:29,542] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,542] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,542] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:29,542] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:29,542] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:29,542] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:29,542] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:29,542] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:29,542] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,542] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,542] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:29,543] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:29,543] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:29,543] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,543] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:29,543] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:29,543] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3000'), 'high': Decimal('10.4100'), 'low': Decimal('10.2100'), 'close': Decimal('10.2800'), 'volume': Decimal('14335285'), 'amount': Decimal('147287583.1000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.49, 'REF(SMA(close, 5),1)': 10.612, 'SMA(close, 20)': 10.1495, 'REF(SMA(close, 20),1)': 10.128, 'SMA(close,5)': 10.49, 'SMA(close,20)': 10.1495}
[2025-08-18 19:26:29,543] [DEBUG] [backtesting:217] [conn:N/A] 回测完成
[2025-08-18 19:26:29,543] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 19:26:45,776] [INFO] [database:289] [conn:N/A] Loading stock data for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:26:45,776] [DEBUG] [database:213] [conn:N/A] 异步检查数据完整性
[2025-08-18 19:26:45,776] [INFO] [database:218] [conn:N/A] Checking data completeness for sh.603900 from 2025-06-01 to 2025-08-18
[2025-08-18 19:26:45,834] [INFO] [database:233] [conn:N/A] 从数据库获取 2025-06-01-2025-08-18 for sh.603900

[2025-08-18 19:26:45,840] [INFO] [database:250] [conn:N/A] Missing_dates set() for sh.603900
[2025-08-18 19:26:45,840] [INFO] [database:270] [conn:N/A] Found 0 missing data ranges for sh.603900
[2025-08-18 19:26:45,907] [INFO] [database:346] [conn:N/A] Successfully loaded 55 rows for sh.603900
[2025-08-18 19:26:45,931] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:45,935] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:45,936] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:45,936] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:45,936] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategySignalEvent
[2025-08-18 19:26:45,937] [DEBUG] [backtesting:281] [conn:N/A] 注册事件处理器: StrategyScheduleEvent
[2025-08-18 19:26:45,937] [DEBUG] [backtesting:306] [conn:N/A] 注册策略调度处理器: 0523ab87-75a7-497b-97cb-36fa1d5e8486
[2025-08-18 19:26:45,937] [INFO] [backtesting:309] [conn:N/A] 策略注册成功 | ID: 0523ab87-75a7-497b-97cb-36fa1d5e8486 | 名称: 自定义规则策略
[2025-08-18 19:26:45,937] [DEBUG] [backtesting:272] [conn:N/A] 开始回测...
[2025-08-18 19:26:45,938] [DEBUG] [backtesting:161] [conn:N/A] 识别数据频率为：日线
[2025-08-18 19:26:45,939] [DEBUG] [backtesting:187] [conn:N/A] 开始回测...
[2025-08-18 19:26:45,940] [INFO] [backtesting:356] [conn:N/A] 回测系统初始化开始
[2025-08-18 19:26:45,940] [INFO] [backtesting:368] [conn:N/A] 策略初始化完成: 0523ab87-75a7-497b-97cb-36fa1d5e8486
[2025-08-18 19:26:45,940] [INFO] [backtesting:386] [conn:N/A] 回测系统初始化完成
[2025-08-18 19:26:45,940] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-03 00:00:00
[2025-08-18 19:26:45,940] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,940] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-03 00:00:00
[2025-08-18 19:26:45,940] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,941] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,941] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,941] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,941] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,942] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:45,942] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,943] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,944] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,944] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:26:45,945] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,945] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,945] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,945] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,945] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,946] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,946] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,947] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,947] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 0, 回溯周期: 1)
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,948] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,948] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,948] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9700'), 'high': Decimal('12.1000'), 'low': Decimal('11.3200'), 'close': Decimal('11.8500'), 'volume': Decimal('59781512'), 'amount': Decimal('704448786.5200'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:45,948] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-04 00:00:00
[2025-08-18 19:26:45,948] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,948] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-04 00:00:00
[2025-08-18 19:26:45,948] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@0
[2025-08-18 19:26:45,949] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 0)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 0
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@0
[2025-08-18 19:26:45,949] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 0)
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,949] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:45,949] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 0 (当前索引: 1, 回溯周期: 1)
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:45,950] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,950] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5400'), 'high': Decimal('13.0400'), 'low': Decimal('11.4000'), 'close': Decimal('13.0400'), 'volume': Decimal('76582685'), 'amount': Decimal('954797066.6500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:45,950] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-05 00:00:00
[2025-08-18 19:26:45,950] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,950] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-05 00:00:00
[2025-08-18 19:26:45,950] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,950] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@1
[2025-08-18 19:26:45,951] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 1)
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:45,951] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 1
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@1
[2025-08-18 19:26:45,952] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 1)
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:45,952] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 1 (当前索引: 2, 回溯周期: 1)
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,952] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:45,953] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,953] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.9700'), 'high': Decimal('13.3700'), 'low': Decimal('11.7400'), 'close': Decimal('11.7400'), 'volume': Decimal('79708868'), 'amount': Decimal('990913647.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:45,953] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-06 00:00:00
[2025-08-18 19:26:45,953] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,953] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-06 00:00:00
[2025-08-18 19:26:45,953] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@2
[2025-08-18 19:26:45,953] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 2)
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:45,953] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 2
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@2
[2025-08-18 19:26:45,954] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 2)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:45,954] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 2 (当前索引: 3, 回溯周期: 1)
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,954] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:45,954] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,955] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3100'), 'high': Decimal('11.5900'), 'low': Decimal('11.0500'), 'close': Decimal('11.1000'), 'volume': Decimal('52021272'), 'amount': Decimal('584670731.8900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:45,955] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-09 00:00:00
[2025-08-18 19:26:45,955] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,955] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-09 00:00:00
[2025-08-18 19:26:45,955] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@3
[2025-08-18 19:26:45,955] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 3)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 3
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@3
[2025-08-18 19:26:45,955] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 3)
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,955] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:45,956] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 3 (当前索引: 4, 回溯周期: 1)
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,956] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:45,957] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,957] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0300'), 'high': Decimal('11.9000'), 'low': Decimal('11.0000'), 'close': Decimal('11.7300'), 'volume': Decimal('43385516'), 'amount': Decimal('498593941.2600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 0.0, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0}
[2025-08-18 19:26:45,957] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-10 00:00:00
[2025-08-18 19:26:45,957] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,957] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-10 00:00:00
[2025-08-18 19:26:45,957] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@5
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=1:6, 当前值=11.8500
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.892
[2025-08-18 19:26:45,957] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.892
[2025-08-18 19:26:45,958] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 5, 值: 11.892
[2025-08-18 19:26:45,958] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:26:45,958] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[5] = 11.892
[2025-08-18 19:26:45,958] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:45,959] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,959] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,959] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@4
[2025-08-18 19:26:45,959] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=0.0 (from index 4)
[2025-08-18 19:26:45,959] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 4
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@4
[2025-08-18 19:26:45,960] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 4)
[2025-08-18 19:26:45,960] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:45,960] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:45,960] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,960] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,960] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:45,960] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 4 (当前索引: 5, 回溯周期: 1)
[2025-08-18 19:26:45,961] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:45,961] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,961] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:45,961] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,962] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0000'), 'high': Decimal('12.1800'), 'low': Decimal('11.4500'), 'close': Decimal('11.8500'), 'volume': Decimal('49110045'), 'amount': Decimal('583218737.6900'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.892, 'REF(SMA(close, 5),1)': 0.0, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.892}
[2025-08-18 19:26:45,962] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-11 00:00:00
[2025-08-18 19:26:45,962] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,962] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-11 00:00:00
[2025-08-18 19:26:45,962] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@6
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=2:7, 当前值=12.2400
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 6, 值: 11.732
[2025-08-18 19:26:45,962] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[6] = 11.732
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:45,963] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.892
[2025-08-18 19:26:45,963] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.892
[2025-08-18 19:26:45,963] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.892 (from index 5)
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 5
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@5
[2025-08-18 19:26:45,963] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 5)
[2025-08-18 19:26:45,963] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,963] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:45,963] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,963] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,963] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,963] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 5 (当前索引: 6, 回溯周期: 1)
[2025-08-18 19:26:45,964] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,964] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:45,964] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,964] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.9800'), 'high': Decimal('12.4500'), 'low': Decimal('11.8000'), 'close': Decimal('12.2400'), 'volume': Decimal('49011610'), 'amount': Decimal('594009519.9700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.892, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:26:45,964] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-12 00:00:00
[2025-08-18 19:26:45,964] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,964] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-12 00:00:00
[2025-08-18 19:26:45,964] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@7
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=3:8, 当前值=12.9700
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.978
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.978
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 7, 值: 11.978
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[7] = 11.978
[2025-08-18 19:26:45,964] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:45,964] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,965] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,965] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 6)
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 6
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@6
[2025-08-18 19:26:45,965] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 6)
[2025-08-18 19:26:45,965] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:45,965] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:45,965] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,965] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:45,965] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:45,965] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 6 (当前索引: 7, 回溯周期: 1)
[2025-08-18 19:26:45,965] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:45,965] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:45,966] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,966] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.3400'), 'high': Decimal('13.2000'), 'low': Decimal('12.1200'), 'close': Decimal('12.9700'), 'volume': Decimal('53794722'), 'amount': Decimal('679946623.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.978, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.978}
[2025-08-18 19:26:45,966] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-13 00:00:00
[2025-08-18 19:26:45,966] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,966] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-13 00:00:00
[2025-08-18 19:26:45,966] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@8
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=4:9, 当前值=12.9700
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.352
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.352
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 8, 值: 12.352
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[8] = 12.352
[2025-08-18 19:26:45,966] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:45,966] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.978
[2025-08-18 19:26:45,966] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.978
[2025-08-18 19:26:45,966] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.978 (from index 7)
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 7
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@7
[2025-08-18 19:26:45,967] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 7)
[2025-08-18 19:26:45,967] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:45,967] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:45,967] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,967] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:45,967] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:45,967] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 7 (当前索引: 8, 回溯周期: 1)
[2025-08-18 19:26:45,967] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:45,967] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:45,968] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,968] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('13.3600'), 'high': Decimal('13.8800'), 'low': Decimal('12.8000'), 'close': Decimal('12.9700'), 'volume': Decimal('53806995'), 'amount': Decimal('718624248.0800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.352, 'REF(SMA(close, 5),1)': 11.978, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.352}
[2025-08-18 19:26:45,968] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-16 00:00:00
[2025-08-18 19:26:45,968] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,968] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-16 00:00:00
[2025-08-18 19:26:45,968] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@9
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=5:10, 当前值=12.8700
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.58
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.58
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 9, 值: 12.58
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[9] = 12.58
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:45,968] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.352
[2025-08-18 19:26:45,968] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.352
[2025-08-18 19:26:45,968] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.352 (from index 8)
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,968] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 8
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@8
[2025-08-18 19:26:45,969] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 8)
[2025-08-18 19:26:45,969] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:45,969] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,969] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 8 (当前索引: 9, 回溯周期: 1)
[2025-08-18 19:26:45,969] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,969] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:45,970] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,970] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.7000'), 'high': Decimal('13.6100'), 'low': Decimal('12.3600'), 'close': Decimal('12.8700'), 'volume': Decimal('39445490'), 'amount': Decimal('517960693.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.58, 'REF(SMA(close, 5),1)': 12.352, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.58}
[2025-08-18 19:26:45,970] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-17 00:00:00
[2025-08-18 19:26:45,970] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,970] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-17 00:00:00
[2025-08-18 19:26:45,970] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@10
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=6:11, 当前值=12.3500
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.68
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.68
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 10, 值: 12.68
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[10] = 12.68
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:45,970] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.58
[2025-08-18 19:26:45,970] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.58
[2025-08-18 19:26:45,970] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.58 (from index 9)
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,970] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 9
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@9
[2025-08-18 19:26:45,971] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 9)
[2025-08-18 19:26:45,971] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:45,971] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:45,971] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,971] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:45,971] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:45,971] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 9 (当前索引: 10, 回溯周期: 1)
[2025-08-18 19:26:45,972] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:45,972] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:45,972] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,972] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.4500'), 'high': Decimal('12.8600'), 'low': Decimal('12.2300'), 'close': Decimal('12.3500'), 'volume': Decimal('33378865'), 'amount': Decimal('414478726.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.68, 'REF(SMA(close, 5),1)': 12.58, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.68}
[2025-08-18 19:26:45,972] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-18 00:00:00
[2025-08-18 19:26:45,972] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,972] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-18 00:00:00
[2025-08-18 19:26:45,972] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@11
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=7:12, 当前值=12.1800
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.668000000000001
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.668000000000001
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 11, 值: 12.668000000000001
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[11] = 12.668000000000001
[2025-08-18 19:26:45,972] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:45,972] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.68
[2025-08-18 19:26:45,972] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.68
[2025-08-18 19:26:45,973] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.68 (from index 10)
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 10
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@10
[2025-08-18 19:26:45,973] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 10)
[2025-08-18 19:26:45,973] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,973] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:45,973] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,973] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,973] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:45,973] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 10 (当前索引: 11, 回溯周期: 1)
[2025-08-18 19:26:45,973] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,973] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:45,974] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,974] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.2500'), 'high': Decimal('12.5400'), 'low': Decimal('11.9000'), 'close': Decimal('12.1800'), 'volume': Decimal('23136160'), 'amount': Decimal('281766986.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.668000000000001, 'REF(SMA(close, 5),1)': 12.68, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.668000000000001}
[2025-08-18 19:26:45,974] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-19 00:00:00
[2025-08-18 19:26:45,974] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,974] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-19 00:00:00
[2025-08-18 19:26:45,974] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@12
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=8:13, 当前值=11.6200
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.398
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.398
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 12, 值: 12.398
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[12] = 12.398
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:45,974] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,974] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.668000000000001
[2025-08-18 19:26:45,974] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.668000000000001 (from index 11)
[2025-08-18 19:26:45,974] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 11
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,975] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@11
[2025-08-18 19:26:45,975] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 11)
[2025-08-18 19:26:45,976] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:45,976] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:45,976] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,976] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,976] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:45,976] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,977] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:45,977] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 11 (当前索引: 12, 回溯周期: 1)
[2025-08-18 19:26:45,977] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:45,977] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,977] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:45,977] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,978] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-19', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('12.0100'), 'high': Decimal('12.4600'), 'low': Decimal('11.5800'), 'close': Decimal('11.6200'), 'volume': Decimal('25982780'), 'amount': Decimal('311245180.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-19 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.398, 'REF(SMA(close, 5),1)': 12.668000000000001, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.398}
[2025-08-18 19:26:45,978] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-20 00:00:00
[2025-08-18 19:26:45,978] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,978] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-20 00:00:00
[2025-08-18 19:26:45,978] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,978] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@13
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=9:14, 当前值=11.5100
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=12.106
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=12.106
[2025-08-18 19:26:45,980] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 13, 值: 12.106
[2025-08-18 19:26:45,981] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,981] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[13] = 12.106
[2025-08-18 19:26:45,981] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:45,981] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.398
[2025-08-18 19:26:45,981] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.398
[2025-08-18 19:26:45,981] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.398 (from index 12)
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 12
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,982] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@12
[2025-08-18 19:26:45,982] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 12)
[2025-08-18 19:26:45,983] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:45,983] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:45,984] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,984] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:45,984] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,984] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,985] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,985] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:45,986] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 12 (当前索引: 13, 回溯周期: 1)
[2025-08-18 19:26:45,986] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:45,986] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:45,986] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,986] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,986] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:45,986] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,987] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-20', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.6000'), 'high': Decimal('11.9500'), 'low': Decimal('11.4300'), 'close': Decimal('11.5100'), 'volume': Decimal('18962453'), 'amount': Decimal('220750154.3300'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-20 00:00:00'), 'signal': 0, 'SMA(close, 5)': 12.106, 'REF(SMA(close, 5),1)': 12.398, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 12.106}
[2025-08-18 19:26:45,987] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-23 00:00:00
[2025-08-18 19:26:45,987] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,987] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-23 00:00:00
[2025-08-18 19:26:45,987] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,987] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,987] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@14
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=10:15, 当前值=11.8200
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.895999999999999
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.895999999999999
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 14, 值: 11.895999999999999
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[14] = 11.895999999999999
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:45,988] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=12.106
[2025-08-18 19:26:45,988] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=12.106
[2025-08-18 19:26:45,988] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=12.106 (from index 13)
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 13
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,988] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@13
[2025-08-18 19:26:45,989] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 13)
[2025-08-18 19:26:45,989] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:45,989] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,989] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 13 (当前索引: 14, 回溯周期: 1)
[2025-08-18 19:26:45,989] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,989] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:45,990] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,990] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5200'), 'high': Decimal('12.0900'), 'low': Decimal('11.3800'), 'close': Decimal('11.8200'), 'volume': Decimal('23825452'), 'amount': Decimal('280686631.8800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.895999999999999, 'REF(SMA(close, 5),1)': 12.106, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.895999999999999}
[2025-08-18 19:26:45,990] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-24 00:00:00
[2025-08-18 19:26:45,990] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,990] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-24 00:00:00
[2025-08-18 19:26:45,990] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@15
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=11:16, 当前值=11.5300
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.732
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.732
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 15, 值: 11.732
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,990] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[15] = 11.732
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:45,991] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,991] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.895999999999999
[2025-08-18 19:26:45,991] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.895999999999999 (from index 14)
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 14
[2025-08-18 19:26:45,991] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@14
[2025-08-18 19:26:45,992] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 14)
[2025-08-18 19:26:45,992] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,992] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,992] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,992] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,992] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:45,992] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,993] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,993] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 14 (当前索引: 15, 回溯周期: 1)
[2025-08-18 19:26:45,993] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,993] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,993] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:45,993] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,993] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5800'), 'high': Decimal('12.0600'), 'low': Decimal('11.4400'), 'close': Decimal('11.5300'), 'volume': Decimal('24376800'), 'amount': Decimal('284215937.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.732, 'REF(SMA(close, 5),1)': 11.895999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.732}
[2025-08-18 19:26:45,994] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-25 00:00:00
[2025-08-18 19:26:45,994] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,994] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-25 00:00:00
[2025-08-18 19:26:45,994] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@16
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=12:17, 当前值=11.2400
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.544
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.544
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 16, 值: 11.544
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[16] = 11.544
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:45,994] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.732
[2025-08-18 19:26:45,994] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.732
[2025-08-18 19:26:45,994] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.732 (from index 15)
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,994] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 15
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@15
[2025-08-18 19:26:45,995] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 15)
[2025-08-18 19:26:45,995] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:45,995] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,995] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 15 (当前索引: 16, 回溯周期: 1)
[2025-08-18 19:26:45,995] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,995] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:45,995] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,995] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('11.5300'), 'low': Decimal('11.1200'), 'close': Decimal('11.2400'), 'volume': Decimal('17654000'), 'amount': Decimal('199083908.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.544, 'REF(SMA(close, 5),1)': 11.732, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.544}
[2025-08-18 19:26:45,995] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-26 00:00:00
[2025-08-18 19:26:45,996] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,996] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-26 00:00:00
[2025-08-18 19:26:45,996] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@17
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=13:18, 当前值=11.1200
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.443999999999999
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.443999999999999
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 17, 值: 11.443999999999999
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[17] = 11.443999999999999
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:45,996] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.544
[2025-08-18 19:26:45,996] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.544
[2025-08-18 19:26:45,996] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.544 (from index 16)
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 16
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,996] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@16
[2025-08-18 19:26:45,996] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 16)
[2025-08-18 19:26:45,997] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:45,997] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,997] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 16 (当前索引: 17, 回溯周期: 1)
[2025-08-18 19:26:45,997] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,997] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:45,997] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,998] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-26', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2300'), 'high': Decimal('11.2900'), 'low': Decimal('10.8300'), 'close': Decimal('11.1200'), 'volume': Decimal('16326051'), 'amount': Decimal('181333863.8700'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-26 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.443999999999999, 'REF(SMA(close, 5),1)': 11.544, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.443999999999999}
[2025-08-18 19:26:45,998] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-27 00:00:00
[2025-08-18 19:26:45,998] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:45,998] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-27 00:00:00
[2025-08-18 19:26:45,998] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@18
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=14:19, 当前值=11.1500
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.372
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.372
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 18, 值: 11.372
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[18] = 11.372
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:45,998] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,998] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.443999999999999
[2025-08-18 19:26:45,998] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.443999999999999 (from index 17)
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:45,998] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 17
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@17
[2025-08-18 19:26:45,999] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 17)
[2025-08-18 19:26:45,999] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:45,999] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:45,999] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 17 (当前索引: 18, 回溯周期: 1)
[2025-08-18 19:26:45,999] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:45,999] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:45,999] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:45,999] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-27', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.0900'), 'high': Decimal('11.2300'), 'low': Decimal('10.8800'), 'close': Decimal('11.1500'), 'volume': Decimal('11665380'), 'amount': Decimal('129719694.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-27 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.372, 'REF(SMA(close, 5),1)': 11.443999999999999, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.372}
[2025-08-18 19:26:46,000] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-06-30 00:00:00
[2025-08-18 19:26:46,000] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,000] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-06-30 00:00:00
[2025-08-18 19:26:46,000] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@19
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=15:20, 当前值=11.4000
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.288
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.288
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 19, 值: 11.288
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[19] = 11.288
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:46,000] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.372
[2025-08-18 19:26:46,000] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.372
[2025-08-18 19:26:46,000] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.372 (from index 18)
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 18
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,000] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@18
[2025-08-18 19:26:46,000] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 18)
[2025-08-18 19:26:46,000] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:46,001] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,001] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 18 (当前索引: 19, 回溯周期: 1)
[2025-08-18 19:26:46,001] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,001] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:46,001] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,001] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-06-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1800'), 'high': Decimal('11.5600'), 'low': Decimal('11.0700'), 'close': Decimal('11.4000'), 'volume': Decimal('20761600'), 'amount': Decimal('235697621.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-06-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.288, 'REF(SMA(close, 5),1)': 11.372, 'SMA(close, 20)': 0.0, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.288}
[2025-08-18 19:26:46,001] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-01 00:00:00
[2025-08-18 19:26:46,001] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,001] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-01 00:00:00
[2025-08-18 19:26:46,001] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@20
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=16:21, 当前值=11.4600
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.274
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.274
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 20, 值: 11.274
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[20] = 11.274
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:46,002] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.288
[2025-08-18 19:26:46,002] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.288
[2025-08-18 19:26:46,002] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.288 (from index 19)
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 20
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@20
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=1:21, 当前值=11.4600
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.894499999999999
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.894499999999999
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 20, 值: 11.894499999999999
[2025-08-18 19:26:46,002] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: False
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[20] = 11.894499999999999
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 19
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@19
[2025-08-18 19:26:46,003] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=0.0 (from index 19)
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 19 (当前索引: 20, 回溯周期: 1)
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:46,003] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,003] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,004] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4700'), 'high': Decimal('11.8000'), 'low': Decimal('11.1500'), 'close': Decimal('11.4600'), 'volume': Decimal('24552500'), 'amount': Decimal('281309276.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.274, 'REF(SMA(close, 5),1)': 11.288, 'SMA(close, 20)': 11.894499999999999, 'REF(SMA(close, 20),1)': 0.0, 'SMA(close,5)': 11.274, 'SMA(close,20)': 11.894499999999999}
[2025-08-18 19:26:46,004] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-02 00:00:00
[2025-08-18 19:26:46,004] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,004] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-02 00:00:00
[2025-08-18 19:26:46,004] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@21
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=17:22, 当前值=11.3000
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.286
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.286
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 21, 值: 11.286
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[21] = 11.286
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:46,004] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.274
[2025-08-18 19:26:46,004] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.274
[2025-08-18 19:26:46,004] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.274 (from index 20)
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 21
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@21
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=2:22, 当前值=11.3000
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.807500000000001
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.807500000000001
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 21, 值: 11.807500000000001
[2025-08-18 19:26:46,004] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[21] = 11.807500000000001
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.894499999999999
[2025-08-18 19:26:46,005] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.894499999999999 (from index 20)
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 20 (当前索引: 21, 回溯周期: 1)
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:46,005] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,005] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,005] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-02', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.5300'), 'high': Decimal('12.0000'), 'low': Decimal('11.2500'), 'close': Decimal('11.3000'), 'volume': Decimal('29079220'), 'amount': Decimal('336568278.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-02 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.286, 'REF(SMA(close, 5),1)': 11.274, 'SMA(close, 20)': 11.807500000000001, 'REF(SMA(close, 20),1)': 11.894499999999999, 'SMA(close,5)': 11.286, 'SMA(close,20)': 11.807500000000001}
[2025-08-18 19:26:46,006] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-03 00:00:00
[2025-08-18 19:26:46,006] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,006] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-03 00:00:00
[2025-08-18 19:26:46,006] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@22
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=18:23, 当前值=11.2600
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.314
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.314
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 22, 值: 11.314
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[22] = 11.314
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:46,006] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.286
[2025-08-18 19:26:46,006] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.286
[2025-08-18 19:26:46,006] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.286 (from index 21)
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 22
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@22
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=3:23, 当前值=11.2600
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7835
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7835
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 22, 值: 11.7835
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[22] = 11.7835
[2025-08-18 19:26:46,006] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:46,006] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,006] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.807500000000001
[2025-08-18 19:26:46,007] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.807500000000001 (from index 21)
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:46,007] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 21 (当前索引: 22, 回溯周期: 1)
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:46,007] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,007] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,008] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-03', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1600'), 'high': Decimal('11.5500'), 'low': Decimal('11.0900'), 'close': Decimal('11.2600'), 'volume': Decimal('16376940'), 'amount': Decimal('184800725.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-03 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.314, 'REF(SMA(close, 5),1)': 11.286, 'SMA(close, 20)': 11.7835, 'REF(SMA(close, 20),1)': 11.807500000000001, 'SMA(close,5)': 11.314, 'SMA(close,20)': 11.7835}
[2025-08-18 19:26:46,008] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-04 00:00:00
[2025-08-18 19:26:46,008] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,008] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-04 00:00:00
[2025-08-18 19:26:46,008] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@23
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=19:24, 当前值=10.8600
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.256
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.256
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 23, 值: 11.256
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[23] = 11.256
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:46,009] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.314
[2025-08-18 19:26:46,009] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.314
[2025-08-18 19:26:46,009] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.314 (from index 22)
[2025-08-18 19:26:46,009] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 23
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@23
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=4:24, 当前值=10.8600
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7715
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7715
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 23, 值: 11.7715
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[23] = 11.7715
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:46,010] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,010] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7835
[2025-08-18 19:26:46,010] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7835 (from index 22)
[2025-08-18 19:26:46,010] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:46,010] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:46,010] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,010] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,010] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,010] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:46,010] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,010] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,010] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,010] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 22 (当前索引: 23, 回溯周期: 1)
[2025-08-18 19:26:46,011] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:46,011] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:46,011] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,011] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,011] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,011] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.2600'), 'low': Decimal('10.7000'), 'close': Decimal('10.8600'), 'volume': Decimal('18454110'), 'amount': Decimal('200513009.9000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.256, 'REF(SMA(close, 5),1)': 11.314, 'SMA(close, 20)': 11.7715, 'REF(SMA(close, 20),1)': 11.7835, 'SMA(close,5)': 11.256, 'SMA(close,20)': 11.7715}
[2025-08-18 19:26:46,011] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-07 00:00:00
[2025-08-18 19:26:46,011] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,011] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-07 00:00:00
[2025-08-18 19:26:46,011] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@24
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=20:25, 当前值=11.1900
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 24, 值: 11.214
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[24] = 11.214
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:46,011] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.256
[2025-08-18 19:26:46,011] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.256
[2025-08-18 19:26:46,011] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.256 (from index 23)
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,011] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 24
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@24
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=5:25, 当前值=11.1900
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.744499999999999
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.744499999999999
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 24, 值: 11.744499999999999
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[24] = 11.744499999999999
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:46,012] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,012] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7715
[2025-08-18 19:26:46,012] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7715 (from index 23)
[2025-08-18 19:26:46,012] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,012] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,012] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,012] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,012] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,012] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,012] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,012] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,012] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,012] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 23 (当前索引: 24, 回溯周期: 1)
[2025-08-18 19:26:46,013] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,013] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,013] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,013] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,013] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,013] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8300'), 'high': Decimal('11.3600'), 'low': Decimal('10.6300'), 'close': Decimal('11.1900'), 'volume': Decimal('15540620'), 'amount': Decimal('173423981.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.256, 'SMA(close, 20)': 11.744499999999999, 'REF(SMA(close, 20),1)': 11.7715, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.744499999999999}
[2025-08-18 19:26:46,013] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-08 00:00:00
[2025-08-18 19:26:46,013] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,013] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-08 00:00:00
[2025-08-18 19:26:46,013] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@25
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=21:26, 当前值=11.3700
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.196
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.196
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 25, 值: 11.196
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[25] = 11.196
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:46,013] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,013] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,013] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 24)
[2025-08-18 19:26:46,013] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 25
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@25
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=6:26, 当前值=11.3700
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.7205
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.7205
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 25, 值: 11.7205
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[25] = 11.7205
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,014] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.744499999999999
[2025-08-18 19:26:46,014] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.744499999999999 (from index 24)
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:46,014] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,014] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,014] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:46,014] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,014] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,014] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 24 (当前索引: 25, 回溯周期: 1)
[2025-08-18 19:26:46,014] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:46,015] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:46,015] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,015] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,015] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,015] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1900'), 'high': Decimal('11.7000'), 'low': Decimal('11.1000'), 'close': Decimal('11.3700'), 'volume': Decimal('17187760'), 'amount': Decimal('195723936.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.196, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.7205, 'REF(SMA(close, 20),1)': 11.744499999999999, 'SMA(close,5)': 11.196, 'SMA(close,20)': 11.7205}
[2025-08-18 19:26:46,015] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-09 00:00:00
[2025-08-18 19:26:46,015] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,015] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-09 00:00:00
[2025-08-18 19:26:46,015] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@26
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=22:27, 当前值=11.4200
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.22
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.22
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 26, 值: 11.22
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[26] = 11.22
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:46,015] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.196
[2025-08-18 19:26:46,015] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.196
[2025-08-18 19:26:46,015] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.196 (from index 25)
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 26
[2025-08-18 19:26:46,015] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@26
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=7:27, 当前值=11.4200
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.6795
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.6795
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 26, 值: 11.6795
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[26] = 11.6795
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.7205
[2025-08-18 19:26:46,016] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.7205 (from index 25)
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,016] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,016] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 25 (当前索引: 26, 回溯周期: 1)
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:46,016] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,017] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,017] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,017] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-09', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.3000'), 'high': Decimal('11.5700'), 'low': Decimal('11.2300'), 'close': Decimal('11.4200'), 'volume': Decimal('11928520'), 'amount': Decimal('135881154.8000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-09 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.22, 'REF(SMA(close, 5),1)': 11.196, 'SMA(close, 20)': 11.6795, 'REF(SMA(close, 20),1)': 11.7205, 'SMA(close,5)': 11.22, 'SMA(close,20)': 11.6795}
[2025-08-18 19:26:46,017] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-10 00:00:00
[2025-08-18 19:26:46,017] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,017] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-10 00:00:00
[2025-08-18 19:26:46,017] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@27
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=23:28, 当前值=11.2300
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.214
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.214
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 27, 值: 11.214
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[27] = 11.214
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:46,017] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.22
[2025-08-18 19:26:46,017] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.22
[2025-08-18 19:26:46,017] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.22 (from index 26)
[2025-08-18 19:26:46,017] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 27
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@27
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=8:28, 当前值=11.2300
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.5925
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.5925
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 27, 值: 11.5925
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[27] = 11.5925
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.6795
[2025-08-18 19:26:46,018] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.6795 (from index 26)
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,018] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,018] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 26 (当前索引: 27, 回溯周期: 1)
[2025-08-18 19:26:46,018] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,018] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,019] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,019] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,019] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,019] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-10', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.5500'), 'low': Decimal('11.0700'), 'close': Decimal('11.2300'), 'volume': Decimal('10643600'), 'amount': Decimal('119294545.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-10 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.214, 'REF(SMA(close, 5),1)': 11.22, 'SMA(close, 20)': 11.5925, 'REF(SMA(close, 20),1)': 11.6795, 'SMA(close,5)': 11.214, 'SMA(close,20)': 11.5925}
[2025-08-18 19:26:46,019] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-11 00:00:00
[2025-08-18 19:26:46,019] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,019] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-11 00:00:00
[2025-08-18 19:26:46,019] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@28
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=24:29, 当前值=11.3000
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.302
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.302
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 28, 值: 11.302
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[28] = 11.302
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:46,019] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.214
[2025-08-18 19:26:46,019] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.214
[2025-08-18 19:26:46,019] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.214 (from index 27)
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 28
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,019] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@28
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=9:29, 当前值=11.3000
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.509
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.509
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 28, 值: 11.509
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[28] = 11.509
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.5925
[2025-08-18 19:26:46,020] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.5925 (from index 27)
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:46,020] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:46,020] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 27 (当前索引: 28, 回溯周期: 1)
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:46,020] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:46,021] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:46,021] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,021] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.1500'), 'high': Decimal('11.3200'), 'low': Decimal('11.1000'), 'close': Decimal('11.3000'), 'volume': Decimal('8740380'), 'amount': Decimal('98150127.2000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.302, 'REF(SMA(close, 5),1)': 11.214, 'SMA(close, 20)': 11.509, 'REF(SMA(close, 20),1)': 11.5925, 'SMA(close,5)': 11.302, 'SMA(close,20)': 11.509}
[2025-08-18 19:26:46,021] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-14 00:00:00
[2025-08-18 19:26:46,021] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,021] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-14 00:00:00
[2025-08-18 19:26:46,021] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@29
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=25:30, 当前值=11.8900
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.442
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.442
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 29, 值: 11.442
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[29] = 11.442
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:46,021] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.302
[2025-08-18 19:26:46,021] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.302
[2025-08-18 19:26:46,021] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.302 (from index 28)
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 29
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@29
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=10:30, 当前值=11.8900
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.459999999999999
[2025-08-18 19:26:46,021] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.459999999999999
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 29, 值: 11.459999999999999
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[29] = 11.459999999999999
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:46,022] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.509
[2025-08-18 19:26:46,022] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.509
[2025-08-18 19:26:46,022] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.509 (from index 28)
[2025-08-18 19:26:46,022] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:46,022] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:46,022] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,022] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,022] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,022] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:46,022] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:46,022] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,023] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,023] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 28 (当前索引: 29, 回溯周期: 1)
[2025-08-18 19:26:46,023] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:46,023] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:46,023] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,023] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,023] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,023] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.4200'), 'high': Decimal('11.9300'), 'low': Decimal('11.3100'), 'close': Decimal('11.8900'), 'volume': Decimal('23118500'), 'amount': Decimal('269805301.3600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.442, 'REF(SMA(close, 5),1)': 11.302, 'SMA(close, 20)': 11.459999999999999, 'REF(SMA(close, 20),1)': 11.509, 'SMA(close,5)': 11.442, 'SMA(close,20)': 11.459999999999999}
[2025-08-18 19:26:46,023] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-15 00:00:00
[2025-08-18 19:26:46,023] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,023] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-15 00:00:00
[2025-08-18 19:26:46,023] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@30
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=26:31, 当前值=10.7000
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.308
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.308
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 30, 值: 11.308
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[30] = 11.308
[2025-08-18 19:26:46,023] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:46,023] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.442
[2025-08-18 19:26:46,023] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.442
[2025-08-18 19:26:46,024] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.442 (from index 29)
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 30
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@30
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=11:31, 当前值=10.7000
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.377500000000001
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.377500000000001
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 30, 值: 11.377500000000001
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[30] = 11.377500000000001
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:46,024] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,024] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.459999999999999
[2025-08-18 19:26:46,024] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.459999999999999 (from index 29)
[2025-08-18 19:26:46,024] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:46,024] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:46,024] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,024] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,024] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,024] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,024] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:46,025] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:46,025] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:46,025] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,025] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,025] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,025] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 29 (当前索引: 30, 回溯周期: 1)
[2025-08-18 19:26:46,025] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:46,025] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:46,025] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,025] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,025] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,025] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9900'), 'high': Decimal('11.1900'), 'low': Decimal('10.7000'), 'close': Decimal('10.7000'), 'volume': Decimal('27945200'), 'amount': Decimal('300147468.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.308, 'REF(SMA(close, 5),1)': 11.442, 'SMA(close, 20)': 11.377500000000001, 'REF(SMA(close, 20),1)': 11.459999999999999, 'SMA(close,5)': 11.308, 'SMA(close,20)': 11.377500000000001}
[2025-08-18 19:26:46,025] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-16 00:00:00
[2025-08-18 19:26:46,025] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,025] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-16 00:00:00
[2025-08-18 19:26:46,025] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@31
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=27:32, 当前值=9.9300
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.01
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=11.01
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 31, 值: 11.01
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[31] = 11.01
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:46,026] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.308
[2025-08-18 19:26:46,026] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.308
[2025-08-18 19:26:46,026] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.308 (from index 30)
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 31
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@31
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=12:32, 当前值=9.9300
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.265
[2025-08-18 19:26:46,026] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.265
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 31, 值: 11.265
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[31] = 11.265
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:46,027] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,027] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.377500000000001
[2025-08-18 19:26:46,027] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.377500000000001 (from index 30)
[2025-08-18 19:26:46,027] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:46,027] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:46,027] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:46,027] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:46,027] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,027] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:46,027] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:46,027] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,028] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:46,028] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:46,028] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 30 (当前索引: 31, 回溯周期: 1)
[2025-08-18 19:26:46,028] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:46,028] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:46,028] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:46,028] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:46,028] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,050] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-16', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3700'), 'high': Decimal('10.4300'), 'low': Decimal('9.7500'), 'close': Decimal('9.9300'), 'volume': Decimal('33570940'), 'amount': Decimal('334695551.6800'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-16 00:00:00'), 'signal': 0, 'SMA(close, 5)': 11.01, 'REF(SMA(close, 5),1)': 11.308, 'SMA(close, 20)': 11.265, 'REF(SMA(close, 20),1)': 11.377500000000001, 'SMA(close,5)': 11.01, 'SMA(close,20)': 11.265}
[2025-08-18 19:26:46,056] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-17 00:00:00
[2025-08-18 19:26:46,057] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,057] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-17 00:00:00
[2025-08-18 19:26:46,057] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@32
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=28:33, 当前值=9.8900
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.742
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.742
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 32, 值: 10.742
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[32] = 10.742
[2025-08-18 19:26:46,057] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:46,057] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=11.01
[2025-08-18 19:26:46,057] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=11.01
[2025-08-18 19:26:46,058] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=11.01 (from index 31)
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 32
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@32
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=13:33, 当前值=9.8900
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.1785
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.1785
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 32, 值: 11.1785
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[32] = 11.1785
[2025-08-18 19:26:46,058] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:46,058] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.265
[2025-08-18 19:26:46,058] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.265
[2025-08-18 19:26:46,059] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.265 (from index 31)
[2025-08-18 19:26:46,059] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:46,059] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:46,059] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,059] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,059] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,059] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:46,059] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:46,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:46,059] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,059] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,059] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,059] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 31 (当前索引: 32, 回溯周期: 1)
[2025-08-18 19:26:46,059] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:46,059] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:46,060] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,060] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,060] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,060] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-17', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8800'), 'high': Decimal('10.1500'), 'low': Decimal('9.8500'), 'close': Decimal('9.8900'), 'volume': Decimal('17583985'), 'amount': Decimal('174553922.9500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-17 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.742, 'REF(SMA(close, 5),1)': 11.01, 'SMA(close, 20)': 11.1785, 'REF(SMA(close, 20),1)': 11.265, 'SMA(close,5)': 10.742, 'SMA(close,20)': 11.1785}
[2025-08-18 19:26:46,060] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-18 00:00:00
[2025-08-18 19:26:46,060] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,060] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-18 00:00:00
[2025-08-18 19:26:46,060] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@33
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=29:34, 当前值=9.7500
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.431999999999999
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.431999999999999
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 33, 值: 10.431999999999999
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,060] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[33] = 10.431999999999999
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:46,061] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.742
[2025-08-18 19:26:46,061] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.742
[2025-08-18 19:26:46,061] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.742 (from index 32)
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 33
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@33
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=14:34, 当前值=9.7500
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=11.0905
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=11.0905
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 33, 值: 11.0905
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[33] = 11.0905
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:46,061] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,061] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.1785
[2025-08-18 19:26:46,061] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.1785 (from index 32)
[2025-08-18 19:26:46,061] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,061] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,061] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,061] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,061] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,061] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,062] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,062] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,062] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:46,062] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,067] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,067] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,068] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 32 (当前索引: 33, 回溯周期: 1)
[2025-08-18 19:26:46,068] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,068] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,068] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,068] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,068] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,069] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8500'), 'high': Decimal('9.8900'), 'low': Decimal('9.6900'), 'close': Decimal('9.7500'), 'volume': Decimal('13242400'), 'amount': Decimal('129118773.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.431999999999999, 'REF(SMA(close, 5),1)': 10.742, 'SMA(close, 20)': 11.0905, 'REF(SMA(close, 20),1)': 11.1785, 'SMA(close,5)': 10.431999999999999, 'SMA(close,20)': 11.0905}
[2025-08-18 19:26:46,069] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-21 00:00:00
[2025-08-18 19:26:46,069] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,069] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-21 00:00:00
[2025-08-18 19:26:46,069] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,069] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,069] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:26:46,069] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,069] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@34
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=30:35, 当前值=9.8500
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.024
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.024
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 34, 值: 10.024
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[34] = 10.024
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:46,070] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,070] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.431999999999999
[2025-08-18 19:26:46,070] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.431999999999999 (from index 33)
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 34
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@34
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=15:35, 当前值=9.8500
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.992
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.992
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 34, 值: 10.992
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[34] = 10.992
[2025-08-18 19:26:46,070] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:46,070] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,070] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=11.0905
[2025-08-18 19:26:46,070] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=11.0905 (from index 33)
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:46,071] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 33 (当前索引: 34, 回溯周期: 1)
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:46,071] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:46,071] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,071] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-21', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('9.9400'), 'low': Decimal('9.7100'), 'close': Decimal('9.8500'), 'volume': Decimal('12705234'), 'amount': Decimal('125082445.7000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-21 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.024, 'REF(SMA(close, 5),1)': 10.431999999999999, 'SMA(close, 20)': 10.992, 'REF(SMA(close, 20),1)': 11.0905, 'SMA(close,5)': 10.024, 'SMA(close,20)': 10.992}
[2025-08-18 19:26:46,071] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-22 00:00:00
[2025-08-18 19:26:46,071] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,071] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-22 00:00:00
[2025-08-18 19:26:46,071] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@35
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=31:36, 当前值=9.9400
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 35, 值: 9.872
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[35] = 9.872
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:46,072] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.024
[2025-08-18 19:26:46,072] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.024
[2025-08-18 19:26:46,072] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.024 (from index 34)
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 35
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@35
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=16:36, 当前值=9.9400
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.9125
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.9125
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 35, 值: 10.9125
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[35] = 10.9125
[2025-08-18 19:26:46,072] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:46,072] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.992
[2025-08-18 19:26:46,072] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.992
[2025-08-18 19:26:46,072] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.992 (from index 34)
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,073] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:46,073] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 34 (当前索引: 35, 回溯周期: 1)
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,073] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,073] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,073] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-22', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9200'), 'high': Decimal('10.1300'), 'low': Decimal('9.8900'), 'close': Decimal('9.9400'), 'volume': Decimal('17735100'), 'amount': Decimal('177170090.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-22 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 10.024, 'SMA(close, 20)': 10.9125, 'REF(SMA(close, 20),1)': 10.992, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.9125}
[2025-08-18 19:26:46,073] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-23 00:00:00
[2025-08-18 19:26:46,073] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,074] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-23 00:00:00
[2025-08-18 19:26:46,074] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@36
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=32:37, 当前值=9.9300
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.872
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.872
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 36, 值: 9.872
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[36] = 9.872
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:46,074] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,074] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,074] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 35)
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 36
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@36
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=17:37, 当前值=9.9300
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.847
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.847
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 36, 值: 10.847
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,074] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[36] = 10.847
[2025-08-18 19:26:46,075] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:46,075] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,075] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.9125
[2025-08-18 19:26:46,075] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.9125 (from index 35)
[2025-08-18 19:26:46,075] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,075] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,075] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:46,075] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:46,075] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,076] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,076] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,076] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,076] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:46,076] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,076] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:46,076] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:46,076] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 35 (当前索引: 36, 回溯周期: 1)
[2025-08-18 19:26:46,076] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,076] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,076] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:46,076] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:46,076] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,076] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-23', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9500'), 'high': Decimal('10.2000'), 'low': Decimal('9.8000'), 'close': Decimal('9.9300'), 'volume': Decimal('13795275'), 'amount': Decimal('137802304.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-23 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.872, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.847, 'REF(SMA(close, 20),1)': 10.9125, 'SMA(close,5)': 9.872, 'SMA(close,20)': 10.847}
[2025-08-18 19:26:46,076] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-24 00:00:00
[2025-08-18 19:26:46,076] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,076] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-24 00:00:00
[2025-08-18 19:26:46,076] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@37
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=33:38, 当前值=9.8100
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.856
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.856
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 37, 值: 9.856
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[37] = 9.856
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:46,077] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.872
[2025-08-18 19:26:46,077] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.872
[2025-08-18 19:26:46,077] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.872 (from index 36)
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 37
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@37
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=18:38, 当前值=9.8100
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7815
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7815
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 37, 值: 10.7815
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[37] = 10.7815
[2025-08-18 19:26:46,077] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:46,077] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.847
[2025-08-18 19:26:46,077] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.847
[2025-08-18 19:26:46,077] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.847 (from index 36)
[2025-08-18 19:26:46,077] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,078] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,078] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:46,078] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,078] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 36 (当前索引: 37, 回溯周期: 1)
[2025-08-18 19:26:46,078] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:46,078] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,078] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,078] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-24', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('9.9700'), 'low': Decimal('9.7500'), 'close': Decimal('9.8100'), 'volume': Decimal('12661765'), 'amount': Decimal('124434027.1100'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-24 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.856, 'REF(SMA(close, 5),1)': 9.872, 'SMA(close, 20)': 10.7815, 'REF(SMA(close, 20),1)': 10.847, 'SMA(close,5)': 9.856, 'SMA(close,20)': 10.7815}
[2025-08-18 19:26:46,078] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-25 00:00:00
[2025-08-18 19:26:46,078] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,078] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-25 00:00:00
[2025-08-18 19:26:46,078] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@38
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=34:39, 当前值=9.7700
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 38, 值: 9.86
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[38] = 9.86
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:46,079] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.856
[2025-08-18 19:26:46,079] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.856
[2025-08-18 19:26:46,079] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.856 (from index 37)
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 38
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@38
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=19:39, 当前值=9.7700
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.7125
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.7125
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 38, 值: 10.7125
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[38] = 10.7125
[2025-08-18 19:26:46,079] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:46,079] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,079] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7815
[2025-08-18 19:26:46,079] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7815 (from index 37)
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:46,080] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 37 (当前索引: 38, 回溯周期: 1)
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,080] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,080] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,080] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-25', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8900'), 'low': Decimal('9.7400'), 'close': Decimal('9.7700'), 'volume': Decimal('8516580'), 'amount': Decimal('83461624.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-25 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.856, 'SMA(close, 20)': 10.7125, 'REF(SMA(close, 20),1)': 10.7815, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.7125}
[2025-08-18 19:26:46,080] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-28 00:00:00
[2025-08-18 19:26:46,080] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,080] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-28 00:00:00
[2025-08-18 19:26:46,080] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@39
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=35:40, 当前值=9.8500
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.86
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.86
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 39, 值: 9.86
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[39] = 9.86
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:46,081] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,081] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,081] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 38)
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 39
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@39
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=20:40, 当前值=9.8500
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.635
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.635
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 39, 值: 10.635
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[39] = 10.635
[2025-08-18 19:26:46,081] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:46,081] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,081] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.7125
[2025-08-18 19:26:46,081] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.7125 (from index 38)
[2025-08-18 19:26:46,081] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,081] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,082] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,082] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,082] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,082] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 38 (当前索引: 39, 回溯周期: 1)
[2025-08-18 19:26:46,082] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,082] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,082] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:46,082] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,082] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-28', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8700'), 'low': Decimal('9.6400'), 'close': Decimal('9.8500'), 'volume': Decimal('12892399'), 'amount': Decimal('125856550.5500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-28 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.86, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.635, 'REF(SMA(close, 20),1)': 10.7125, 'SMA(close,5)': 9.86, 'SMA(close,20)': 10.635}
[2025-08-18 19:26:46,082] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-29 00:00:00
[2025-08-18 19:26:46,082] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,082] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-29 00:00:00
[2025-08-18 19:26:46,082] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,082] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@40
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=36:41, 当前值=9.7200
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.815999999999999
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.815999999999999
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 40, 值: 9.815999999999999
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[40] = 9.815999999999999
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:46,083] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.86
[2025-08-18 19:26:46,083] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.86
[2025-08-18 19:26:46,083] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.86 (from index 39)
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 40
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@40
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=21:41, 当前值=9.7200
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.548
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.548
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 40, 值: 10.548
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[40] = 10.548
[2025-08-18 19:26:46,083] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:46,083] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.635
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.635
[2025-08-18 19:26:46,084] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.635 (from index 39)
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:46,084] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 39 (当前索引: 40, 回溯周期: 1)
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,084] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:46,084] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,084] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-29', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8300'), 'high': Decimal('9.8700'), 'low': Decimal('9.4800'), 'close': Decimal('9.7200'), 'volume': Decimal('15174100'), 'amount': Decimal('145998673.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-29 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.815999999999999, 'REF(SMA(close, 5),1)': 9.86, 'SMA(close, 20)': 10.548, 'REF(SMA(close, 20),1)': 10.635, 'SMA(close,5)': 9.815999999999999, 'SMA(close,20)': 10.548}
[2025-08-18 19:26:46,084] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-30 00:00:00
[2025-08-18 19:26:46,084] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,084] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-30 00:00:00
[2025-08-18 19:26:46,085] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@41
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=37:42, 当前值=9.7100
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.772
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.772
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 41, 值: 9.772
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[41] = 9.772
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:46,085] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,085] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.815999999999999
[2025-08-18 19:26:46,085] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.815999999999999 (from index 40)
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 41
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@41
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=22:42, 当前值=9.7100
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.4685
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.4685
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 41, 值: 10.4685
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[41] = 10.4685
[2025-08-18 19:26:46,085] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:46,085] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.548
[2025-08-18 19:26:46,085] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.548
[2025-08-18 19:26:46,085] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.548 (from index 40)
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:46,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 40 (当前索引: 41, 回溯周期: 1)
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:46,086] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,086] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,086] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-30', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6400'), 'high': Decimal('9.7900'), 'low': Decimal('9.6200'), 'close': Decimal('9.7100'), 'volume': Decimal('9069800'), 'amount': Decimal('88084034.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-30 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.772, 'REF(SMA(close, 5),1)': 9.815999999999999, 'SMA(close, 20)': 10.4685, 'REF(SMA(close, 20),1)': 10.548, 'SMA(close,5)': 9.772, 'SMA(close,20)': 10.4685}
[2025-08-18 19:26:46,086] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-07-31 00:00:00
[2025-08-18 19:26:46,086] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,086] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-07-31 00:00:00
[2025-08-18 19:26:46,086] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,086] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@42
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=38:43, 当前值=9.6000
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.73
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.73
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 42, 值: 9.73
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[42] = 9.73
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:46,087] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.772
[2025-08-18 19:26:46,087] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.772
[2025-08-18 19:26:46,087] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.772 (from index 41)
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 42
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@42
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=23:43, 当前值=9.6000
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.3855
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.3855
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 42, 值: 10.3855
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[42] = 10.3855
[2025-08-18 19:26:46,087] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:46,087] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,087] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.4685
[2025-08-18 19:26:46,087] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.4685 (from index 41)
[2025-08-18 19:26:46,087] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:46,087] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:46,087] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,087] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,088] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,088] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,088] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:46,088] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:46,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:46,088] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,088] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,088] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,088] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 41 (当前索引: 42, 回溯周期: 1)
[2025-08-18 19:26:46,088] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:46,088] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:46,088] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,088] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,088] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,088] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-07-31', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.6700'), 'high': Decimal('9.6800'), 'low': Decimal('9.5700'), 'close': Decimal('9.6000'), 'volume': Decimal('6631455'), 'amount': Decimal('63720844.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-07-31 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.73, 'REF(SMA(close, 5),1)': 9.772, 'SMA(close, 20)': 10.3855, 'REF(SMA(close, 20),1)': 10.4685, 'SMA(close,5)': 9.73, 'SMA(close,20)': 10.3855}
[2025-08-18 19:26:46,088] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-01 00:00:00
[2025-08-18 19:26:46,088] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,088] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-01 00:00:00
[2025-08-18 19:26:46,088] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@43
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=39:44, 当前值=9.5900
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.693999999999999
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.693999999999999
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 43, 值: 9.693999999999999
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[43] = 9.693999999999999
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:46,089] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.73
[2025-08-18 19:26:46,089] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.73
[2025-08-18 19:26:46,089] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.73 (from index 42)
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 43
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@43
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=24:44, 当前值=9.5900
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.322
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.322
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 43, 值: 10.322
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[43] = 10.322
[2025-08-18 19:26:46,089] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:46,089] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,089] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.3855
[2025-08-18 19:26:46,089] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.3855 (from index 42)
[2025-08-18 19:26:46,089] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,089] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,090] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,090] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,090] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,090] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 42 (当前索引: 43, 回溯周期: 1)
[2025-08-18 19:26:46,090] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,090] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,090] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:46,090] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,090] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-01', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.5900'), 'high': Decimal('9.7000'), 'low': Decimal('9.5300'), 'close': Decimal('9.5900'), 'volume': Decimal('6628475'), 'amount': Decimal('63641406.2500'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-01 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.693999999999999, 'REF(SMA(close, 5),1)': 9.73, 'SMA(close, 20)': 10.322, 'REF(SMA(close, 20),1)': 10.3855, 'SMA(close,5)': 9.693999999999999, 'SMA(close,20)': 10.322}
[2025-08-18 19:26:46,090] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-04 00:00:00
[2025-08-18 19:26:46,090] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,090] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-04 00:00:00
[2025-08-18 19:26:46,090] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,090] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@44
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=40:45, 当前值=9.9400
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.712
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.712
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 44, 值: 9.712
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[44] = 9.712
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:46,091] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,091] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.693999999999999
[2025-08-18 19:26:46,091] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.693999999999999 (from index 43)
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 44
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@44
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=25:45, 当前值=9.9400
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.2595
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.2595
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 44, 值: 10.2595
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[44] = 10.2595
[2025-08-18 19:26:46,091] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:46,091] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.322
[2025-08-18 19:26:46,091] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.322
[2025-08-18 19:26:46,091] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.322 (from index 43)
[2025-08-18 19:26:46,091] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:46,091] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:46,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:46,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:46,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:46,092] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 43 (当前索引: 44, 回溯周期: 1)
[2025-08-18 19:26:46,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:46,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:46,092] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,092] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,092] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-04', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7600'), 'high': Decimal('10.0500'), 'low': Decimal('9.6000'), 'close': Decimal('9.9400'), 'volume': Decimal('22449020'), 'amount': Decimal('221168482.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-04 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.712, 'REF(SMA(close, 5),1)': 9.693999999999999, 'SMA(close, 20)': 10.2595, 'REF(SMA(close, 20),1)': 10.322, 'SMA(close,5)': 9.712, 'SMA(close,20)': 10.2595}
[2025-08-18 19:26:46,092] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-05 00:00:00
[2025-08-18 19:26:46,092] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,092] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-05 00:00:00
[2025-08-18 19:26:46,092] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@45
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=41:46, 当前值=9.8000
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.728
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.728
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 45, 值: 9.728
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[45] = 9.728
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:46,093] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.712
[2025-08-18 19:26:46,093] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.712
[2025-08-18 19:26:46,093] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.712 (from index 44)
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 45
[2025-08-18 19:26:46,093] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@45
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=26:46, 当前值=9.8000
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.181000000000001
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.181000000000001
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 45, 值: 10.181000000000001
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[45] = 10.181000000000001
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.2595
[2025-08-18 19:26:46,094] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.2595 (from index 44)
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,094] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,094] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 44 (当前索引: 45, 回溯周期: 1)
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:46,094] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,095] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,095] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,095] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-05', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.9300'), 'high': Decimal('10.0500'), 'low': Decimal('9.7500'), 'close': Decimal('9.8000'), 'volume': Decimal('14326900'), 'amount': Decimal('140652171.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-05 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.728, 'REF(SMA(close, 5),1)': 9.712, 'SMA(close, 20)': 10.181000000000001, 'REF(SMA(close, 20),1)': 10.2595, 'SMA(close,5)': 9.728, 'SMA(close,20)': 10.181000000000001}
[2025-08-18 19:26:46,095] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-06 00:00:00
[2025-08-18 19:26:46,095] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,095] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-06 00:00:00
[2025-08-18 19:26:46,095] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@46
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=42:47, 当前值=9.8800
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=9.762
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=9.762
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 46, 值: 9.762
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[46] = 9.762
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:46,095] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.728
[2025-08-18 19:26:46,095] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.728
[2025-08-18 19:26:46,095] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.728 (from index 45)
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 46
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@46
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=27:47, 当前值=9.8800
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.104000000000001
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.104000000000001
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 46, 值: 10.104000000000001
[2025-08-18 19:26:46,095] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[46] = 10.104000000000001
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.181000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.181000000000001 (from index 45)
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 45 (当前索引: 46, 回溯周期: 1)
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:46,096] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,096] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,096] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-06', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.7700'), 'high': Decimal('9.8900'), 'low': Decimal('9.6500'), 'close': Decimal('9.8800'), 'volume': Decimal('11917700'), 'amount': Decimal('116643412.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-06 00:00:00'), 'signal': 0, 'SMA(close, 5)': 9.762, 'REF(SMA(close, 5),1)': 9.728, 'SMA(close, 20)': 10.104000000000001, 'REF(SMA(close, 20),1)': 10.181000000000001, 'SMA(close,5)': 9.762, 'SMA(close,20)': 10.104000000000001}
[2025-08-18 19:26:46,096] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-07 00:00:00
[2025-08-18 19:26:46,096] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,097] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-07 00:00:00
[2025-08-18 19:26:46,097] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@47
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=43:48, 当前值=10.8700
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.016
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.016
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 47, 值: 10.016
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[47] = 10.016
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:46,097] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=9.762
[2025-08-18 19:26:46,097] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=9.762
[2025-08-18 19:26:46,097] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=9.762 (from index 46)
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 47
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@47
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=28:48, 当前值=10.8700
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.086
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.086
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 47, 值: 10.086
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[47] = 10.086
[2025-08-18 19:26:46,097] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:46,097] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,097] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.104000000000001
[2025-08-18 19:26:46,097] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.104000000000001 (from index 46)
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,098] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:46,098] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 46 (当前索引: 47, 回溯周期: 1)
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:46,098] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:46,098] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,098] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-07', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('9.8100'), 'high': Decimal('10.8700'), 'low': Decimal('9.7700'), 'close': Decimal('10.8700'), 'volume': Decimal('34331640'), 'amount': Decimal('358998997.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-07 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.016, 'REF(SMA(close, 5),1)': 9.762, 'SMA(close, 20)': 10.086, 'REF(SMA(close, 20),1)': 10.104000000000001, 'SMA(close,5)': 10.016, 'SMA(close,20)': 10.086}
[2025-08-18 19:26:46,099] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-08 00:00:00
[2025-08-18 19:26:46,099] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,099] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-08 00:00:00
[2025-08-18 19:26:46,099] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@48
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=44:49, 当前值=11.2400
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.346
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.346
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 48, 值: 10.346
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[48] = 10.346
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:46,099] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.016
[2025-08-18 19:26:46,099] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.016
[2025-08-18 19:26:46,099] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.016 (from index 47)
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 48
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@48
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=29:49, 当前值=11.2400
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.083
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.083
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 48, 值: 10.083
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,099] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[48] = 10.083
[2025-08-18 19:26:46,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.086
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.086
[2025-08-18 19:26:46,100] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.086 (from index 47)
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,100] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:46,100] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 47 (当前索引: 48, 回溯周期: 1)
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:46,100] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:46,100] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,100] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-08', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('11.2100'), 'high': Decimal('11.6500'), 'low': Decimal('10.7600'), 'close': Decimal('11.2400'), 'volume': Decimal('51811380'), 'amount': Decimal('574331218.0600'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-08 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.346, 'REF(SMA(close, 5),1)': 10.016, 'SMA(close, 20)': 10.083, 'REF(SMA(close, 20),1)': 10.086, 'SMA(close,5)': 10.346, 'SMA(close,20)': 10.083}
[2025-08-18 19:26:46,101] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-11 00:00:00
[2025-08-18 19:26:46,101] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,101] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-11 00:00:00
[2025-08-18 19:26:46,101] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@49
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=45:50, 当前值=10.8900
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.536
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.536
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 49, 值: 10.536
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[49] = 10.536
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:46,101] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.346
[2025-08-18 19:26:46,101] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.346
[2025-08-18 19:26:46,101] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.346 (from index 48)
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 49
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@49
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=30:50, 当前值=10.8900
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.033
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.033
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 49, 值: 10.033
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[49] = 10.033
[2025-08-18 19:26:46,101] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.083
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.083
[2025-08-18 19:26:46,102] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.083 (from index 48)
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:46,102] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 48 (当前索引: 49, 回溯周期: 1)
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:46,102] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:46,102] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,102] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-11', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8000'), 'high': Decimal('10.9700'), 'low': Decimal('10.4800'), 'close': Decimal('10.8900'), 'volume': Decimal('29621940'), 'amount': Decimal('319078682.4000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-11 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.536, 'REF(SMA(close, 5),1)': 10.346, 'SMA(close, 20)': 10.033, 'REF(SMA(close, 20),1)': 10.083, 'SMA(close,5)': 10.536, 'SMA(close,20)': 10.033}
[2025-08-18 19:26:46,102] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-12 00:00:00
[2025-08-18 19:26:46,102] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,102] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-12 00:00:00
[2025-08-18 19:26:46,102] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@50
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=46:51, 当前值=10.9600
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.768
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.768
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 50, 值: 10.768
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[50] = 10.768
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:46,103] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.536
[2025-08-18 19:26:46,103] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.536
[2025-08-18 19:26:46,103] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.536 (from index 49)
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 50
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@50
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=31:51, 当前值=10.9600
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.046
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.046
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 50, 值: 10.046
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[50] = 10.046
[2025-08-18 19:26:46,103] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:46,103] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.033
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.033
[2025-08-18 19:26:46,104] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.033 (from index 49)
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:46,104] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 49 (当前索引: 50, 回溯周期: 1)
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:46,104] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:46,104] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,104] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-12', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.8100'), 'high': Decimal('11.1800'), 'low': Decimal('10.7500'), 'close': Decimal('10.9600'), 'volume': Decimal('27855000'), 'amount': Decimal('305544408.2400'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-12 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.768, 'REF(SMA(close, 5),1)': 10.536, 'SMA(close, 20)': 10.046, 'REF(SMA(close, 20),1)': 10.033, 'SMA(close,5)': 10.768, 'SMA(close,20)': 10.046}
[2025-08-18 19:26:46,104] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-13 00:00:00
[2025-08-18 19:26:46,104] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,104] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-13 00:00:00
[2025-08-18 19:26:46,104] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@51
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=47:52, 当前值=10.6400
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.92
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.92
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 51, 值: 10.92
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[51] = 10.92
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:46,105] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.768
[2025-08-18 19:26:46,105] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.768
[2025-08-18 19:26:46,105] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.768 (from index 50)
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 51
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@51
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=32:52, 当前值=10.6400
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.0815
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.0815
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 51, 值: 10.0815
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[51] = 10.0815
[2025-08-18 19:26:46,105] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:46,105] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.046
[2025-08-18 19:26:46,105] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.046
[2025-08-18 19:26:46,105] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.046 (from index 50)
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:46,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 50 (当前索引: 51, 回溯周期: 1)
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:46,106] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,106] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,106] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-13', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.9000'), 'high': Decimal('10.9600'), 'low': Decimal('10.5000'), 'close': Decimal('10.6400'), 'volume': Decimal('25362800'), 'amount': Decimal('269858594.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-13 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.92, 'REF(SMA(close, 5),1)': 10.768, 'SMA(close, 20)': 10.0815, 'REF(SMA(close, 20),1)': 10.046, 'SMA(close,5)': 10.92, 'SMA(close,20)': 10.0815}
[2025-08-18 19:26:46,106] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-14 00:00:00
[2025-08-18 19:26:46,106] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,106] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-14 00:00:00
[2025-08-18 19:26:46,106] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,106] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@52
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=48:53, 当前值=10.2700
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.8
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.8
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 52, 值: 10.8
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[52] = 10.8
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:46,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.92
[2025-08-18 19:26:46,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.92
[2025-08-18 19:26:46,107] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.92 (from index 51)
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 52
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@52
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=33:53, 当前值=10.2700
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1005
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1005
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 52, 值: 10.1005
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[52] = 10.1005
[2025-08-18 19:26:46,107] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:46,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.0815
[2025-08-18 19:26:46,107] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.0815 (from index 51)
[2025-08-18 19:26:46,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:46,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:46,107] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,107] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,107] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:46,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:46,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:46,108] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,108] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 51 (当前索引: 52, 回溯周期: 1)
[2025-08-18 19:26:46,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:46,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:46,108] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,108] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,108] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,109] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-14', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.6400'), 'high': Decimal('10.7100'), 'low': Decimal('10.2600'), 'close': Decimal('10.2700'), 'volume': Decimal('21862900'), 'amount': Decimal('228640246.0000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-14 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.8, 'REF(SMA(close, 5),1)': 10.92, 'SMA(close, 20)': 10.1005, 'REF(SMA(close, 20),1)': 10.0815, 'SMA(close,5)': 10.8, 'SMA(close,20)': 10.1005}
[2025-08-18 19:26:46,109] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-15 00:00:00
[2025-08-18 19:26:46,109] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,109] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-15 00:00:00
[2025-08-18 19:26:46,109] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@53
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=49:54, 当前值=10.3000
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.612
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.612
[2025-08-18 19:26:46,109] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 53, 值: 10.612
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[53] = 10.612
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:46,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.8
[2025-08-18 19:26:46,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.8
[2025-08-18 19:26:46,110] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.8 (from index 52)
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 53
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@53
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=34:54, 当前值=10.3000
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.128
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.128
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 53, 值: 10.128
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[53] = 10.128
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:46,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1005
[2025-08-18 19:26:46,110] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.1005 (from index 52)
[2025-08-18 19:26:46,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:46,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:46,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:46,110] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:46,110] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,110] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,110] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:46,111] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,111] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:46,111] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 52 (当前索引: 53, 回溯周期: 1)
[2025-08-18 19:26:46,111] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:46,111] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:46,111] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:46,111] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:46,111] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,111] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-15', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.1200'), 'high': Decimal('10.3600'), 'low': Decimal('10.0800'), 'close': Decimal('10.3000'), 'volume': Decimal('15409920'), 'amount': Decimal('157573581.6000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-15 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.612, 'REF(SMA(close, 5),1)': 10.8, 'SMA(close, 20)': 10.128, 'REF(SMA(close, 20),1)': 10.1005, 'SMA(close,5)': 10.612, 'SMA(close,20)': 10.128}
[2025-08-18 19:26:46,111] [DEBUG] [backtesting:221] [conn:N/A] 处理交易日事件 @ 2025-08-18 00:00:00
[2025-08-18 19:26:46,111] [DEBUG] [backtesting:222] [conn:N/A] 待处理事件队列: []
[2025-08-18 19:26:46,111] [WARNING] [backtesting:392] [conn:N/A] 跳过净值更新: 收盘价为None | 时间: 2025-08-18 00:00:00
[2025-08-18 19:26:46,111] [DEBUG] [backtesting:210] [conn:N/A] 进入on_schedule方法
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['5']
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,5)@54
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=5, 数据范围=50:55, 当前值=10.2800
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.49
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,5=10.49
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,5) 到索引 54, 值: 10.49
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,5)[54] = 10.49
[2025-08-18 19:26:46,111] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:46,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.612
[2025-08-18 19:26:46,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.612
[2025-08-18 19:26:46,112] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 5),1)=10.612 (from index 53)
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:265] [conn:N/A] 计算指标 SMA 开始, 当前索引: 54
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:266] [conn:N/A] 数据列: close, 参数: ['20']
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:267] [conn:N/A] 缓存键: SMA(close,20)@54
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:290] [conn:N/A] SMA计算详情: 周期=20, 数据范围=35:55, 当前值=10.2800
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:303] [conn:N/A] 指标计算结果: SMA=10.1495
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:305] [conn:N/A] SMA计算详情: close,20=10.1495
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:332] [conn:N/A] 准备存储指标 SMA(close,20) 到索引 54, 值: 10.1495
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:333] [conn:N/A] 当前数据长度: 55, 列是否存在: True
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:341] [conn:N/A] 存储指标 SMA(close,20)[54] = 10.1495
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:46,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.128
[2025-08-18 19:26:46,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.128
[2025-08-18 19:26:46,112] [INFO] [rule_parser:480] [conn:N/A] [REF_RESULT] REF(SMA(close, 20),1)=10.128 (from index 53)
[2025-08-18 19:26:46,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:46,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:46,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,112] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) < REF(SMA(close,20), 1)) & (SMA(close,5) > SMA(close,20)) = False
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 5), period=1)
[2025-08-18 19:26:46,112] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:46,112] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:46,112] [DEBUG] [rule_parser:429] [conn:N/A] [REF] 开始计算REF(expr=SMA(close, 20), period=1)
[2025-08-18 19:26:46,113] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,113] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,113] [DEBUG] [rule_parser:453] [conn:N/A] [REF] 目标索引位置: 53 (当前索引: 54, 回溯周期: 1)
[2025-08-18 19:26:46,113] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,5)=10.49
[2025-08-18 19:26:46,113] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,5)=10.49
[2025-08-18 19:26:46,113] [INFO] [rule_parser:256] [conn:N/A] [CACHE_HIT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,113] [INFO] [rule_parser:260] [conn:N/A] [SMA_RESULT] SMA(close,20)=10.1495
[2025-08-18 19:26:46,113] [INFO] [rule_parser:114] [conn:N/A] [RULE_RESULT] (REF(SMA(close,5), 1) > REF(SMA(close,20), 1)) & (SMA(close,5) < SMA(close,20)) = False
[2025-08-18 19:26:46,113] [DEBUG] [backtesting:215] [conn:N/A] 当前数据: {'date': '2025-08-18', 'time': '00:00:00', 'code': 'sh.603900', 'open': Decimal('10.3000'), 'high': Decimal('10.4100'), 'low': Decimal('10.2100'), 'close': Decimal('10.2800'), 'volume': Decimal('14335285'), 'amount': Decimal('147287583.1000'), 'adjustflag': '3', 'combined_time': Timestamp('2025-08-18 00:00:00'), 'signal': 0, 'SMA(close, 5)': 10.49, 'REF(SMA(close, 5),1)': 10.612, 'SMA(close, 20)': 10.1495, 'REF(SMA(close, 20),1)': 10.128, 'SMA(close,5)': 10.49, 'SMA(close,20)': 10.1495}
[2025-08-18 19:26:46,113] [DEBUG] [backtesting:217] [conn:N/A] 回测完成
[2025-08-18 19:26:46,114] [DEBUG] [backtesting:285] [conn:N/A] 回测完成！
[2025-08-18 19:26:57,508] [DEBUG] [database:28] [conn:N/A] DatabaseManager initialized, instance_id: 4828435360
[2025-08-18 19:27:02,516] [ERROR] [database:89] [conn:N/A] 连接池初始化失败: unexpected connection_lost() call
[2025-08-18 19:27:27,493] [DEBUG] [database:28] [conn:N/A] DatabaseManager initialized, instance_id: 4902888496
[2025-08-18 19:27:32,664] [ERROR] [database:89] [conn:N/A] 连接池初始化失败: unexpected connection_lost() call
