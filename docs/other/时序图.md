# 资金流数据时序图

```mermaid
sequenceDiagram
    participant 用户
    participant 前端
    participant 后端
    participant 数据库
    participant 数据源

    用户->>前端: 请求资金流数据
    前端->>后端: GET /api/fund_flow
    后端->>数据库: 查询缓存数据
    数据库-->>后端: 返回缓存结果
    
    alt 缓存命中
        后端-->>前端: 返回缓存数据
    else 缓存未命中
        后端->>数据源: 请求实时资金流
        数据源-->>后端: 返回资金流数据
        后端->>数据库: 缓存新数据
        后端-->>前端: 返回实时数据
    end

    前端->>前端: 渲染三栏仪表盘
    前端-->>用户: 展示资金流分析
```

## 数据流程说明
1. **用户请求**：通过前端界面触发资金流数据请求
2. **缓存检查**：后端优先检查数据库缓存
3. **实时获取**：缓存未命中时从数据源获取实时数据
4. **数据缓存**：新获取的数据存入数据库
5. **可视化渲染**：前端将数据渲染到三栏仪表盘

## 相关代码文件
- 数据获取：`src/core/data/baostock_source.py`
- 缓存处理：`src/core/data/database.py` 
- API接口：`src/backend/api/fund_flow.py`
- 前端展示：`src/frontend/dashboard.py`
